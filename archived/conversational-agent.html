<!DOCTYPE html>
<html lang="ko" data-theme="dark-kernel">
<head>
<script>
(function(){var m=document.cookie.match(/claude_theme=([^;]+)/);if(m)document.documentElement.setAttribute('data-theme',m[1]);})();
</script>
<meta charset="UTF-8">
<meta property="og:type" content="article">
<meta property="og:site_name" content="Claude ë¬¸ì„œ /with MINZKN">
<meta property="og:title" content="ëŒ€í™”í˜• ì—ì´ì „íŠ¸ - Claude ë¬¸ì„œ">
<meta property="og:description" content="Claude ê¸°ë°˜ ì±—ë´‡ ë° ëŒ€í™”í˜• AI ì—ì´ì „íŠ¸ êµ¬ì¶• ê°€ì´ë“œ">
<meta property="og:url" content="https://minzkn.com/claude/pages/conversational-agent.html">
<meta property="og:image" content="https://minzkn.com/claude/images/og-image.png">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="Claude ê¸°ë°˜ ì±—ë´‡ ë° ëŒ€í™”í˜• AI ì—ì´ì „íŠ¸ êµ¬ì¶• ê°€ì´ë“œ">
<meta name="keywords" content="ì±—ë´‡, chatbot, ëŒ€í™”í˜• ì—ì´ì „íŠ¸, conversational AI">
<meta name="author" content="MINZKN">
<title>ëŒ€í™”í˜• ì—ì´ì „íŠ¸ - Claude ë¬¸ì„œ /with MINZKN</title>
<link rel="icon" type="image/svg+xml" href="../images/favicon.svg">
<link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/joungkyun/font-d2coding/d2coding.css">
<link rel="stylesheet" href="../css/themes.css">
<link rel="stylesheet" href="../css/style.css">
<link rel="stylesheet" href="../css/responsive.css">
</head>
<body>
<div class="page-wrapper">

<header class="site-header"></header>
<nav class="side-nav" aria-label="ì‚¬ì´íŠ¸ ë‚´ë¹„ê²Œì´ì…˜"></nav>

<main class="main-content">

<nav class="breadcrumb"></nav>

<section class="content-section">
  <h1 id="top">ëŒ€í™”í˜• ì—ì´ì „íŠ¸</h1>
  <p class="lead">
    Claudeë¥¼ í™œìš©í•˜ì—¬ ê³ ê° ì§€ì› ì±—ë´‡, ê°€ìƒ ì–´ì‹œìŠ¤í„´íŠ¸, Q&A ì‹œìŠ¤í…œ ë“±
    ë‹¤ì–‘í•œ ëŒ€í™”í˜• AI ì—ì´ì „íŠ¸ë¥¼ êµ¬ì¶•í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
  </p>

  <figure style="margin: 2.5rem 0;">
    <svg viewBox="0 0 1000 420" style="width: 100%; max-width: 1000px; height: auto; display: block; margin: 0 auto;">
      <defs>
        <marker id="convagent-arrow" markerWidth="8" markerHeight="6" refX="8" refY="3" orient="auto">
          <path d="M0,0 L8,3 L0,6 Z" fill="var(--diagram-arrow)"/>
        </marker>
      </defs>

      <!-- ì œëª© -->
      <text x="500" y="25" text-anchor="middle" font-size="15" font-weight="bold" fill="var(--diagram-text)">ëŒ€í™”í˜• ì—ì´ì „íŠ¸ ì•„í‚¤í…ì²˜ ë° ëŒ€í™” íë¦„</text>

      <!-- ì‚¬ìš©ì -->
      <rect x="50" y="60" width="120" height="80" fill="var(--diagram-primary)" stroke="var(--diagram-border)" stroke-width="2" rx="6"/>
      <text x="110" y="90" text-anchor="middle" font-size="12" font-weight="bold" fill="var(--diagram-text)">ğŸ‘¤ ì‚¬ìš©ì</text>
      <text x="110" y="110" text-anchor="middle" font-size="10" fill="var(--diagram-text)">ì›¹/ì•± UI</text>
      <text x="110" y="125" text-anchor="middle" font-size="10" fill="var(--diagram-text)">ë©”ì‹œì§€ ì „ì†¡</text>

      <!-- í™”ì‚´í‘œ 1 (ì‚¬ìš©ì â†’ ë°±ì—”ë“œ) -->
      <line x1="170" y1="100" x2="220" y2="100" stroke="var(--diagram-arrow)" stroke-width="2.5" marker-end="url(#convagent-arrow)"/>
      <text x="195" y="93" text-anchor="middle" font-size="9" fill="var(--diagram-secondary)">HTTP POST</text>

      <!-- ë°±ì—”ë“œ ì„œë²„ -->
      <rect x="220" y="60" width="140" height="80" fill="var(--diagram-warning)" stroke="var(--diagram-border)" stroke-width="2" rx="6"/>
      <text x="290" y="85" text-anchor="middle" font-size="12" font-weight="bold" fill="var(--diagram-text)">ğŸ–¥ï¸ ë°±ì—”ë“œ</text>
      <text x="290" y="105" text-anchor="middle" font-size="10" fill="var(--diagram-text)">ì„¸ì…˜ ID í™•ì¸</text>
      <text x="290" y="120" text-anchor="middle" font-size="10" fill="var(--diagram-text)">ëŒ€í™” íˆìŠ¤í† ë¦¬ ì¡°íšŒ</text>

      <!-- í™”ì‚´í‘œ 2 (ë°±ì—”ë“œ â†’ ëŒ€í™” íˆìŠ¤í† ë¦¬ DB) -->
      <line x1="290" y1="140" x2="290" y2="180" stroke="var(--diagram-arrow)" stroke-width="2" stroke-dasharray="5,5" marker-end="url(#convagent-arrow)"/>

      <!-- ëŒ€í™” íˆìŠ¤í† ë¦¬ DB -->
      <rect x="210" y="180" width="160" height="70" fill="var(--diagram-cache)" stroke="var(--diagram-border)" stroke-width="2" rx="6"/>
      <text x="290" y="200" text-anchor="middle" font-size="11" font-weight="bold" fill="var(--diagram-text)">ğŸ’¾ ëŒ€í™” íˆìŠ¤í† ë¦¬</text>
      <text x="290" y="218" text-anchor="middle" font-size="9" font-family="D2Coding" fill="var(--diagram-text)">session_123: [</text>
      <text x="290" y="232" text-anchor="middle" font-size="9" font-family="D2Coding" fill="var(--diagram-text)">  {user: "ì•ˆë…•"},</text>
      <text x="290" y="244" text-anchor="middle" font-size="9" font-family="D2Coding" fill="var(--diagram-text)">  {assistant: "..."}]</text>

      <!-- í™”ì‚´í‘œ 3 (ë°±ì—”ë“œ â†’ Claude) -->
      <line x1="360" y1="100" x2="410" y2="100" stroke="var(--diagram-arrow)" stroke-width="2.5" marker-end="url(#convagent-arrow)"/>
      <text x="385" y="93" text-anchor="middle" font-size="9" fill="var(--diagram-secondary)">API í˜¸ì¶œ</text>

      <!-- Claude API -->
      <rect x="410" y="60" width="140" height="80" fill="var(--diagram-success)" stroke="var(--diagram-border)" stroke-width="2" rx="6"/>
      <text x="480" y="85" text-anchor="middle" font-size="12" font-weight="bold" fill="var(--diagram-text)">ğŸ¤– Claude</text>
      <text x="480" y="105" text-anchor="middle" font-size="10" fill="var(--diagram-text)">system í”„ë¡¬í”„íŠ¸</text>
      <text x="480" y="120" text-anchor="middle" font-size="10" fill="var(--diagram-text)">+ ëŒ€í™” íˆìŠ¤í† ë¦¬</text>

      <!-- í™”ì‚´í‘œ 4 (Claude â†’ ë°±ì—”ë“œ) -->
      <line x1="550" y1="110" x2="600" y2="110" stroke="var(--diagram-arrow)" stroke-width="2.5" marker-end="url(#convagent-arrow)"/>
      <text x="575" y="103" text-anchor="middle" font-size="9" fill="var(--diagram-secondary)">ì‘ë‹µ</text>

      <!-- ì‘ë‹µ ì²˜ë¦¬ -->
      <rect x="600" y="60" width="140" height="80" fill="var(--diagram-warning)" stroke="var(--diagram-border)" stroke-width="2" rx="6"/>
      <text x="670" y="85" text-anchor="middle" font-size="12" font-weight="bold" fill="var(--diagram-text)">ğŸ“ ì‘ë‹µ ì²˜ë¦¬</text>
      <text x="670" y="105" text-anchor="middle" font-size="10" fill="var(--diagram-text)">íˆìŠ¤í† ë¦¬ ì—…ë°ì´íŠ¸</text>
      <text x="670" y="120" text-anchor="middle" font-size="10" fill="var(--diagram-text)">ì‘ë‹µ ë°˜í™˜</text>

      <!-- í™”ì‚´í‘œ 5 (ì‘ë‹µ â†’ ì‚¬ìš©ì) -->
      <line x1="740" y1="100" x2="790" y2="100" stroke="var(--diagram-arrow)" stroke-width="2.5" marker-end="url(#convagent-arrow)"/>
      <text x="765" y="93" text-anchor="middle" font-size="9" fill="var(--diagram-secondary)">JSON</text>

      <!-- ì‚¬ìš©ì ì‘ë‹µ -->
      <rect x="790" y="60" width="120" height="80" fill="var(--diagram-primary)" stroke="var(--diagram-border)" stroke-width="2" rx="6"/>
      <text x="850" y="90" text-anchor="middle" font-size="12" font-weight="bold" fill="var(--diagram-text)">ğŸ‘¤ ì‚¬ìš©ì</text>
      <text x="850" y="110" text-anchor="middle" font-size="10" fill="var(--diagram-text)">ì‘ë‹µ í‘œì‹œ</text>
      <text x="850" y="125" text-anchor="middle" font-size="10" fill="var(--diagram-text)">UI ì—…ë°ì´íŠ¸</text>

      <!-- ë£¨í”„ í™”ì‚´í‘œ (ê³„ì† ëŒ€í™”) -->
      <path d="M 850,140 L 850,170 L 110,170 L 110,140" stroke="var(--diagram-warning)" stroke-width="2" stroke-dasharray="5,5" fill="none" marker-end="url(#convagent-arrow)"/>
      <text x="480" y="165" text-anchor="middle" font-size="10" fill="var(--diagram-warning)" font-weight="bold">â† ë‹¤ìŒ ë©”ì‹œì§€ ì „ì†¡ (ëŒ€í™” ê³„ì†)</text>

      <!-- í•˜ë‹¨ ì‹¤ì œ ëŒ€í™” íë¦„ ì˜ˆì‹œ -->
      <text x="500" y="220" text-anchor="middle" font-size="14" font-weight="bold" fill="var(--diagram-text)">ë©€í‹°í„´ ëŒ€í™” íë¦„ ì˜ˆì‹œ (ê³ ê° ì§€ì› ì±—ë´‡)</text>

      <!-- í„´ 1 -->
      <rect x="50" y="240" width="280" height="55" fill="var(--diagram-bg-tertiary)" stroke="var(--diagram-border)" stroke-width="2" rx="6"/>
      <text x="190" y="260" text-anchor="middle" font-size="11" font-weight="bold" fill="var(--diagram-text)">í„´ 1</text>
      <rect x="70" y="267" width="240" height="22" fill="var(--diagram-primary)" fill-opacity="0.3" stroke="var(--diagram-border)" stroke-width="1" rx="3"/>
      <text x="80" y="282" font-size="9" fill="var(--diagram-text)">ì‚¬ìš©ì: "ì£¼ë¬¸ ì·¨ì†Œí•˜ê³  ì‹¶ì–´ìš”"</text>

      <line x1="330" y1="267" x2="360" y2="267" stroke="var(--diagram-arrow)" stroke-width="2" marker-end="url(#convagent-arrow)"/>

      <!-- í„´ 1 ì‘ë‹µ -->
      <rect x="360" y="240" width="280" height="55" fill="var(--diagram-bg-tertiary)" stroke="var(--diagram-border)" stroke-width="2" rx="6"/>
      <rect x="380" y="267" width="240" height="22" fill="var(--diagram-success)" fill-opacity="0.3" stroke="var(--diagram-border)" stroke-width="1" rx="3"/>
      <text x="390" y="282" font-size="9" fill="var(--diagram-text)">Claude: "ì£¼ë¬¸ë²ˆí˜¸ë¥¼ ì•Œë ¤ì£¼ì‹œê² ì–´ìš”?"</text>

      <!-- ì»¨í…ìŠ¤íŠ¸ í‘œì‹œ -->
      <rect x="670" y="240" width="280" height="55" fill="var(--diagram-cache)" fill-opacity="0.3" stroke="var(--diagram-border)" stroke-width="1.5" rx="6"/>
      <text x="810" y="260" text-anchor="middle" font-size="10" font-weight="bold" fill="var(--diagram-text)">ğŸ’­ ì»¨í…ìŠ¤íŠ¸ ì €ì¥</text>
      <text x="810" y="275" text-anchor="middle" font-size="8" fill="var(--diagram-secondary)">ì‚¬ìš©ìê°€ ì£¼ë¬¸ ì·¨ì†Œ ì›í•¨</text>
      <text x="810" y="287" text-anchor="middle" font-size="8" fill="var(--diagram-secondary)">ì£¼ë¬¸ë²ˆí˜¸ í•„ìš”</text>

      <!-- í„´ 2 -->
      <rect x="50" y="310" width="280" height="55" fill="var(--diagram-bg-tertiary)" stroke="var(--diagram-border)" stroke-width="2" rx="6"/>
      <text x="190" y="330" text-anchor="middle" font-size="11" font-weight="bold" fill="var(--diagram-text)">í„´ 2</text>
      <rect x="70" y="337" width="240" height="22" fill="var(--diagram-primary)" fill-opacity="0.3" stroke="var(--diagram-border)" stroke-width="1" rx="3"/>
      <text x="80" y="352" font-size="9" fill="var(--diagram-text)">ì‚¬ìš©ì: "ì£¼ë¬¸ë²ˆí˜¸ëŠ” 12345ì˜ˆìš”"</text>

      <line x1="330" y1="337" x2="360" y2="337" stroke="var(--diagram-arrow)" stroke-width="2" marker-end="url(#convagent-arrow)"/>

      <!-- í„´ 2 ì‘ë‹µ -->
      <rect x="360" y="310" width="280" height="55" fill="var(--diagram-bg-tertiary)" stroke="var(--diagram-border)" stroke-width="2" rx="6"/>
      <rect x="380" y="337" width="240" height="22" fill="var(--diagram-success)" fill-opacity="0.3" stroke="var(--diagram-border)" stroke-width="1" rx="3"/>
      <text x="390" y="352" font-size="9" fill="var(--diagram-text)">Claude: "í™•ì¸í–ˆìŠµë‹ˆë‹¤. ì·¨ì†Œ ì²˜ë¦¬ ì¤‘..."</text>

      <!-- ì»¨í…ìŠ¤íŠ¸ ì—…ë°ì´íŠ¸ -->
      <rect x="670" y="310" width="280" height="55" fill="var(--diagram-cache)" fill-opacity="0.3" stroke="var(--diagram-border)" stroke-width="1.5" rx="6"/>
      <text x="810" y="330" text-anchor="middle" font-size="10" font-weight="bold" fill="var(--diagram-text)">ğŸ’­ ì»¨í…ìŠ¤íŠ¸ ëˆ„ì </text>
      <text x="810" y="345" text-anchor="middle" font-size="8" fill="var(--diagram-secondary)">+ ì£¼ë¬¸ë²ˆí˜¸: 12345</text>
      <text x="810" y="357" text-anchor="middle" font-size="8" fill="var(--diagram-secondary)">â†’ ì·¨ì†Œ ì²˜ë¦¬ ì§„í–‰</text>

      <!-- í•˜ë‹¨ í•µì‹¬ ìš”ì†Œ -->
      <rect x="50" y="385" width="280" height="30" fill="var(--diagram-bg-tertiary)" stroke="var(--diagram-border)" stroke-width="1.5" rx="4"/>
      <text x="190" y="405" text-anchor="middle" font-size="10" font-weight="bold" fill="var(--diagram-text)">âœ… ëŒ€í™” íˆìŠ¤í† ë¦¬ ìœ ì§€ = ì»¨í…ìŠ¤íŠ¸ ì´í•´</text>

      <rect x="360" y="385" width="280" height="30" fill="var(--diagram-bg-tertiary)" stroke="var(--diagram-border)" stroke-width="1.5" rx="4"/>
      <text x="500" y="405" text-anchor="middle" font-size="10" font-weight="bold" fill="var(--diagram-text)">âœ… System í”„ë¡¬í”„íŠ¸ = ì—ì´ì „íŠ¸ ì—­í•  ì •ì˜</text>

      <rect x="670" y="385" width="280" height="30" fill="var(--diagram-bg-tertiary)" stroke="var(--diagram-border)" stroke-width="1.5" rx="4"/>
      <text x="810" y="405" text-anchor="middle" font-size="10" font-weight="bold" fill="var(--diagram-text)">âœ… ì„¸ì…˜ ê´€ë¦¬ = ì‚¬ìš©ìë³„ ê²©ë¦¬</text>
    </svg>
    <figcaption style="text-align: center; margin-top: 0.8rem; font-size: 0.95rem; color: var(--text-tertiary);">
      ê·¸ë¦¼ 1: ëŒ€í™”í˜• ì—ì´ì „íŠ¸ ì•„í‚¤í…ì²˜ - ì„¸ì…˜ ê¸°ë°˜ ëŒ€í™” íˆìŠ¤í† ë¦¬ ê´€ë¦¬ë¡œ ì»¨í…ìŠ¤íŠ¸ë¥¼ ìœ ì§€í•˜ëŠ” ë©€í‹°í„´ ëŒ€í™” êµ¬í˜„
    </figcaption>
  </figure>
</section>

<section class="content-section">
  <h2 id="basic-chatbot">ê¸°ë³¸ ì±—ë´‡</h2>

  <div class="code-block">
    <div class="code-header">
      <span class="code-lang">Python ê°„ë‹¨í•œ ì±—ë´‡</span>
      <button class="code-copy" aria-label="ì½”ë“œ ë³µì‚¬">Copy</button>
    </div>
    <pre><code><span class="kw">from</span> anthropic <span class="kw">import</span> Anthropic

<span class="kw">class</span> <span class="type">Chatbot</span>:
    <span class="kw">def</span> <span class="fn">__init__</span>(<span class="fn">self</span>, system_prompt: <span class="type">str</span>):
        <span class="fn">self</span>.client <span class="kw">=</span> <span class="fn">Anthropic</span>()
        <span class="fn">self</span>.system_prompt <span class="kw">=</span> system_prompt
        <span class="fn">self</span>.conversation_history <span class="kw">=</span> []

    <span class="kw">def</span> <span class="fn">chat</span>(<span class="fn">self</span>, user_message: <span class="type">str</span>) <span class="kw">-></span> <span class="type">str</span>:
        <span class="cmt"># ì‚¬ìš©ì ë©”ì‹œì§€ ì¶”ê°€</span>
        <span class="fn">self</span>.conversation_history.<span class="fn">append</span>({
            <span class="str">"role"</span>: <span class="str">"user"</span>,
            <span class="str">"content"</span>: user_message
        })

        <span class="cmt"># API í˜¸ì¶œ</span>
        message <span class="kw">=</span> <span class="fn">self</span>.client.messages.<span class="fn">create</span>(
            model<span class="kw">=</span><span class="str">"claude-sonnet-4-5-20250929"</span>,
            max_tokens<span class="kw">=</span><span class="num">1024</span>,
            system<span class="kw">=</span><span class="fn">self</span>.system_prompt,
            messages<span class="kw">=</span><span class="fn">self</span>.conversation_history
        )

        assistant_message <span class="kw">=</span> message.content[<span class="num">0</span>].text

        <span class="cmt"># ì–´ì‹œìŠ¤í„´íŠ¸ ì‘ë‹µ ì €ì¥</span>
        <span class="fn">self</span>.conversation_history.<span class="fn">append</span>({
            <span class="str">"role"</span>: <span class="str">"assistant"</span>,
            <span class="str">"content"</span>: assistant_message
        })

        <span class="kw">return</span> assistant_message

    <span class="kw">def</span> <span class="fn">reset</span>(<span class="fn">self</span>):
        <span class="fn">self</span>.conversation_history <span class="kw">=</span> []

<span class="cmt"># ì‚¬ìš©</span>
bot <span class="kw">=</span> <span class="fn">Chatbot</span>(system_prompt<span class="kw">=</span><span class="str">"ë‹¹ì‹ ì€ ì¹œì ˆí•œ ê³ ê° ì§€ì› AIì…ë‹ˆë‹¤."</span>)

<span class="fn">print</span>(bot.<span class="fn">chat</span>(<span class="str">"ì•ˆë…•í•˜ì„¸ìš”"</span>))
<span class="fn">print</span>(bot.<span class="fn">chat</span>(<span class="str">"ì£¼ë¬¸ ì·¨ì†Œí•˜ê³  ì‹¶ì–´ìš”"</span>))
<span class="fn">print</span>(bot.<span class="fn">chat</span>(<span class="str">"ì£¼ë¬¸ë²ˆí˜¸ëŠ” 12345ì˜ˆìš”"</span>))</code></pre>
  </div>
</section>

<section class="content-section">
  <h2 id="web-chatbot">ì›¹ ì±—ë´‡ (Flask)</h2>

  <div class="code-block">
    <div class="code-header">
      <span class="code-lang">Python Flask ì±—ë´‡ API</span>
      <button class="code-copy" aria-label="ì½”ë“œ ë³µì‚¬">Copy</button>
    </div>
    <pre><code><span class="kw">from</span> flask <span class="kw">import</span> Flask, request, jsonify, session
<span class="kw">from</span> anthropic <span class="kw">import</span> Anthropic
<span class="kw">import</span> uuid

app <span class="kw">=</span> <span class="fn">Flask</span>(__name__)
app.secret_key <span class="kw">=</span> <span class="str">'your-secret-key'</span>

client <span class="kw">=</span> <span class="fn">Anthropic</span>()
conversations <span class="kw">=</span> {}  <span class="cmt"># ì„¸ì…˜ë³„ ëŒ€í™” ì €ì¥</span>

SYSTEM_PROMPT <span class="kw">=</span> <span class="str">"""ë‹¹ì‹ ì€ ì „ììƒê±°ë˜ ì‚¬ì´íŠ¸ì˜ ê³ ê° ì§€ì› AIì…ë‹ˆë‹¤.

ê·œì¹™:
- í•­ìƒ ì¡´ëŒ“ë§ ì‚¬ìš©
- ì£¼ë¬¸ ë²ˆí˜¸ê°€ í•„ìš”í•˜ë©´ ìš”ì²­
- í•´ê²°í•  ìˆ˜ ì—†ìœ¼ë©´ ì¸ê°„ ìƒë‹´ì‚¬ì—ê²Œ ì—°ê²°

ê°€ëŠ¥í•œ ì‘ì—…:
- ì£¼ë¬¸ ì¡°íšŒ
- ë°°ì†¡ ì¶”ì 
- í™˜ë¶ˆ/êµí™˜ ì•ˆë‚´
- ì œí’ˆ ë¬¸ì˜"""</span>

<span class="kw">@app.route</span>(<span class="str">'/api/chat'</span>, methods<span class="kw">=</span>[<span class="str">'POST'</span>])
<span class="kw">def</span> <span class="fn">chat</span>():
    data <span class="kw">=</span> request.<span class="fn">get_json</span>()
    user_message <span class="kw">=</span> data.<span class="fn">get</span>(<span class="str">'message'</span>)
    session_id <span class="kw">=</span> data.<span class="fn">get</span>(<span class="str">'session_id'</span>) <span class="kw">or</span> <span class="fn">str</span>(uuid.<span class="fn">uuid4</span>())

    <span class="cmt"># ì„¸ì…˜ë³„ ëŒ€í™” íˆìŠ¤í† ë¦¬</span>
    <span class="kw">if</span> session_id <span class="kw">not</span> <span class="kw">in</span> conversations:
        conversations[session_id] <span class="kw">=</span> []

    conversations[session_id].<span class="fn">append</span>({
        <span class="str">"role"</span>: <span class="str">"user"</span>,
        <span class="str">"content"</span>: user_message
    })

    message <span class="kw">=</span> client.messages.<span class="fn">create</span>(
        model<span class="kw">=</span><span class="str">"claude-sonnet-4-5-20250929"</span>,
        max_tokens<span class="kw">=</span><span class="num">1024</span>,
        system<span class="kw">=</span>SYSTEM_PROMPT,
        messages<span class="kw">=</span>conversations[session_id]
    )

    assistant_message <span class="kw">=</span> message.content[<span class="num">0</span>].text
    conversations[session_id].<span class="fn">append</span>({
        <span class="str">"role"</span>: <span class="str">"assistant"</span>,
        <span class="str">"content"</span>: assistant_message
    })

    <span class="kw">return</span> <span class="fn">jsonify</span>({
        <span class="str">'response'</span>: assistant_message,
        <span class="str">'session_id'</span>: session_id
    })

<span class="kw">@app.route</span>(<span class="str">'/api/reset'</span>, methods<span class="kw">=</span>[<span class="str">'POST'</span>])
<span class="kw">def</span> <span class="fn">reset</span>():
    session_id <span class="kw">=</span> request.<span class="fn">get_json</span>().<span class="fn">get</span>(<span class="str">'session_id'</span>)
    <span class="kw">if</span> session_id <span class="kw">in</span> conversations:
        <span class="kw">del</span> conversations[session_id]
    <span class="kw">return</span> <span class="fn">jsonify</span>({<span class="str">'status'</span>: <span class="str">'reset'</span>})

<span class="kw">if</span> __name__ <span class="kw">==</span> <span class="str">'__main__'</span>:
    app.<span class="fn">run</span>(debug<span class="kw">=</span><span class="kw">True</span>)</code></pre>
  </div>
</section>

<section class="content-section">
  <h2 id="tool-integration">ë„êµ¬ í†µí•© ì±—ë´‡</h2>
  <p>
    Tool Useë¥¼ í™œìš©í•˜ë©´ ì±—ë´‡ì´ ì‹¤ì œ ì‘ì—…ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
  </p>

  <div class="code-block">
    <div class="code-header">
      <span class="code-lang">Python Tool Use ì±—ë´‡</span>
      <button class="code-copy" aria-label="ì½”ë“œ ë³µì‚¬">Copy</button>
    </div>
    <pre><code><span class="kw">import</span> json

<span class="kw">class</span> <span class="type">ToolChatbot</span>:
    <span class="kw">def</span> <span class="fn">__init__</span>(<span class="fn">self</span>):
        <span class="fn">self</span>.client <span class="kw">=</span> <span class="fn">Anthropic</span>()
        <span class="fn">self</span>.conversation_history <span class="kw">=</span> []
        <span class="fn">self</span>.tools <span class="kw">=</span> [
            {
                <span class="str">"name"</span>: <span class="str">"check_order_status"</span>,
                <span class="str">"description"</span>: <span class="str">"ì£¼ë¬¸ ìƒíƒœë¥¼ ì¡°íšŒí•©ë‹ˆë‹¤"</span>,
                <span class="str">"input_schema"</span>: {
                    <span class="str">"type"</span>: <span class="str">"object"</span>,
                    <span class="str">"properties"</span>: {
                        <span class="str">"order_id"</span>: {<span class="str">"type"</span>: <span class="str">"string"</span>, <span class="str">"description"</span>: <span class="str">"ì£¼ë¬¸ ë²ˆí˜¸"</span>}
                    },
                    <span class="str">"required"</span>: [<span class="str">"order_id"</span>]
                }
            },
            {
                <span class="str">"name"</span>: <span class="str">"cancel_order"</span>,
                <span class="str">"description"</span>: <span class="str">"ì£¼ë¬¸ì„ ì·¨ì†Œí•©ë‹ˆë‹¤"</span>,
                <span class="str">"input_schema"</span>: {
                    <span class="str">"type"</span>: <span class="str">"object"</span>,
                    <span class="str">"properties"</span>: {
                        <span class="str">"order_id"</span>: {<span class="str">"type"</span>: <span class="str">"string"</span>}
                    },
                    <span class="str">"required"</span>: [<span class="str">"order_id"</span>]
                }
            }
        ]

    <span class="kw">def</span> <span class="fn">check_order_status</span>(<span class="fn">self</span>, order_id: <span class="type">str</span>) <span class="kw">-></span> <span class="type">dict</span>:
        <span class="cmt"># ì‹¤ì œë¡œëŠ” DB ì¡°íšŒ</span>
        <span class="kw">return</span> {
            <span class="str">"order_id"</span>: order_id,
            <span class="str">"status"</span>: <span class="str">"ë°°ì†¡ ì¤‘"</span>,
            <span class="str">"tracking_number"</span>: <span class="str">"1234567890"</span>
        }

    <span class="kw">def</span> <span class="fn">cancel_order</span>(<span class="fn">self</span>, order_id: <span class="type">str</span>) <span class="kw">-></span> <span class="type">dict</span>:
        <span class="cmt"># ì‹¤ì œë¡œëŠ” ì£¼ë¬¸ ì·¨ì†Œ ì²˜ë¦¬</span>
        <span class="kw">return</span> {<span class="str">"success"</span>: <span class="kw">True</span>, <span class="str">"message"</span>: <span class="str">"ì£¼ë¬¸ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤"</span>}

    <span class="kw">def</span> <span class="fn">execute_tool</span>(<span class="fn">self</span>, tool_name: <span class="type">str</span>, tool_input: <span class="type">dict</span>) <span class="kw">-></span> <span class="type">dict</span>:
        <span class="kw">if</span> tool_name <span class="kw">==</span> <span class="str">"check_order_status"</span>:
            <span class="kw">return</span> <span class="fn">self</span>.<span class="fn">check_order_status</span>(<span class="kw">**</span>tool_input)
        <span class="kw">elif</span> tool_name <span class="kw">==</span> <span class="str">"cancel_order"</span>:
            <span class="kw">return</span> <span class="fn">self</span>.<span class="fn">cancel_order</span>(<span class="kw">**</span>tool_input)

    <span class="kw">def</span> <span class="fn">chat</span>(<span class="fn">self</span>, user_message: <span class="type">str</span>) <span class="kw">-></span> <span class="type">str</span>:
        <span class="fn">self</span>.conversation_history.<span class="fn">append</span>({
            <span class="str">"role"</span>: <span class="str">"user"</span>,
            <span class="str">"content"</span>: user_message
        })

        <span class="kw">while</span> <span class="kw">True</span>:
            message <span class="kw">=</span> <span class="fn">self</span>.client.messages.<span class="fn">create</span>(
                model<span class="kw">=</span><span class="str">"claude-sonnet-4-5-20250929"</span>,
                max_tokens<span class="kw">=</span><span class="num">1024</span>,
                tools<span class="kw">=</span><span class="fn">self</span>.tools,
                messages<span class="kw">=</span><span class="fn">self</span>.conversation_history
            )

            <span class="kw">if</span> message.stop_reason <span class="kw">==</span> <span class="str">"tool_use"</span>:
                <span class="cmt"># ë„êµ¬ ì‚¬ìš©</span>
                <span class="fn">self</span>.conversation_history.<span class="fn">append</span>({
                    <span class="str">"role"</span>: <span class="str">"assistant"</span>,
                    <span class="str">"content"</span>: message.content
                })

                tool_use <span class="kw">=</span> <span class="fn">next</span>(
                    block <span class="kw">for</span> block <span class="kw">in</span> message.content
                    <span class="kw">if</span> block.<span class="fn">type</span> <span class="kw">==</span> <span class="str">"tool_use"</span>
                )

                tool_result <span class="kw">=</span> <span class="fn">self</span>.<span class="fn">execute_tool</span>(
                    tool_use.<span class="fn">name</span>,
                    tool_use.<span class="fn">input</span>
                )

                <span class="fn">self</span>.conversation_history.<span class="fn">append</span>({
                    <span class="str">"role"</span>: <span class="str">"user"</span>,
                    <span class="str">"content"</span>: [{
                        <span class="str">"type"</span>: <span class="str">"tool_result"</span>,
                        <span class="str">"tool_use_id"</span>: tool_use.<span class="fn">id</span>,
                        <span class="str">"content"</span>: json.<span class="fn">dumps</span>(tool_result)
                    }]
                })
            <span class="kw">else</span>:
                <span class="cmt"># ìµœì¢… ì‘ë‹µ</span>
                assistant_message <span class="kw">=</span> message.content[<span class="num">0</span>].text
                <span class="fn">self</span>.conversation_history.<span class="fn">append</span>({
                    <span class="str">"role"</span>: <span class="str">"assistant"</span>,
                    <span class="str">"content"</span>: assistant_message
                })
                <span class="kw">return</span> assistant_message

<span class="cmt"># ì‚¬ìš©</span>
bot <span class="kw">=</span> <span class="fn">ToolChatbot</span>()
<span class="fn">print</span>(bot.<span class="fn">chat</span>(<span class="str">"ì£¼ë¬¸ 12345 ìƒíƒœ í™•ì¸í•´ì¤˜"</span>))
<span class="fn">print</span>(bot.<span class="fn">chat</span>(<span class="str">"ì´ ì£¼ë¬¸ ì·¨ì†Œí• ê²Œ"</span>))</code></pre>
  </div>
</section>

<section class="content-section">
  <h2 id="context-management">ì»¨í…ìŠ¤íŠ¸ ê´€ë¦¬</h2>

  <h3 id="summarization">ëŒ€í™” ìš”ì•½</h3>
  <div class="code-block">
    <div class="code-header">
      <span class="code-lang">Python ëŒ€í™” ìš”ì•½</span>
    </div>
    <pre><code><span class="kw">class</span> <span class="type">SmartChatbot</span>(Chatbot):
    <span class="kw">def</span> <span class="fn">chat</span>(<span class="fn">self</span>, user_message: <span class="type">str</span>) <span class="kw">-></span> <span class="type">str</span>:
        <span class="cmt"># ëŒ€í™”ê°€ ë„ˆë¬´ ê¸¸ë©´ ìš”ì•½</span>
        <span class="kw">if</span> <span class="fn">len</span>(<span class="fn">self</span>.conversation_history) <span class="kw">></span> <span class="num">20</span>:
            <span class="fn">self</span>.<span class="fn">_summarize_conversation</span>()

        <span class="kw">return</span> <span class="fn">super</span>().<span class="fn">chat</span>(user_message)

    <span class="kw">def</span> <span class="fn">_summarize_conversation</span>(<span class="fn">self</span>):
        summary_msg <span class="kw">=</span> <span class="fn">self</span>.client.messages.<span class="fn">create</span>(
            model<span class="kw">=</span><span class="str">"claude-haiku-4-5-20251001"</span>,  <span class="cmt"># ë¹ ë¥´ê³  ì €ë ´</span>
            max_tokens<span class="kw">=</span><span class="num">500</span>,
            messages<span class="kw">=</span><span class="fn">self</span>.conversation_history <span class="kw">+</span> [{
                <span class="str">"role"</span>: <span class="str">"user"</span>,
                <span class="str">"content"</span>: <span class="str">"ì§€ê¸ˆê¹Œì§€ ëŒ€í™”ë¥¼ 3ë¬¸ì¥ìœ¼ë¡œ ìš”ì•½í•´ì£¼ì„¸ìš”."</span>
            }]
        )

        summary <span class="kw">=</span> summary_msg.content[<span class="num">0</span>].text

        <span class="cmt"># íˆìŠ¤í† ë¦¬ë¥¼ ìš”ì•½ë³¸ìœ¼ë¡œ êµì²´</span>
        <span class="fn">self</span>.conversation_history <span class="kw">=</span> [{
            <span class="str">"role"</span>: <span class="str">"user"</span>,
            <span class="str">"content"</span>: <span class="fn">f</span><span class="str">"ì´ì „ ëŒ€í™” ìš”ì•½: {summary}"</span>
        }]</code></pre>
  </div>
</section>

<section class="content-section">
  <h2 id="personalization">ê°œì¸í™”</h2>

  <div class="code-block">
    <div class="code-header">
      <span class="code-lang">Python ì‚¬ìš©ì í”„ë¡œí•„ ê¸°ë°˜ ì±—ë´‡</span>
    </div>
    <pre><code><span class="kw">class</span> <span class="type">PersonalizedChatbot</span>:
    <span class="kw">def</span> <span class="fn">__init__</span>(<span class="fn">self</span>, user_profile: <span class="type">dict</span>):
        <span class="fn">self</span>.client <span class="kw">=</span> <span class="fn">Anthropic</span>()
        <span class="fn">self</span>.user_profile <span class="kw">=</span> user_profile
        <span class="fn">self</span>.conversation_history <span class="kw">=</span> []

        <span class="cmt"># í”„ë¡œí•„ ê¸°ë°˜ ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸</span>
        <span class="fn">self</span>.system_prompt <span class="kw">=</span> <span class="fn">f</span><span class="str">"""ë‹¹ì‹ ì€ {user_profile['name']}ë‹˜ì˜ ê°œì¸ ì–´ì‹œìŠ¤í„´íŠ¸ì…ë‹ˆë‹¤.

ì‚¬ìš©ì ì •ë³´:
- ì´ë¦„: {user_profile['name']}
- ì„ í˜¸ ì–¸ì–´: {user_profile.get('language', 'í•œêµ­ì–´')}
- ê´€ì‹¬ì‚¬: {', '.join(user_profile.get('interests', []))}
- VIP ë“±ê¸‰: {user_profile.get('tier', 'Standard')}

ì´ ì •ë³´ë¥¼ ë°”íƒ•ìœ¼ë¡œ ë§ì¶¤í˜• ì‘ë‹µì„ ì œê³µí•˜ì„¸ìš”."""</span>

    <span class="kw">def</span> <span class="fn">chat</span>(<span class="fn">self</span>, user_message: <span class="type">str</span>) <span class="kw">-></span> <span class="type">str</span>:
        <span class="fn">self</span>.conversation_history.<span class="fn">append</span>({
            <span class="str">"role"</span>: <span class="str">"user"</span>,
            <span class="str">"content"</span>: user_message
        })

        message <span class="kw">=</span> <span class="fn">self</span>.client.messages.<span class="fn">create</span>(
            model<span class="kw">=</span><span class="str">"claude-sonnet-4-5-20250929"</span>,
            max_tokens<span class="kw">=</span><span class="num">1024</span>,
            system<span class="kw">=</span><span class="fn">self</span>.system_prompt,
            messages<span class="kw">=</span><span class="fn">self</span>.conversation_history
        )

        response <span class="kw">=</span> message.content[<span class="num">0</span>].text
        <span class="fn">self</span>.conversation_history.<span class="fn">append</span>({
            <span class="str">"role"</span>: <span class="str">"assistant"</span>,
            <span class="str">"content"</span>: response
        })

        <span class="kw">return</span> response

<span class="cmt"># ì‚¬ìš©</span>
profile <span class="kw">=</span> {
    <span class="str">"name"</span>: <span class="str">"ê¹€ì² ìˆ˜"</span>,
    <span class="str">"language"</span>: <span class="str">"í•œêµ­ì–´"</span>,
    <span class="str">"interests"</span>: [<span class="str">"ê¸°ìˆ "</span>, <span class="str">"ì—¬í–‰"</span>],
    <span class="str">"tier"</span>: <span class="str">"Gold"</span>
}

bot <span class="kw">=</span> <span class="fn">PersonalizedChatbot</span>(profile)
<span class="fn">print</span>(bot.<span class="fn">chat</span>(<span class="str">"ì¶”ì²œ ì œí’ˆ ì•Œë ¤ì¤˜"</span>))</code></pre>
  </div>
</section>

<section class="content-section">
  <h2 id="best-practices">ë² ìŠ¤íŠ¸ í”„ë™í‹°ìŠ¤</h2>

  <h3 id="bp-1">1. ëª…í™•í•œ ì—­í•  ì •ì˜</h3>
  <p>
    ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ì— ì±—ë´‡ì˜ ì—­í• , ê·œì¹™, í•œê³„ë¥¼ ëª…í™•íˆ ì •ì˜í•˜ì„¸ìš”.
  </p>

  <h3 id="bp-2">2. ì‚¬ìš©ì ì…ë ¥ ê²€ì¦</h3>
  <div class="code-block">
    <div class="code-header">
      <span class="code-lang">Python ì…ë ¥ ê²€ì¦</span>
    </div>
    <pre><code><span class="kw">def</span> <span class="fn">chat</span>(<span class="fn">self</span>, user_message: <span class="type">str</span>) <span class="kw">-></span> <span class="type">str</span>:
    <span class="cmt"># ì…ë ¥ ê²€ì¦</span>
    <span class="kw">if</span> <span class="kw">not</span> user_message <span class="kw">or</span> <span class="fn">len</span>(user_message) <span class="kw">></span> <span class="num">5000</span>:
        <span class="kw">return</span> <span class="str">"ìœ íš¨í•˜ì§€ ì•Šì€ ì…ë ¥ì…ë‹ˆë‹¤."</span>

    <span class="cmt"># ë¶€ì ì ˆí•œ ë‚´ìš© í•„í„°ë§</span>
    <span class="kw">if</span> <span class="fn">contains_inappropriate_content</span>(user_message):
        <span class="kw">return</span> <span class="str">"ì ì ˆí•˜ì§€ ì•Šì€ ë‚´ìš©ì´ í¬í•¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤."</span>

    <span class="cmt"># ì •ìƒ ì²˜ë¦¬</span>
    <span class="kw">return</span> <span class="fn">self</span>.<span class="fn">_process_message</span>(user_message)</code></pre>
  </div>

  <h3 id="bp-3">3. ì„¸ì…˜ íƒ€ì„ì•„ì›ƒ</h3>
  <p>
    ì˜¤ë˜ëœ ì„¸ì…˜ì€ ìë™ìœ¼ë¡œ ì‚­ì œí•˜ì—¬ ë©”ëª¨ë¦¬ ê´€ë¦¬:
  </p>

  <div class="code-block">
    <div class="code-header">
      <span class="code-lang">Python ì„¸ì…˜ íƒ€ì„ì•„ì›ƒ</span>
    </div>
    <pre><code><span class="kw">import</span> time

conversations <span class="kw">=</span> {}
session_timestamps <span class="kw">=</span> {}
TIMEOUT <span class="kw">=</span> <span class="num">1800</span>  <span class="cmt"># 30ë¶„</span>

<span class="kw">def</span> <span class="fn">cleanup_old_sessions</span>():
    current_time <span class="kw">=</span> time.<span class="fn">time</span>()
    <span class="kw">for</span> session_id <span class="kw">in</span> <span class="fn">list</span>(session_timestamps.<span class="fn">keys</span>()):
        <span class="kw">if</span> current_time <span class="kw">-</span> session_timestamps[session_id] <span class="kw">></span> TIMEOUT:
            <span class="kw">del</span> conversations[session_id]
            <span class="kw">del</span> session_timestamps[session_id]</code></pre>
  </div>

  <h3 id="bp-4">4. ë¡œê¹… ë° ë¶„ì„</h3>
  <p>
    ëŒ€í™” ë¡œê·¸ë¥¼ ì €ì¥í•˜ì—¬ ê°œì„ ì  íŒŒì•…:
  </p>

  <div class="code-block">
    <div class="code-header">
      <span class="code-lang">Python ë¡œê¹…</span>
    </div>
    <pre><code><span class="kw">import</span> logging
<span class="kw">import</span> json

logging.<span class="fn">basicConfig</span>(filename<span class="kw">=</span><span class="str">'chatbot.log'</span>, level<span class="kw">=</span>logging.INFO)

<span class="kw">def</span> <span class="fn">chat</span>(<span class="fn">self</span>, user_message: <span class="type">str</span>) <span class="kw">-></span> <span class="type">str</span>:
    response <span class="kw">=</span> <span class="fn">self</span>.<span class="fn">_process_message</span>(user_message)

    <span class="cmt"># ë¡œê·¸ ì €ì¥</span>
    logging.<span class="fn">info</span>(json.<span class="fn">dumps</span>({
        <span class="str">'timestamp'</span>: time.<span class="fn">time</span>(),
        <span class="str">'user_message'</span>: user_message,
        <span class="str">'bot_response'</span>: response,
        <span class="str">'session_id'</span>: <span class="fn">self</span>.session_id
    }))

    <span class="kw">return</span> response</code></pre>
  </div>
</section>

<section class="content-section">
  <h2 id="next-steps">ë‹¤ìŒ ë‹¨ê³„</h2>
  <p>ëŒ€í™”í˜• ì—ì´ì „íŠ¸ êµ¬ì¶•ì„ ìµí˜”ë‹¤ë©´:</p>

  <ul>
    <li><a href="tool-use.html">Tool Use</a> - ì‹¤ì œ ì‘ì—… ìˆ˜í–‰ í†µí•©</li>
    <li><a href="streaming.html">ìŠ¤íŠ¸ë¦¬ë°</a> - ì‹¤ì‹œê°„ ì‘ë‹µ</li>
    <li><a href="typescript-sdk.html">TypeScript SDK</a> - ì›¹ ì±—ë´‡ êµ¬ì¶•</li>
  </ul>
</section>

<nav class="page-nav"></nav>

</main>

<aside class="inline-toc"></aside>
<footer class="site-footer"></footer>

</div>
<script src="../js/main.js"></script>
</body>
</html>
