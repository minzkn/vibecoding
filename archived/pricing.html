<!DOCTYPE html>
<html lang="ko" data-theme="dark-kernel">
<head>
<script>
(function(){var m=document.cookie.match(/claude_theme=([^;]+)/);if(m)document.documentElement.setAttribute('data-theme',m[1]);})();
</script>
<meta charset="UTF-8">
<meta property="og:type" content="article">
<meta property="og:site_name" content="Claude ë¬¸ì„œ /with MINZKN">
<meta property="og:title" content="ë¹„ìš© ìµœì í™” - Claude ë¬¸ì„œ">
<meta property="og:description" content="Claude API ë¹„ìš© ì ˆê° ì „ëµ, íš¨ìœ¨ì ì¸ í† í° ê´€ë¦¬, í”„ë¡¬í”„íŠ¸ ìºì‹± í™œìš©ë²•">
<meta property="og:url" content="https://minzkn.com/claude/pages/pricing.html">
<meta property="og:image" content="https://minzkn.com/claude/images/og-image.png">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="Claude API ë¹„ìš© ì ˆê° ì „ëµ, íš¨ìœ¨ì ì¸ í† í° ê´€ë¦¬, í”„ë¡¬í”„íŠ¸ ìºì‹± í™œìš©ë²•">
<meta name="keywords" content="Claude, ë¹„ìš© ìµœì í™”, cost optimization, í† í° ê´€ë¦¬, caching, ì ˆê°">
<meta name="author" content="MINZKN">
<title>ë¹„ìš© ìµœì í™” - Claude ë¬¸ì„œ /with MINZKN</title>
<link rel="icon" type="image/svg+xml" href="../images/favicon.svg">
<link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/joungkyun/font-d2coding/d2coding.css">
<link rel="stylesheet" href="../css/themes.css">
<link rel="stylesheet" href="../css/style.css">
<link rel="stylesheet" href="../css/responsive.css">
</head>
<body>
<div class="page-wrapper">

<header class="site-header"></header>
<nav class="side-nav" aria-label="ì‚¬ì´íŠ¸ ë‚´ë¹„ê²Œì´ì…˜"></nav>

<main class="main-content">

<nav class="breadcrumb"></nav>

<section class="content-section">
  <h1 id="top">ë¹„ìš© ìµœì í™”</h1>
  <p class="lead">
    Claude APIë¥¼ íš¨ìœ¨ì ìœ¼ë¡œ ì‚¬ìš©í•˜ì—¬ ë¹„ìš©ì„ ì ˆê°í•˜ëŠ” ì „ëµê³¼ ê¸°ë²•ì„ ì†Œê°œí•©ë‹ˆë‹¤.
    í† í° ê´€ë¦¬, í”„ë¡¬í”„íŠ¸ ìºì‹±, ëª¨ë¸ ì„ íƒ ìµœì í™”ë¥¼ í†µí•´ ë¹„ìš© ëŒ€ë¹„ ì„±ëŠ¥ì„ ê·¹ëŒ€í™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
  </p>
</section>

<section class="content-section">
  <h2 id="pricing-overview">ìš”ê¸ˆ êµ¬ì¡° ê°œìš”</h2>

  <p>
    Claude APIëŠ” í† í° ê¸°ë°˜ ê³¼ê¸ˆ ë°©ì‹ì„ ì‚¬ìš©í•˜ë©°, ëª¨ë¸ë³„ë¡œ ì…ë ¥ ë° ì¶œë ¥ í† í° ê°€ê²©ì´ ë‹¤ë¦…ë‹ˆë‹¤.
    ì´ í˜ì´ì§€ì—ì„œëŠ” ìš”ê¸ˆ êµ¬ì¡°ë¥¼ ê°„ëµíˆ ì†Œê°œí•˜ê³ , <strong>ë¹„ìš©ì„ ìµœì í™”í•˜ëŠ” ë°©ë²•</strong>ì— ì§‘ì¤‘í•©ë‹ˆë‹¤.
  </p>

  <table>
    <thead>
      <tr>
        <th>ëª¨ë¸</th>
        <th>ì…ë ¥ (MTok)</th>
        <th>ì¶œë ¥ (MTok)</th>
        <th>10K ì…ë ¥ + 1K ì¶œë ¥</th>
        <th>íŠ¹ì§•</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><strong>Opus 4.6</strong></td>
        <td>$15.00</td>
        <td>$75.00</td>
        <td>$0.225</td>
        <td>ìµœê³  ì„±ëŠ¥</td>
      </tr>
      <tr>
        <td><strong>Sonnet 4.5</strong></td>
        <td>$3.00</td>
        <td>$15.00</td>
        <td>$0.045</td>
        <td>ê· í˜• (ê¶Œì¥)</td>
      </tr>
      <tr>
        <td><strong>Haiku 4.5</strong></td>
        <td>$0.80</td>
        <td>$4.00</td>
        <td>$0.012</td>
        <td>ë¹ ë¥´ê³  ì €ë ´</td>
      </tr>
    </tbody>
  </table>

  <p style="margin-top: 1rem;"><em>MTok = Million Tokens (ë°±ë§Œ í† í°). ê°€ê²©ì€ 2025ë…„ 2ì›” ê¸°ì¤€ì´ë©° ë³€ê²½ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</em></p>

  <div class="info-box info">
    <div class="info-box-title">ğŸ“Œ ìµœì‹  ìš”ê¸ˆ ì •ë³´</div>
    <p>
      í•­ìƒ ìµœì‹  ìš”ê¸ˆì€ <a href="https://www.anthropic.com/pricing" target="_blank" rel="noopener">Anthropic ê³µì‹ ì‚¬ì´íŠ¸</a>ì—ì„œ í™•ì¸í•˜ì„¸ìš”.
      ì´ í˜ì´ì§€ëŠ” ë¹„ìš© ì ˆê° ì „ëµì— ì´ˆì ì„ ë§ì¶¥ë‹ˆë‹¤.
    </p>
  </div>
</section>

<section class="content-section">
  <h2 id="token-basics">í† í° ì´í•´í•˜ê¸°</h2>

  <h3 id="what-is-token">í† í°ì´ë€?</h3>
  <p>
    í† í°ì€ AIê°€ ì²˜ë¦¬í•˜ëŠ” í…ìŠ¤íŠ¸ì˜ ê¸°ë³¸ ë‹¨ìœ„ì…ë‹ˆë‹¤. ë‹¨ì–´ë³´ë‹¤ ì‘ì„ ìˆ˜ë„, í´ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.
  </p>

  <ul>
    <li><strong>ì˜ì–´:</strong> í‰ê·  1 í† í° â‰ˆ 0.75 ë‹¨ì–´ (ì•½ 4ê¸€ì)</li>
    <li><strong>í•œêµ­ì–´:</strong> í‰ê·  1 í† í° â‰ˆ 2~4ê¸€ì</li>
    <li><strong>ì½”ë“œ:</strong> í† í° ìˆ˜ê°€ ë” ë§ì„ ìˆ˜ ìˆìŒ (íŠ¹ìˆ˜ë¬¸ì, ë“¤ì—¬ì“°ê¸°)</li>
  </ul>

  <h3 id="estimate-tokens">í† í° ìˆ˜ ì¶”ì •</h3>
  <div class="code-block">
    <div class="code-header">
      <span class="code-lang">Python í† í° ì¹´ìš´íŒ…</span>
      <button class="code-copy" aria-label="ì½”ë“œ ë³µì‚¬">Copy</button>
    </div>
    <pre><code><span class="kw">from</span> anthropic <span class="kw">import</span> Anthropic

client <span class="kw">=</span> <span class="fn">Anthropic</span>()

text <span class="kw">=</span> <span class="str">"ClaudeëŠ” Anthropicì´ ê°œë°œí•œ AIì…ë‹ˆë‹¤."</span>

token_count <span class="kw">=</span> client.messages.<span class="fn">count_tokens</span>(
    model<span class="kw">=</span><span class="str">"claude-sonnet-4-5-20250929"</span>,
    messages<span class="kw">=</span>[{<span class="str">"role"</span>: <span class="str">"user"</span>, <span class="str">"content"</span>: text}]
)

<span class="fn">print</span>(<span class="fn">f</span><span class="str">"ì…ë ¥ í† í°: {token_count.input_tokens}"</span>)</code></pre>
  </div>

  <h3 id="cost-calculation">ë¹„ìš© ê³„ì‚° ì˜ˆì‹œ</h3>
  <div class="code-block">
    <div class="code-header">
      <span class="code-lang">Python ë¹„ìš© ê³„ì‚°</span>
      <button class="code-copy" aria-label="ì½”ë“œ ë³µì‚¬">Copy</button>
    </div>
    <pre><code><span class="kw">def</span> <span class="fn">calculate_cost</span>(input_tokens, output_tokens, model<span class="kw">=</span><span class="str">"sonnet"</span>):
    <span class="cmt"># ë°±ë§Œ í† í°ë‹¹ ê°€ê²© (USD)</span>
    prices <span class="kw">=</span> {
        <span class="str">"opus"</span>: {<span class="str">"input"</span>: <span class="num">15.00</span>, <span class="str">"output"</span>: <span class="num">75.00</span>},
        <span class="str">"sonnet"</span>: {<span class="str">"input"</span>: <span class="num">3.00</span>, <span class="str">"output"</span>: <span class="num">15.00</span>},
        <span class="str">"haiku"</span>: {<span class="str">"input"</span>: <span class="num">0.80</span>, <span class="str">"output"</span>: <span class="num">4.00</span>}
    }

    input_cost <span class="kw">=</span> (input_tokens <span class="kw">/</span> <span class="num">1_000_000</span>) <span class="kw">*</span> prices[model][<span class="str">"input"</span>]
    output_cost <span class="kw">=</span> (output_tokens <span class="kw">/</span> <span class="num">1_000_000</span>) <span class="kw">*</span> prices[model][<span class="str">"output"</span>]

    <span class="kw">return</span> input_cost <span class="kw">+</span> output_cost

<span class="cmt"># ì˜ˆì‹œ</span>
cost <span class="kw">=</span> <span class="fn">calculate_cost</span>(
    input_tokens<span class="kw">=</span><span class="num">10000</span>,
    output_tokens<span class="kw">=</span><span class="num">1000</span>,
    model<span class="kw">=</span><span class="str">"sonnet"</span>
)

<span class="fn">print</span>(<span class="fn">f</span><span class="str">"ì˜ˆìƒ ë¹„ìš©: ${cost:.4f}"</span>)  <span class="cmt"># $0.0450</span></code></pre>
  </div>
</section>

<section class="content-section">
  <h2 id="billing">ê³¼ê¸ˆ ë°©ì‹</h2>

  <h3 id="pay-as-you-go">ì‚¬ìš©ëŸ‰ ê¸°ë°˜ ê³¼ê¸ˆ</h3>
  <p>
    Claude APIëŠ” ì„ ë¶ˆ í¬ë ˆë”§ ë°©ì‹ì…ë‹ˆë‹¤:
  </p>

  <ol>
    <li><strong>í¬ë ˆë”§ ì¶©ì „:</strong> Consoleì—ì„œ ìµœì†Œ $5ë¶€í„° ì¶©ì „</li>
    <li><strong>API ì‚¬ìš©:</strong> ì‚¬ìš©í•œ í† í°ë§Œí¼ í¬ë ˆë”§ ì°¨ê°</li>
    <li><strong>ìë™ ì¶©ì „:</strong> ì”ì•¡ì´ ì„ê³„ê°’ ì´í•˜ë¡œ ë–¨ì–´ì§€ë©´ ìë™ ì¶©ì „ (ì„ íƒ)</li>
  </ol>

  <div class="info-box tip">
    <div class="info-box-title">ğŸ’¡ ì›”ê°„ í•œë„ ì„¤ì •</div>
    <p>
      Consoleì—ì„œ ì›” ì‚¬ìš©ëŸ‰ í•œë„ë¥¼ ì„¤ì •í•˜ë©´ ì˜ˆìƒì¹˜ ëª»í•œ ê³¼ê¸ˆì„ ë°©ì§€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
      ì˜ˆ: ì›” $100 í•œë„ ì„¤ì • â†’ ì´ˆê³¼ ì‹œ API í˜¸ì¶œ ì°¨ë‹¨
    </p>
  </div>
</section>

<section class="content-section">
  <h2 id="cost-reduction">ë¹„ìš© ì ˆê° ì „ëµ</h2>

  <h3 id="opt-1">1. ì ì ˆí•œ ëª¨ë¸ ì„ íƒ</h3>
  <p>
    ê°„ë‹¨í•œ ì‘ì—…ì€ Haiku, ë³µì¡í•œ ì‘ì—…ì€ Opus. ëŒ€ë¶€ë¶„ì€ Sonnetìœ¼ë¡œ ì¶©ë¶„í•©ë‹ˆë‹¤.
  </p>

  <h3 id="opt-2">2. max_tokens ìµœì í™”</h3>
  <div class="code-block">
    <div class="code-header">
      <span class="code-lang">Python max_tokens ì„¤ì •</span>
    </div>
    <pre><code><span class="cmt"># âŒ ë‚˜ìœ ì˜ˆ: ë¶ˆí•„ìš”í•˜ê²Œ í° ê°’</span>
max_tokens<span class="kw">=</span><span class="num">4096</span>  <span class="cmt"># ì§§ì€ ë‹µë³€ì—ë„ 4096 ì„¤ì •</span>

<span class="cmt"># âœ… ì¢‹ì€ ì˜ˆ: í•„ìš”í•œ ë§Œí¼ë§Œ</span>
max_tokens<span class="kw">=</span><span class="num">256</span>  <span class="cmt"># ê°„ë‹¨í•œ ë¶„ë¥˜</span>
max_tokens<span class="kw">=</span><span class="num">1024</span> <span class="cmt"># ì¼ë°˜ ëŒ€í™”</span>
max_tokens<span class="kw">=</span><span class="num">4096</span> <span class="cmt"># ê¸´ ë¬¸ì„œ ìƒì„±</span></code></pre>
  </div>

  <h3 id="opt-3">3. í”„ë¡¬í”„íŠ¸ ìºì‹± í™œìš©</h3>
  <p>
    ê°™ì€ ê¸´ ì»¨í…ìŠ¤íŠ¸ë¥¼ ë°˜ë³µ ì‚¬ìš©í•˜ëŠ” ê²½ìš° ìºì‹±ìœ¼ë¡œ 90% ì ˆê°:
  </p>

  <div class="code-block">
    <div class="code-header">
      <span class="code-lang">ìºì‹± ë¹„ìš© ë¹„êµ</span>
    </div>
    <pre><code><span class="cmt"># 100K í† í° ë¬¸ì„œë¥¼ 10íšŒ ì§ˆë¬¸í•˜ëŠ” ê²½ìš° (Sonnet)</span>

ìºì‹± ì—†ìŒ:
100,000 Ã— 10 / 1,000,000 Ã— $3 = $3.00

ìºì‹± ì‚¬ìš©:
1ì°¨: 100,000 / 1,000,000 Ã— $3.75 = $0.375 (ì“°ê¸°)
2~10ì°¨: 100,000 Ã— 9 / 1,000,000 Ã— $0.30 = $0.27 (ì½ê¸°)
ì´: $0.645

ì ˆê°ì•¡: $3.00 - $0.645 = $2.355 (78.5% ì ˆê°)</code></pre>
  </div>

  <h3 id="opt-4">4. ëŒ€í™” íˆìŠ¤í† ë¦¬ ì••ì¶•</h3>
  <div class="code-block">
    <div class="code-header">
      <span class="code-lang">Python ëŒ€í™” ìš”ì•½</span>
    </div>
    <pre><code><span class="cmt"># ê¸´ ëŒ€í™”ëŠ” ì£¼ê¸°ì ìœ¼ë¡œ ìš”ì•½</span>
<span class="kw">if</span> <span class="fn">len</span>(conversation_history) <span class="kw">></span> <span class="num">20</span>:
    <span class="cmt"># Haikuë¡œ ë¹ ë¥´ê³  ì €ë ´í•˜ê²Œ ìš”ì•½</span>
    summary <span class="kw">=</span> client.messages.<span class="fn">create</span>(
        model<span class="kw">=</span><span class="str">"claude-haiku-4-5-20251001"</span>,
        max_tokens<span class="kw">=</span><span class="num">500</span>,
        messages<span class="kw">=</span>conversation_history <span class="kw">+</span> [
            {<span class="str">"role"</span>: <span class="str">"user"</span>, <span class="str">"content"</span>: <span class="str">"ëŒ€í™” ìš”ì•½ (3ë¬¸ì¥)"</span>}
        ]
    )

    <span class="cmt"># íˆìŠ¤í† ë¦¬ë¥¼ ìš”ì•½ë³¸ìœ¼ë¡œ êµì²´</span>
    conversation_history <span class="kw">=</span> [
        {<span class="str">"role"</span>: <span class="str">"user"</span>, <span class="str">"content"</span>: summary.content[<span class="num">0</span>].text}
    ]</code></pre>
  </div>

  <h3 id="opt-5">5. ë°°ì¹˜ ì²˜ë¦¬</h3>
  <p>
    ê°€ëŠ¥í•˜ë©´ ì—¬ëŸ¬ í•­ëª©ì„ í•˜ë‚˜ì˜ ìš”ì²­ìœ¼ë¡œ ì²˜ë¦¬:
  </p>

  <div class="code-block">
    <div class="code-header">
      <span class="code-lang">ë°°ì¹˜ ì²˜ë¦¬ ì˜ˆì‹œ</span>
    </div>
    <pre><code><span class="cmt"># âŒ ë‚˜ìœ ì˜ˆ: 10ê°œ ìš”ì²­</span>
<span class="kw">for</span> email <span class="kw">in</span> emails:
    classify(email)  <span class="cmt"># API í˜¸ì¶œ 10íšŒ</span>

<span class="cmt"># âœ… ì¢‹ì€ ì˜ˆ: 1ê°œ ìš”ì²­</span>
bulk_text <span class="kw">=</span> <span class="str">"\n\n---\n\n"</span>.<span class="fn">join</span>(emails)
classify(bulk_text)  <span class="cmt"># API í˜¸ì¶œ 1íšŒ</span></code></pre>
  </div>

  <h3 id="opt-6">6. stop_sequences ì‚¬ìš©</h3>
  <div class="code-block">
    <div class="code-header">
      <span class="code-lang">Python stop_sequences</span>
    </div>
    <pre><code><span class="cmt"># íŠ¹ì • íŒ¨í„´ì—ì„œ ìƒì„± ì¤‘ë‹¨</span>
message <span class="kw">=</span> client.messages.<span class="fn">create</span>(
    model<span class="kw">=</span><span class="str">"claude-sonnet-4-5-20250929"</span>,
    max_tokens<span class="kw">=</span><span class="num">2048</span>,
    stop_sequences<span class="kw">=</span>[<span class="str">"\n\n---"</span>, <span class="str">"END"</span>],  <span class="cmt"># ë¶ˆí•„ìš”í•œ ìƒì„± ë°©ì§€</span>
    messages<span class="kw">=</span>[<span class="kw">...</span>]
)</code></pre>
  </div>

  <h3 id="opt-7">7. ë¡œì»¬ ìºì‹± êµ¬í˜„</h3>
  <p>
    API ì‘ë‹µì„ ë¡œì»¬ì— ìºì‹±í•˜ì—¬ ë™ì¼í•œ ìš”ì²­ì— ëŒ€í•œ ì¬í˜¸ì¶œì„ ë°©ì§€í•©ë‹ˆë‹¤.
    Redisë‚˜ Memcachedë¥¼ ì‚¬ìš©í•˜ë©´ ë¶„ì‚° í™˜ê²½ì—ì„œë„ ìºì‹œë¥¼ ê³µìœ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
  </p>

  <div class="code-block">
    <div class="code-header">
      <span class="code-lang">Python + Redis ìºì‹±</span>
      <button class="code-copy" aria-label="ì½”ë“œ ë³µì‚¬">ë³µì‚¬</button>
    </div>
    <pre><code><span class="kw">import</span> redis
<span class="kw">import</span> hashlib
<span class="kw">import</span> json

cache <span class="kw">=</span> redis.Redis(host<span class="kw">=</span><span class="str">'localhost'</span>, port<span class="kw">=</span><span class="num">6379</span>)

<span class="kw">def</span> <span class="fn">cached_claude_request</span>(prompt, model, max_tokens):
    <span class="cmt"># ìºì‹œ í‚¤ ìƒì„± (í”„ë¡¬í”„íŠ¸ í•´ì‹œ)</span>
    cache_key <span class="kw">=</span> hashlib.md5(
        <span class="str">f"</span>{model}<span class="str">:</span>{prompt}<span class="str">:</span>{max_tokens}<span class="str">"</span>.encode()
    ).hexdigest()

    <span class="cmt"># ìºì‹œ í™•ì¸</span>
    cached <span class="kw">=</span> cache.get(cache_key)
    <span class="kw">if</span> cached:
        <span class="kw">return</span> json.loads(cached)

    <span class="cmt"># ìºì‹œ ë¯¸ìŠ¤ - API í˜¸ì¶œ</span>
    response <span class="kw">=</span> client.messages.<span class="fn">create</span>(
        model<span class="kw">=</span>model,
        max_tokens<span class="kw">=</span>max_tokens,
        messages<span class="kw">=</span>[{<span class="str">"role"</span>: <span class="str">"user"</span>, <span class="str">"content"</span>: prompt}]
    )

    <span class="cmt"># ì‘ë‹µ ìºì‹± (24ì‹œê°„)</span>
    cache.setex(cache_key, <span class="num">86400</span>, json.dumps(response.content[<span class="num">0</span>].text))
    <span class="kw">return</span> response.content[<span class="num">0</span>].text

<span class="cmt"># ë¹„ìš© ì ˆê° íš¨ê³¼: ë™ì¼ ìš”ì²­ 2íšŒ ì´ìƒ ì‹œ 100% ì ˆê°</span></code></pre>
  </div>

  <h3 id="opt-8">8. ìŠ¤ë§ˆíŠ¸ ë¼ìš°íŒ… (ëª¨ë¸ ìë™ ì„ íƒ)</h3>
  <p>
    ì‘ì—… ë³µì¡ë„ë¥¼ ìë™ìœ¼ë¡œ íŒë‹¨í•˜ì—¬ Haiku â†’ Sonnet â†’ Opus ìˆœìœ¼ë¡œ ì—ìŠ¤ì»¬ë ˆì´ì…˜í•˜ëŠ” ì „ëµì…ë‹ˆë‹¤.
    ê°„ë‹¨í•œ ì‘ì—…ì€ ì €ë ´í•œ ëª¨ë¸ë¡œ ì²˜ë¦¬í•˜ê³ , ì‹¤íŒ¨ ì‹œì—ë§Œ ë” ê°•ë ¥í•œ ëª¨ë¸ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.
  </p>

  <div class="code-block">
    <div class="code-header">
      <span class="code-lang">Python ìŠ¤ë§ˆíŠ¸ ë¼ìš°íŒ…</span>
      <button class="code-copy" aria-label="ì½”ë“œ ë³µì‚¬">ë³µì‚¬</button>
    </div>
    <pre><code><span class="kw">def</span> <span class="fn">smart_request</span>(prompt, max_retries<span class="kw">=</span><span class="num">3</span>):
    models <span class="kw">=</span> [
        <span class="str">"claude-haiku-4-5-20251001"</span>,    <span class="cmt"># 1ë‹¨ê³„: ì €ë ´</span>
        <span class="str">"claude-sonnet-4-5-20250929"</span>,   <span class="cmt"># 2ë‹¨ê³„: ê· í˜•</span>
        <span class="str">"claude-opus-4-6"</span>               <span class="cmt"># 3ë‹¨ê³„: ê°•ë ¥</span>
    ]

    <span class="kw">for</span> i, model <span class="kw">in</span> <span class="fn">enumerate</span>(models):
        <span class="kw">try</span>:
            response <span class="kw">=</span> client.messages.<span class="fn">create</span>(
                model<span class="kw">=</span>model,
                max_tokens<span class="kw">=</span><span class="num">1024</span>,
                messages<span class="kw">=</span>[{<span class="str">"role"</span>: <span class="str">"user"</span>, <span class="str">"content"</span>: prompt}]
            )

            <span class="cmt"># í’ˆì§ˆ ê²€ì¦ (ì˜ˆ: ì‘ë‹µ ê¸¸ì´, íŠ¹ì • í‚¤ì›Œë“œ í¬í•¨ ì—¬ë¶€)</span>
            <span class="kw">if</span> is_valid_response(response):
                <span class="fn">print</span>(<span class="str">f"âœ“ {model} ì‚¬ìš© (ë‹¨ê³„ {i+1})"</span>)
                <span class="kw">return</span> response
            <span class="kw">else</span>:
                <span class="fn">print</span>(<span class="str">f"âœ— {model} í’ˆì§ˆ ë¯¸ë‹¬, ë‹¤ìŒ ëª¨ë¸ ì‹œë„"</span>)

        <span class="kw">except</span> <span class="type">Exception</span> <span class="kw">as</span> e:
            <span class="fn">print</span>(<span class="str">f"âœ— {model} ì—ëŸ¬: {e}"</span>)

    <span class="kw">raise</span> <span class="type">Exception</span>(<span class="str">"ëª¨ë“  ëª¨ë¸ ì‹œë„ ì‹¤íŒ¨"</span>)

<span class="kw">def</span> <span class="fn">is_valid_response</span>(response):
    <span class="cmt"># í’ˆì§ˆ ê²€ì¦ ë¡œì§ (ì˜ˆ: ìµœì†Œ ê¸¸ì´, í‚¤ì›Œë“œ í™•ì¸)</span>
    text <span class="kw">=</span> response.content[<span class="num">0</span>].text
    <span class="kw">return</span> <span class="fn">len</span>(text) <span class="kw">></span> <span class="num">50</span> <span class="kw">and</span> <span class="str">"ì˜¤ë¥˜"</span> <span class="kw">not in</span> text

<span class="cmt"># ë¹„ìš© ì ˆê° íš¨ê³¼: 80% ì‘ì—…ì´ Haikuë¡œ í•´ê²°ë˜ë©´ ì•½ 70% ë¹„ìš© ì ˆê°</span></code></pre>
  </div>

  <h3 id="opt-9">9. A/B í…ŒìŠ¤íŠ¸ë¡œ ìµœì  ëª¨ë¸ ì°¾ê¸°</h3>
  <p>
    ì‹¤ì œ ì‚¬ìš© íŒ¨í„´ì—ì„œ ì–´ë–¤ ëª¨ë¸ì´ ë¹„ìš© ëŒ€ë¹„ ì„±ëŠ¥ì´ ì¢‹ì€ì§€ ë°ì´í„° ê¸°ë°˜ìœ¼ë¡œ íŒë‹¨í•©ë‹ˆë‹¤.
  </p>

  <div class="code-block">
    <div class="code-header">
      <span class="code-lang">Python A/B í…ŒìŠ¤íŠ¸ í”„ë ˆì„ì›Œí¬</span>
      <button class="code-copy" aria-label="ì½”ë“œ ë³µì‚¬">ë³µì‚¬</button>
    </div>
    <pre><code><span class="kw">import</span> random
<span class="kw">import</span> time

<span class="kw">class</span> <span class="type">ModelABTest</span>:
    <span class="kw">def</span> <span class="fn">__init__</span>(<span class="kw">self</span>):
        <span class="kw">self</span>.stats <span class="kw">=</span> {
            <span class="str">"haiku"</span>: {<span class="str">"cost"</span>: <span class="num">0</span>, <span class="str">"success"</span>: <span class="num">0</span>, <span class="str">"total"</span>: <span class="num">0</span>},
            <span class="str">"sonnet"</span>: {<span class="str">"cost"</span>: <span class="num">0</span>, <span class="str">"success"</span>: <span class="num">0</span>, <span class="str">"total"</span>: <span class="num">0</span>}
        }

    <span class="kw">def</span> <span class="fn">request</span>(<span class="kw">self</span>, prompt):
        <span class="cmt"># 50/50 ë¶„í• </span>
        variant <span class="kw">=</span> random.choice([<span class="str">"haiku"</span>, <span class="str">"sonnet"</span>])
        model <span class="kw">=</span> <span class="str">"claude-haiku-4-5-20251001"</span> <span class="kw">if</span> variant <span class="kw">==</span> <span class="str">"haiku"</span> <span class="kw">else</span> <span class="str">"claude-sonnet-4-5-20250929"</span>

        start <span class="kw">=</span> time.time()
        response <span class="kw">=</span> client.messages.<span class="fn">create</span>(
            model<span class="kw">=</span>model,
            max_tokens<span class="kw">=</span><span class="num">1024</span>,
            messages<span class="kw">=</span>[{<span class="str">"role"</span>: <span class="str">"user"</span>, <span class="str">"content"</span>: prompt}]
        )
        latency <span class="kw">=</span> time.time() <span class="kw">-</span> start

        <span class="cmt"># í†µê³„ ìˆ˜ì§‘</span>
        cost <span class="kw">=</span> <span class="kw">self</span>.<span class="fn">calculate_cost</span>(response, variant)
        success <span class="kw">=</span> is_valid_response(response)

        <span class="kw">self</span>.stats[variant][<span class="str">"total"</span>] <span class="kw">+=</span> <span class="num">1</span>
        <span class="kw">self</span>.stats[variant][<span class="str">"cost"</span>] <span class="kw">+=</span> cost
        <span class="kw">if</span> success:
            <span class="kw">self</span>.stats[variant][<span class="str">"success"</span>] <span class="kw">+=</span> <span class="num">1</span>

        <span class="kw">return</span> response

    <span class="kw">def</span> <span class="fn">report</span>(<span class="kw">self</span>):
        <span class="kw">for</span> variant, data <span class="kw">in</span> <span class="kw">self</span>.stats.<span class="fn">items</span>():
            <span class="kw">if</span> data[<span class="str">"total"</span>] <span class="kw">></span> <span class="num">0</span>:
                success_rate <span class="kw">=</span> data[<span class="str">"success"</span>] <span class="kw">/</span> data[<span class="str">"total"</span>] <span class="kw">*</span> <span class="num">100</span>
                avg_cost <span class="kw">=</span> data[<span class="str">"cost"</span>] <span class="kw">/</span> data[<span class="str">"total"</span>]
                <span class="fn">print</span>(<span class="str">f"{variant}: ì„±ê³µë¥  {success_rate:.1f}%, í‰ê·  ë¹„ìš© ${avg_cost:.4f}"</span>)

<span class="cmt"># ì‚¬ìš© ì˜ˆì‹œ:
# 100íšŒ ìš”ì²­ í›„ ì„±ê³µë¥ ê³¼ ë¹„ìš© ë¹„êµ
# Haiku: ì„±ê³µë¥  85%, í‰ê·  ë¹„ìš© $0.003
# Sonnet: ì„±ê³µë¥  95%, í‰ê·  ë¹„ìš© $0.012
# â†’ ì„±ê³µë¥  ì°¨ì´ê°€ 10%ë¿ì´ë¼ë©´ Haiku ì„ íƒ (75% ë¹„ìš© ì ˆê°)</span></code></pre>
  </div>

  <div class="info-box tip">
    <div class="info-box-title">ğŸ’¡ ì¢…í•© ë¹„ìš© ì ˆê° ì „ëµ</div>
    <p>ìœ„ 9ê°€ì§€ ì „ëµì„ ì¡°í•©í•˜ë©´ <strong>70-90% ë¹„ìš© ì ˆê°</strong>ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤:</p>
    <ol>
      <li>ê¸°ë³¸: Sonnet ëŒ€ì‹  Haiku ì‚¬ìš© (75% ì ˆê°)</li>
      <li>í”„ë¡¬í”„íŠ¸ ìºì‹±: ë°˜ë³µ ì»¨í…ìŠ¤íŠ¸ì—ì„œ 90% ì¶”ê°€ ì ˆê°</li>
      <li>ë¡œì»¬ ìºì‹±: ë™ì¼ ìš”ì²­ 100% ì ˆê°</li>
      <li>ìŠ¤ë§ˆíŠ¸ ë¼ìš°íŒ…: ì‘ì—…ë³„ ìµœì  ëª¨ë¸ ìë™ ì„ íƒ</li>
      <li>A/B í…ŒìŠ¤íŠ¸: ë°ì´í„° ê¸°ë°˜ ì˜ì‚¬ê²°ì •</li>
    </ol>
    <p style="margin-top: 1rem;">
      ë” ë§ì€ ìµœì í™” íŒì€ <a href="claude-code.html#troubleshooting">Claude Code íŠ¸ëŸ¬ë¸”ìŠˆíŒ…</a>ì„ ì°¸ì¡°í•˜ì„¸ìš”.
    </p>
  </div>
</section>

<section class="content-section">
  <h2 id="monitoring">ë¹„ìš© ëª¨ë‹ˆí„°ë§</h2>

  <h3 id="console-usage">Consoleì—ì„œ í™•ì¸</h3>
  <p>
    Anthropic Consoleì˜ Usage íƒ­ì—ì„œ ì‹¤ì‹œê°„ ì‚¬ìš©ëŸ‰ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:
  </p>

  <ul>
    <li>ì¼ë³„/ì›”ë³„ í† í° ì‚¬ìš©ëŸ‰</li>
    <li>ëª¨ë¸ë³„ ë¹„ìš© ë¶„í•´</li>
    <li>API í‚¤ë³„ ì‚¬ìš© í†µê³„</li>
  </ul>

  <h3 id="api-headers">API ì‘ë‹µ í—¤ë”</h3>
  <p>
    ê° API ì‘ë‹µì— í† í° ì‚¬ìš©ëŸ‰ì´ í¬í•¨ë©ë‹ˆë‹¤:
  </p>

  <div class="code-block">
    <div class="code-header">
      <span class="code-lang">Python ì‚¬ìš©ëŸ‰ í™•ì¸</span>
    </div>
    <pre><code>message <span class="kw">=</span> client.messages.<span class="fn">create</span>(<span class="kw">...</span>)

<span class="fn">print</span>(<span class="fn">f</span><span class="str">"ì…ë ¥ í† í°: {message.usage.input_tokens}"</span>)
<span class="fn">print</span>(<span class="fn">f</span><span class="str">"ì¶œë ¥ í† í°: {message.usage.output_tokens}"</span>)

<span class="cmt"># ë¹„ìš© ê³„ì‚°</span>
cost <span class="kw">=</span> <span class="fn">calculate_cost</span>(
    message.usage.input_tokens,
    message.usage.output_tokens,
    model<span class="kw">=</span><span class="str">"sonnet"</span>
)
<span class="fn">print</span>(<span class="fn">f</span><span class="str">"ì´ë²ˆ ìš”ì²­ ë¹„ìš©: ${cost:.4f}"</span>)</code></pre>
  </div>
</section>

<section class="content-section">
  <h2 id="next-steps">ë‹¤ìŒ ë‹¨ê³„</h2>
  <ul>
    <li><a href="model-comparison.html">ëª¨ë¸ ë¹„êµ</a> - ëª¨ë¸ë³„ ì„±ëŠ¥ ë° ì‚¬ìš© ì‚¬ë¡€</li>
    <li><a href="limitations.html">ì œí•œì‚¬í•­</a> - Rate limits ë° ì œì•½ì‚¬í•­</li>
    <li><a href="quickstart.html">ë¹ ë¥¸ ì‹œì‘</a> - API ì‚¬ìš© ì‹œì‘í•˜ê¸°</li>
  </ul>
</section>

<nav class="page-nav"></nav>

</main>

<aside class="inline-toc"></aside>
<footer class="site-footer"></footer>

</div>
<script src="../js/main.js"></script>
</body>
</html>
