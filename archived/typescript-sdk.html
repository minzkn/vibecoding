<!DOCTYPE html>
<html lang="ko" data-theme="dark-kernel">
<head>
<script>
(function(){var m=document.cookie.match(/claude_theme=([^;]+)/);if(m)document.documentElement.setAttribute('data-theme',m[1]);})();
</script>
<meta charset="UTF-8">
<meta property="og:type" content="article">
<meta property="og:site_name" content="Claude ë¬¸ì„œ /with MINZKN">
<meta property="og:title" content="TypeScript SDK - Claude ë¬¸ì„œ">
<meta property="og:description" content="Claude TypeScript/JavaScript SDK ì™„ë²½ ê°€ì´ë“œ">
<meta property="og:url" content="https://minzkn.com/claude/pages/typescript-sdk.html">
<meta property="og:image" content="https://minzkn.com/claude/images/og-image.png">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="Claude TypeScript/JavaScript SDK ì™„ë²½ ê°€ì´ë“œ">
<meta name="keywords" content="TypeScript SDK, JavaScript, Node.js, Claude API">
<meta name="author" content="MINZKN">
<title>TypeScript SDK - Claude ë¬¸ì„œ /with MINZKN</title>
<link rel="icon" type="image/svg+xml" href="../images/favicon.svg">
<link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/joungkyun/font-d2coding/d2coding.css">
<link rel="stylesheet" href="../css/themes.css">
<link rel="stylesheet" href="../css/style.css">
<link rel="stylesheet" href="../css/responsive.css">
</head>
<body>
<div class="page-wrapper">

<header class="site-header"></header>
<nav class="side-nav" aria-label="ì‚¬ì´íŠ¸ ë‚´ë¹„ê²Œì´ì…˜"></nav>

<main class="main-content">

<nav class="breadcrumb"></nav>

<section class="content-section">
  <h1 id="top">TypeScript / JavaScript SDK</h1>
  <p class="lead">
    Anthropicì˜ ê³µì‹ TypeScript SDKë¥¼ ì‚¬ìš©í•˜ë©´ Node.js ì• í”Œë¦¬ì¼€ì´ì…˜ê³¼ ì›¹ ì„œë¹„ìŠ¤ì—ì„œ
    Claude APIë¥¼ type-safeí•˜ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
  </p>
</section>

<section class="content-section">
  <h2 id="installation">ì„¤ì¹˜</h2>

  <div class="code-block">
    <div class="code-header">
      <span class="code-lang">npm</span>
      <button class="code-copy" aria-label="ì½”ë“œ ë³µì‚¬">Copy</button>
    </div>
    <pre><code>npm install @anthropic-ai/sdk</code></pre>
  </div>

  <div class="code-block">
    <div class="code-header">
      <span class="code-lang">yarn</span>
    </div>
    <pre><code>yarn add @anthropic-ai/sdk</code></pre>
  </div>

  <h3 id="requirements">ìš”êµ¬ì‚¬í•­</h3>
  <ul>
    <li>Node.js 18 ì´ìƒ</li>
    <li>TypeScript 4.5 ì´ìƒ (TypeScript ì‚¬ìš© ì‹œ)</li>
  </ul>

  <div class="info-box warning">
    <div class="info-box-title">âš ï¸ ë¸Œë¼ìš°ì €ì—ì„œ ì‚¬ìš© ê¸ˆì§€</div>
    <p>
      ì´ SDKëŠ” <strong>ì„œë²„ ì‚¬ì´ë“œ ì „ìš©</strong>ì…ë‹ˆë‹¤. ë¸Œë¼ìš°ì €ì—ì„œ ì§ì ‘ ì‚¬ìš©í•˜ë©´ API í‚¤ê°€ ë…¸ì¶œë©ë‹ˆë‹¤.
      í”„ë¡ íŠ¸ì—”ë“œì—ì„œ ì‚¬ìš©í•˜ë ¤ë©´ ë°±ì—”ë“œ APIë¥¼ ë§Œë“¤ì–´ í”„ë¡ì‹œí•˜ì„¸ìš”.
    </p>
  </div>
</section>

<section class="content-section">
  <h2 id="quickstart">ë¹ ë¥¸ ì‹œì‘</h2>

  <h3 id="typescript">TypeScript</h3>
  <div class="code-block">
    <div class="code-header">
      <span class="code-lang">TypeScript</span>
      <button class="code-copy" aria-label="ì½”ë“œ ë³µì‚¬">Copy</button>
    </div>
    <pre><code><span class="kw">import</span> Anthropic <span class="kw">from</span> <span class="str">'@anthropic-ai/sdk'</span>;

<span class="kw">const</span> client <span class="kw">=</span> <span class="kw">new</span> <span class="fn">Anthropic</span>({
  apiKey: process.env.<span class="str">ANTHROPIC_API_KEY</span>,
});

<span class="kw">const</span> message <span class="kw">=</span> <span class="kw">await</span> client.messages.<span class="fn">create</span>({
  model: <span class="str">'claude-sonnet-4-5-20250929'</span>,
  max_tokens: <span class="num">1024</span>,
  messages: [
    {role: <span class="str">'user'</span>, content: <span class="str">'ì•ˆë…•í•˜ì„¸ìš”, Claude!'</span>}
  ],
});

console.<span class="fn">log</span>(message.content[<span class="num">0</span>].text);</code></pre>
  </div>

  <h3 id="javascript">JavaScript (CommonJS)</h3>
  <div class="code-block">
    <div class="code-header">
      <span class="code-lang">JavaScript</span>
    </div>
    <pre><code><span class="kw">const</span> Anthropic <span class="kw">=</span> <span class="fn">require</span>(<span class="str">'@anthropic-ai/sdk'</span>);

<span class="kw">const</span> client <span class="kw">=</span> <span class="kw">new</span> <span class="fn">Anthropic</span>({
  apiKey: process.env.<span class="str">ANTHROPIC_API_KEY</span>,
});

<span class="kw">async</span> <span class="kw">function</span> <span class="fn">main</span>() {
  <span class="kw">const</span> message <span class="kw">=</span> <span class="kw">await</span> client.messages.<span class="fn">create</span>({
    model: <span class="str">'claude-sonnet-4-5-20250929'</span>,
    max_tokens: <span class="num">1024</span>,
    messages: [{role: <span class="str">'user'</span>, content: <span class="str">'Hello!'</span>}],
  });

  console.<span class="fn">log</span>(message.content[<span class="num">0</span>].text);
}

<span class="fn">main</span>();</code></pre>
  </div>
</section>

<section class="content-section">
  <h2 id="sdk-architecture">SDK êµ¬ì¡°</h2>
  <p>
    TypeScript SDKëŠ” ì—¬ëŸ¬ ê³„ì¸µìœ¼ë¡œ êµ¬ì„±ë˜ì–´ ìˆìœ¼ë©°, ê° ê³„ì¸µì€ ëª…í™•í•œ ì—­í• ì„ ë‹´ë‹¹í•©ë‹ˆë‹¤.
    ì´ êµ¬ì¡°ë¥¼ ì´í•´í•˜ë©´ ë””ë²„ê¹…ê³¼ ìµœì í™”ì— ë„ì›€ì´ ë©ë‹ˆë‹¤.
  </p>

  <figure style="margin: 2.5rem 0;">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 600 550"
         style="width: 100%; max-width: 600px; height: auto; display: block; margin: 0 auto;">
      <defs>
        <marker id="ts-arrow" markerWidth="8" markerHeight="6" refX="8" refY="3" orient="auto">
          <path d="M0,0 L8,3 L0,6 Z" fill="var(--diagram-arrow)"/>
        </marker>
      </defs>

      <!-- Title -->
      <text x="300" y="25" text-anchor="middle" font-size="14" font-weight="bold" fill="var(--diagram-text)">
        TypeScript SDK ê³„ì¸µ êµ¬ì¡°
      </text>

      <!-- Layer 1: Application Code -->
      <rect x="100" y="50" width="400" height="70" rx="8"
            fill="var(--accent-glow)" stroke="var(--accent-primary)" stroke-width="2"/>
      <text x="300" y="75" text-anchor="middle" font-size="13" font-weight="bold" fill="var(--diagram-text)">
        ì• í”Œë¦¬ì¼€ì´ì…˜ ì½”ë“œ
      </text>
      <text x="300" y="95" text-anchor="middle" font-size="11" fill="var(--text-secondary)">
        Your Node.js / TypeScript App
      </text>
      <text x="300" y="110" text-anchor="middle" font-size="9" fill="var(--text-tertiary)" font-style="italic">
        client.messages.create(...)
      </text>

      <!-- Arrow 1 -->
      <line x1="300" y1="120" x2="300" y2="145"
            stroke="var(--diagram-arrow)" stroke-width="2.5" marker-end="url(#ts-arrow)"/>

      <!-- Layer 2: Anthropic SDK -->
      <rect x="100" y="145" width="400" height="70" rx="8"
            fill="var(--diagram-primary)" stroke="var(--diagram-border)" stroke-width="2"/>
      <text x="300" y="170" text-anchor="middle" font-size="13" font-weight="bold" fill="var(--diagram-text)">
        Anthropic TypeScript SDK
      </text>
      <text x="300" y="190" text-anchor="middle" font-size="11" fill="var(--text-secondary)">
        @anthropic-ai/sdk
      </text>
      <text x="300" y="205" text-anchor="middle" font-size="9" fill="var(--text-tertiary)" font-style="italic">
        íƒ€ì… ì•ˆì „ì„±, ìš”ì²­ ìƒì„±, ì‘ë‹µ íŒŒì‹±
      </text>

      <!-- Arrow 2 -->
      <line x1="300" y1="215" x2="300" y2="240"
            stroke="var(--diagram-arrow)" stroke-width="2.5" marker-end="url(#ts-arrow)"/>

      <!-- Layer 3: HTTP Client -->
      <rect x="100" y="240" width="400" height="70" rx="8"
            fill="var(--diagram-primary)" stroke="var(--diagram-border)" stroke-width="2"/>
      <text x="300" y="265" text-anchor="middle" font-size="13" font-weight="bold" fill="var(--diagram-text)">
        HTTP í´ë¼ì´ì–¸íŠ¸
      </text>
      <text x="300" y="285" text-anchor="middle" font-size="11" fill="var(--text-secondary)">
        node-fetch / axios (ë‚´ì¥)
      </text>
      <text x="300" y="300" text-anchor="middle" font-size="9" fill="var(--text-tertiary)" font-style="italic">
        HTTP ì—°ê²°, ì¬ì‹œë„, íƒ€ì„ì•„ì›ƒ ì²˜ë¦¬
      </text>

      <!-- Arrow 3 -->
      <line x1="300" y1="310" x2="300" y2="335"
            stroke="var(--diagram-arrow)" stroke-width="2.5" marker-end="url(#ts-arrow)"/>

      <!-- Layer 4: REST API -->
      <rect x="100" y="335" width="400" height="70" rx="8"
            fill="var(--diagram-primary)" stroke="var(--diagram-border)" stroke-width="2"/>
      <text x="300" y="360" text-anchor="middle" font-size="13" font-weight="bold" fill="var(--diagram-text)">
        Claude REST API
      </text>
      <text x="300" y="380" text-anchor="middle" font-size="11" fill="var(--text-secondary)">
        POST /v1/messages
      </text>
      <text x="300" y="395" text-anchor="middle" font-size="9" fill="var(--text-tertiary)" font-style="italic">
        api.anthropic.com
      </text>

      <!-- Arrow 4 -->
      <line x1="300" y1="405" x2="300" y2="430"
            stroke="var(--diagram-arrow)" stroke-width="2.5" marker-end="url(#ts-arrow)"/>

      <!-- Layer 5: Claude Models -->
      <rect x="100" y="430" width="400" height="70" rx="8"
            fill="var(--accent-primary)" fill-opacity="0.2"
            stroke="var(--accent-primary)" stroke-width="2"/>
      <text x="300" y="455" text-anchor="middle" font-size="13" font-weight="bold" fill="var(--diagram-text)">
        Claude ëª¨ë¸
      </text>
      <text x="300" y="475" text-anchor="middle" font-size="11" fill="var(--text-secondary)">
        Opus 4.6 / Sonnet 4.5 / Haiku 4.5
      </text>
      <text x="300" y="490" text-anchor="middle" font-size="9" fill="var(--text-tertiary)" font-style="italic">
        AI ì‘ë‹µ ìƒì„±
      </text>
    </svg>
    <p class="diagram-caption">ê·¸ë¦¼: TypeScript SDKì˜ 5ê³„ì¸µ ì•„í‚¤í…ì²˜ - ì• í”Œë¦¬ì¼€ì´ì…˜ë¶€í„° AI ëª¨ë¸ê¹Œì§€</p>
  </figure>

  <div class="info-box info">
    <div class="info-box-title">ğŸ’¡ ê° ê³„ì¸µì˜ ì—­í• </div>
    <ul style="margin-top: 0.5em;">
      <li><strong>ì• í”Œë¦¬ì¼€ì´ì…˜ ì½”ë“œ</strong>: SDK ë©”ì„œë“œ í˜¸ì¶œ, ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì²˜ë¦¬</li>
      <li><strong>Anthropic SDK</strong>: TypeScript íƒ€ì… ì•ˆì „ì„±, JSON ì§ë ¬í™”, ì—ëŸ¬ ì²˜ë¦¬</li>
      <li><strong>HTTP í´ë¼ì´ì–¸íŠ¸</strong>: ë„¤íŠ¸ì›Œí¬ í†µì‹ , ì¬ì‹œë„ ë¡œì§, íƒ€ì„ì•„ì›ƒ</li>
      <li><strong>REST API</strong>: ì¸ì¦, ë¼ìš°íŒ…, ìš”ì²­ ê²€ì¦</li>
      <li><strong>Claude ëª¨ë¸</strong>: ìì—°ì–´ ì´í•´ ë° ìƒì„±</li>
    </ul>
  </div>
</section>

<section class="content-section">
  <h2 id="messages-api">Messages API</h2>

  <h3 id="basic">ê¸°ë³¸ ë©”ì‹œì§€</h3>
  <div class="code-block">
    <div class="code-header">
      <span class="code-lang">TypeScript íƒ€ì… ì•ˆì „ì„±</span>
      <button class="code-copy" aria-label="ì½”ë“œ ë³µì‚¬">Copy</button>
    </div>
    <pre><code><span class="kw">import</span> Anthropic <span class="kw">from</span> <span class="str">'@anthropic-ai/sdk'</span>;

<span class="kw">const</span> client <span class="kw">=</span> <span class="kw">new</span> <span class="fn">Anthropic</span>();

<span class="kw">const</span> message: Anthropic.Message <span class="kw">=</span> <span class="kw">await</span> client.messages.<span class="fn">create</span>({
  model: <span class="str">'claude-sonnet-4-5-20250929'</span>,
  max_tokens: <span class="num">1024</span>,
  messages: [
    {role: <span class="str">'user'</span>, content: <span class="str">'TypeScriptë¡œ í”¼ë³´ë‚˜ì¹˜ í•¨ìˆ˜ ì‘ì„±'</span>}
  ],
});

<span class="cmt">// íƒ€ì… ì•ˆì „ ì ‘ê·¼</span>
<span class="kw">const</span> text: <span class="type">string</span> <span class="kw">=</span> message.content[<span class="num">0</span>].text;
<span class="kw">const</span> inputTokens: <span class="type">number</span> <span class="kw">=</span> message.usage.input_tokens;
<span class="kw">const</span> outputTokens: <span class="type">number</span> <span class="kw">=</span> message.usage.output_tokens;</code></pre>
  </div>

  <h3 id="conversation">ëŒ€í™” ê´€ë¦¬</h3>
  <div class="code-block">
    <div class="code-header">
      <span class="code-lang">TypeScript ëŒ€í™” íˆìŠ¤í† ë¦¬</span>
      <button class="code-copy" aria-label="ì½”ë“œ ë³µì‚¬">Copy</button>
    </div>
    <pre><code><span class="kw">type</span> <span class="type">Message</span> <span class="kw">=</span> {
  role: <span class="str">'user'</span> <span class="kw">|</span> <span class="str">'assistant'</span>;
  content: <span class="type">string</span>;
};

<span class="kw">const</span> conversation: <span class="type">Message</span>[] <span class="kw">=</span> [];

<span class="cmt">// 1ë²ˆì§¸ ë©”ì‹œì§€</span>
conversation.<span class="fn">push</span>({role: <span class="str">'user'</span>, content: <span class="str">'React ì»´í¬ë„ŒíŠ¸ ë§Œë“¤ì–´ì¤˜'</span>});
<span class="kw">const</span> msg1 <span class="kw">=</span> <span class="kw">await</span> client.messages.<span class="fn">create</span>({
  model: <span class="str">'claude-sonnet-4-5-20250929'</span>,
  max_tokens: <span class="num">2048</span>,
  messages: conversation,
});
conversation.<span class="fn">push</span>({role: <span class="str">'assistant'</span>, content: msg1.content[<span class="num">0</span>].text});

<span class="cmt">// 2ë²ˆì§¸ ë©”ì‹œì§€ (ì´ì „ ëŒ€í™” ê¸°ì–µ)</span>
conversation.<span class="fn">push</span>({role: <span class="str">'user'</span>, content: <span class="str">'TypeScriptë¡œ ë³€í™˜í•´ì¤˜'</span>});
<span class="kw">const</span> msg2 <span class="kw">=</span> <span class="kw">await</span> client.messages.<span class="fn">create</span>({
  model: <span class="str">'claude-sonnet-4-5-20250929'</span>,
  max_tokens: <span class="num">2048</span>,
  messages: conversation,
});

console.<span class="fn">log</span>(msg2.content[<span class="num">0</span>].text);</code></pre>
  </div>
</section>

<section class="content-section">
  <h2 id="streaming">ìŠ¤íŠ¸ë¦¬ë°</h2>

  <div class="code-block">
    <div class="code-header">
      <span class="code-lang">TypeScript ìŠ¤íŠ¸ë¦¬ë°</span>
      <button class="code-copy" aria-label="ì½”ë“œ ë³µì‚¬">Copy</button>
    </div>
    <pre><code><span class="kw">const</span> stream <span class="kw">=</span> <span class="kw">await</span> client.messages.<span class="fn">create</span>({
  model: <span class="str">'claude-sonnet-4-5-20250929'</span>,
  max_tokens: <span class="num">1024</span>,
  messages: [{role: <span class="str">'user'</span>, content: <span class="str">'ê¸´ ì´ì•¼ê¸° ë“¤ë ¤ì¤˜'</span>}],
  stream: <span class="kw">true</span>,
});

<span class="kw">for</span> <span class="kw">await</span> (<span class="kw">const</span> event <span class="kw">of</span> stream) {
  <span class="kw">if</span> (event.<span class="fn">type</span> <span class="kw">===</span> <span class="str">'content_block_delta'</span> <span class="kw">&&</span>
      event.delta.<span class="fn">type</span> <span class="kw">===</span> <span class="str">'text_delta'</span>) {
    process.stdout.<span class="fn">write</span>(event.delta.text);
  }
}</code></pre>
  </div>

  <h3 id="stream-helper">ìŠ¤íŠ¸ë¦¼ í—¬í¼</h3>
  <div class="code-block">
    <div class="code-header">
      <span class="code-lang">TypeScript ê°„í¸ ìŠ¤íŠ¸ë¦¬ë°</span>
    </div>
    <pre><code><span class="kw">const</span> stream <span class="kw">=</span> client.messages.<span class="fn">stream</span>({
  model: <span class="str">'claude-sonnet-4-5-20250929'</span>,
  max_tokens: <span class="num">1024</span>,
  messages: [{role: <span class="str">'user'</span>, content: <span class="str">'ì•ˆë…•'</span>}],
});

stream
  .<span class="fn">on</span>(<span class="str">'text'</span>, (text) <span class="kw">=></span> process.stdout.<span class="fn">write</span>(text))
  .<span class="fn">on</span>(<span class="str">'end'</span>, () <span class="kw">=></span> console.<span class="fn">log</span>(<span class="str">'\nì™„ë£Œ!'</span>))
  .<span class="fn">on</span>(<span class="str">'error'</span>, (err) <span class="kw">=></span> console.<span class="fn">error</span>(err));

<span class="cmt">// ë˜ëŠ” ìµœì¢… ë©”ì‹œì§€ ì–»ê¸°</span>
<span class="kw">const</span> finalMessage <span class="kw">=</span> <span class="kw">await</span> stream.<span class="fn">finalMessage</span>();
console.<span class="fn">log</span>(finalMessage.content[<span class="num">0</span>].text);</code></pre>
  </div>
</section>

<section class="content-section">
  <h2 id="express">Express.js í†µí•©</h2>

  <div class="code-block">
    <div class="code-header">
      <span class="code-lang">Express.js + Claude API</span>
      <button class="code-copy" aria-label="ì½”ë“œ ë³µì‚¬">Copy</button>
    </div>
    <pre><code><span class="kw">import</span> express <span class="kw">from</span> <span class="str">'express'</span>;
<span class="kw">import</span> Anthropic <span class="kw">from</span> <span class="str">'@anthropic-ai/sdk'</span>;

<span class="kw">const</span> app <span class="kw">=</span> <span class="fn">express</span>();
<span class="kw">const</span> client <span class="kw">=</span> <span class="kw">new</span> <span class="fn">Anthropic</span>();

app.<span class="fn">use</span>(express.<span class="fn">json</span>());

app.<span class="fn">post</span>(<span class="str">'/api/chat'</span>, <span class="kw">async</span> (req, res) <span class="kw">=></span> {
  <span class="kw">try</span> {
    <span class="kw">const</span> {messages} <span class="kw">=</span> req.body;

    <span class="kw">const</span> message <span class="kw">=</span> <span class="kw">await</span> client.messages.<span class="fn">create</span>({
      model: <span class="str">'claude-sonnet-4-5-20250929'</span>,
      max_tokens: <span class="num">1024</span>,
      messages,
    });

    res.<span class="fn">json</span>({
      response: message.content[<span class="num">0</span>].text,
      usage: message.usage,
    });
  } <span class="kw">catch</span> (error) {
    console.<span class="fn">error</span>(error);
    res.<span class="fn">status</span>(<span class="num">500</span>).<span class="fn">json</span>({error: <span class="str">'Internal server error'</span>});
  }
});

app.<span class="fn">listen</span>(<span class="num">3000</span>, () <span class="kw">=></span> console.<span class="fn">log</span>(<span class="str">'Server running on port 3000'</span>));</code></pre>
  </div>

  <h3 id="sse-streaming">SSE ìŠ¤íŠ¸ë¦¬ë° (Express)</h3>
  <div class="code-block">
    <div class="code-header">
      <span class="code-lang">Express.js SSE ìŠ¤íŠ¸ë¦¬ë°</span>
      <button class="code-copy" aria-label="ì½”ë“œ ë³µì‚¬">Copy</button>
    </div>
    <pre><code>app.<span class="fn">post</span>(<span class="str">'/api/chat/stream'</span>, <span class="kw">async</span> (req, res) <span class="kw">=></span> {
  <span class="kw">const</span> {messages} <span class="kw">=</span> req.body;

  <span class="cmt">// SSE í—¤ë” ì„¤ì •</span>
  res.<span class="fn">setHeader</span>(<span class="str">'Content-Type'</span>, <span class="str">'text/event-stream'</span>);
  res.<span class="fn">setHeader</span>(<span class="str">'Cache-Control'</span>, <span class="str">'no-cache'</span>);
  res.<span class="fn">setHeader</span>(<span class="str">'Connection'</span>, <span class="str">'keep-alive'</span>);

  <span class="kw">const</span> stream <span class="kw">=</span> <span class="kw">await</span> client.messages.<span class="fn">create</span>({
    model: <span class="str">'claude-sonnet-4-5-20250929'</span>,
    max_tokens: <span class="num">1024</span>,
    messages,
    stream: <span class="kw">true</span>,
  });

  <span class="kw">for</span> <span class="kw">await</span> (<span class="kw">const</span> event <span class="kw">of</span> stream) {
    <span class="kw">if</span> (event.<span class="fn">type</span> <span class="kw">===</span> <span class="str">'content_block_delta'</span> <span class="kw">&&</span>
        event.delta.<span class="fn">type</span> <span class="kw">===</span> <span class="str">'text_delta'</span>) {
      res.<span class="fn">write</span>(<span class="str">`data: ${</span>JSON.<span class="fn">stringify</span>({text: event.delta.text})<span class="str">}\n\n`</span>);
    }
  }

  res.<span class="fn">write</span>(<span class="str">'data: [DONE]\n\n'</span>);
  res.<span class="fn">end</span>();
});</code></pre>
  </div>
</section>

<section class="content-section">
  <h2 id="nextjs">Next.js í†µí•©</h2>

  <h3 id="api-route">API Route (App Router)</h3>
  <div class="code-block">
    <div class="code-header">
      <span class="code-lang">app/api/chat/route.ts</span>
      <button class="code-copy" aria-label="ì½”ë“œ ë³µì‚¬">Copy</button>
    </div>
    <pre><code><span class="kw">import</span> {NextRequest, NextResponse} <span class="kw">from</span> <span class="str">'next/server'</span>;
<span class="kw">import</span> Anthropic <span class="kw">from</span> <span class="str">'@anthropic-ai/sdk'</span>;

<span class="kw">const</span> client <span class="kw">=</span> <span class="kw">new</span> <span class="fn">Anthropic</span>();

<span class="kw">export</span> <span class="kw">async</span> <span class="kw">function</span> <span class="fn">POST</span>(req: <span class="type">NextRequest</span>) {
  <span class="kw">const</span> {messages} <span class="kw">=</span> <span class="kw">await</span> req.<span class="fn">json</span>();

  <span class="kw">const</span> message <span class="kw">=</span> <span class="kw">await</span> client.messages.<span class="fn">create</span>({
    model: <span class="str">'claude-sonnet-4-5-20250929'</span>,
    max_tokens: <span class="num">1024</span>,
    messages,
  });

  <span class="kw">return</span> NextResponse.<span class="fn">json</span>({
    response: message.content[<span class="num">0</span>].text,
  });
}</code></pre>
  </div>

  <h3 id="nextjs-streaming">Next.js ìŠ¤íŠ¸ë¦¬ë°</h3>
  <div class="code-block">
    <div class="code-header">
      <span class="code-lang">app/api/chat/stream/route.ts</span>
      <button class="code-copy" aria-label="ì½”ë“œ ë³µì‚¬">Copy</button>
    </div>
    <pre><code><span class="kw">import</span> {NextRequest} <span class="kw">from</span> <span class="str">'next/server'</span>;
<span class="kw">import</span> Anthropic <span class="kw">from</span> <span class="str">'@anthropic-ai/sdk'</span>;

<span class="kw">const</span> client <span class="kw">=</span> <span class="kw">new</span> <span class="fn">Anthropic</span>();

<span class="kw">export</span> <span class="kw">async</span> <span class="kw">function</span> <span class="fn">POST</span>(req: <span class="type">NextRequest</span>) {
  <span class="kw">const</span> {messages} <span class="kw">=</span> <span class="kw">await</span> req.<span class="fn">json</span>();

  <span class="kw">const</span> encoder <span class="kw">=</span> <span class="kw">new</span> <span class="fn">TextEncoder</span>();

  <span class="kw">const</span> stream <span class="kw">=</span> <span class="kw">new</span> <span class="fn">ReadableStream</span>({
    <span class="kw">async</span> <span class="fn">start</span>(controller) {
      <span class="kw">const</span> anthropicStream <span class="kw">=</span> <span class="kw">await</span> client.messages.<span class="fn">create</span>({
        model: <span class="str">'claude-sonnet-4-5-20250929'</span>,
        max_tokens: <span class="num">1024</span>,
        messages,
        stream: <span class="kw">true</span>,
      });

      <span class="kw">for</span> <span class="kw">await</span> (<span class="kw">const</span> event <span class="kw">of</span> anthropicStream) {
        <span class="kw">if</span> (event.<span class="fn">type</span> <span class="kw">===</span> <span class="str">'content_block_delta'</span> <span class="kw">&&</span>
            event.delta.<span class="fn">type</span> <span class="kw">===</span> <span class="str">'text_delta'</span>) {
          controller.<span class="fn">enqueue</span>(encoder.<span class="fn">encode</span>(event.delta.text));
        }
      }

      controller.<span class="fn">close</span>();
    },
  });

  <span class="kw">return</span> <span class="kw">new</span> <span class="fn">Response</span>(stream, {
    headers: {<span class="str">'Content-Type'</span>: <span class="str">'text/plain; charset=utf-8'</span>},
  });
}</code></pre>
  </div>
</section>

<section class="content-section">
  <h2 id="error-handling">ì˜¤ë¥˜ ì²˜ë¦¬</h2>

  <div class="code-block">
    <div class="code-header">
      <span class="code-lang">TypeScript ì˜¤ë¥˜ ì²˜ë¦¬</span>
      <button class="code-copy" aria-label="ì½”ë“œ ë³µì‚¬">Copy</button>
    </div>
    <pre><code><span class="kw">import</span> Anthropic <span class="kw">from</span> <span class="str">'@anthropic-ai/sdk'</span>;

<span class="kw">const</span> client <span class="kw">=</span> <span class="kw">new</span> <span class="fn">Anthropic</span>();

<span class="kw">async</span> <span class="kw">function</span> <span class="fn">callClaudeWithRetry</span>(messages: <span class="type">any</span>[], maxRetries <span class="kw">=</span> <span class="num">3</span>) {
  <span class="kw">for</span> (<span class="kw">let</span> attempt <span class="kw">=</span> <span class="num">0</span>; attempt <span class="kw"><</span> maxRetries; attempt<span class="kw">++</span>) {
    <span class="kw">try</span> {
      <span class="kw">return</span> <span class="kw">await</span> client.messages.<span class="fn">create</span>({
        model: <span class="str">'claude-sonnet-4-5-20250929'</span>,
        max_tokens: <span class="num">1024</span>,
        messages,
      });
    } <span class="kw">catch</span> (error) {
      <span class="kw">if</span> (error <span class="kw">instanceof</span> Anthropic.APIError) {
        console.<span class="fn">log</span>(error.status);  <span class="cmt">// 400, 401, 429 ë“±</span>
        console.<span class="fn">log</span>(error.name);    <span class="cmt">// RateLimitError ë“±</span>
        console.<span class="fn">log</span>(error.message);

        <span class="kw">if</span> (error.status <span class="kw">===</span> <span class="num">429</span>) {
          <span class="cmt">// Rate limit â†’ ì¬ì‹œë„</span>
          <span class="kw">const</span> delay <span class="kw">=</span> <span class="num">1000</span> <span class="kw">*</span> (<span class="num">2</span> <span class="kw">**</span> attempt);
          <span class="kw">await</span> <span class="kw">new</span> <span class="fn">Promise</span>(resolve <span class="kw">=></span> <span class="fn">setTimeout</span>(resolve, delay));
          <span class="kw">continue</span>;
        }

        <span class="kw">throw</span> error;  <span class="cmt">// ë‹¤ë¥¸ ì˜¤ë¥˜ëŠ” ì¦‰ì‹œ throw</span>
      }

      <span class="kw">throw</span> error;
    }
  }

  <span class="kw">throw</span> <span class="kw">new</span> <span class="fn">Error</span>(<span class="str">'Max retries exceeded'</span>);
}</code></pre>
  </div>
</section>

<section class="content-section">
  <h2 id="best-practices">ë² ìŠ¤íŠ¸ í”„ë™í‹°ìŠ¤</h2>

  <h3 id="env-variables">1. í™˜ê²½ ë³€ìˆ˜ (.env)</h3>
  <div class="code-block">
    <div class="code-header">
      <span class="code-lang">.env íŒŒì¼</span>
    </div>
    <pre><code>ANTHROPIC_API_KEY<span class="kw">=</span>sk-ant-api03-YOUR_KEY_HERE</code></pre>
  </div>

  <div class="code-block">
    <div class="code-header">
      <span class="code-lang">TypeScript (dotenv)</span>
    </div>
    <pre><code><span class="kw">import</span> <span class="str">'dotenv/config'</span>;
<span class="kw">import</span> Anthropic <span class="kw">from</span> <span class="str">'@anthropic-ai/sdk'</span>;

<span class="kw">const</span> client <span class="kw">=</span> <span class="kw">new</span> <span class="fn">Anthropic</span>();  <span class="cmt">// ìë™ìœ¼ë¡œ process.env ì½ìŒ</span></code></pre>
  </div>

  <h3 id="types">2. íƒ€ì… ì•ˆì „ì„± í™œìš©</h3>
  <div class="code-block">
    <div class="code-header">
      <span class="code-lang">TypeScript íƒ€ì…</span>
    </div>
    <pre><code><span class="kw">import</span> Anthropic <span class="kw">from</span> <span class="str">'@anthropic-ai/sdk'</span>;

<span class="kw">type</span> <span class="type">MessageParam</span> <span class="kw">=</span> Anthropic.MessageParam;
<span class="kw">type</span> <span class="type">Message</span> <span class="kw">=</span> Anthropic.Message;

<span class="kw">async</span> <span class="kw">function</span> <span class="fn">chat</span>(messages: <span class="type">MessageParam</span>[]): <span class="type">Promise</span><span class="kw"><</span><span class="type">string</span><span class="kw">></span> {
  <span class="kw">const</span> message: <span class="type">Message</span> <span class="kw">=</span> <span class="kw">await</span> client.messages.<span class="fn">create</span>({
    model: <span class="str">'claude-sonnet-4-5-20250929'</span>,
    max_tokens: <span class="num">1024</span>,
    messages,
  });

  <span class="kw">return</span> message.content[<span class="num">0</span>].text;
}</code></pre>
  </div>

  <h3 id="singleton">3. í´ë¼ì´ì–¸íŠ¸ ì‹±ê¸€í†¤</h3>
  <div class="code-block">
    <div class="code-header">
      <span class="code-lang">lib/claude.ts (ì‹±ê¸€í†¤)</span>
    </div>
    <pre><code><span class="kw">import</span> Anthropic <span class="kw">from</span> <span class="str">'@anthropic-ai/sdk'</span>;

<span class="kw">let</span> client: Anthropic <span class="kw">|</span> <span class="kw">null</span> <span class="kw">=</span> <span class="kw">null</span>;

<span class="kw">export</span> <span class="kw">function</span> <span class="fn">getClaudeClient</span>(): <span class="type">Anthropic</span> {
  <span class="kw">if</span> (<span class="kw">!</span>client) {
    client <span class="kw">=</span> <span class="kw">new</span> <span class="fn">Anthropic</span>();
  }
  <span class="kw">return</span> client;
}

<span class="cmt">// ì‚¬ìš©</span>
<span class="kw">import</span> {getClaudeClient} <span class="kw">from</span> <span class="str">'./lib/claude'</span>;

<span class="kw">const</span> client <span class="kw">=</span> <span class="fn">getClaudeClient</span>();</code></pre>
  </div>
</section>

<section class="content-section">
  <h2 id="testing">í…ŒìŠ¤íŠ¸</h2>

  <div class="code-block">
    <div class="code-header">
      <span class="code-lang">Jest ëª¨í‚¹</span>
      <button class="code-copy" aria-label="ì½”ë“œ ë³µì‚¬">Copy</button>
    </div>
    <pre><code><span class="kw">import</span> {jest} <span class="kw">from</span> <span class="str">'@jest/globals'</span>;
<span class="kw">import</span> Anthropic <span class="kw">from</span> <span class="str">'@anthropic-ai/sdk'</span>;

jest.<span class="fn">mock</span>(<span class="str">'@anthropic-ai/sdk'</span>);

<span class="fn">describe</span>(<span class="str">'Claude Chat'</span>, () <span class="kw">=></span> {
  <span class="fn">it</span>(<span class="str">'should return response'</span>, <span class="kw">async</span> () <span class="kw">=></span> {
    <span class="kw">const</span> mockCreate <span class="kw">=</span> jest.<span class="fn">fn</span>().<span class="fn">mockResolvedValue</span>({
      content: [{text: <span class="str">'Mocked response'</span>}],
      usage: {input_tokens: <span class="num">10</span>, output_tokens: <span class="num">5</span>},
    });

    Anthropic.<span class="fn">prototype</span>.messages <span class="kw">=</span> {create: mockCreate} <span class="kw">as</span> <span class="kw">any</span>;

    <span class="kw">const</span> client <span class="kw">=</span> <span class="kw">new</span> <span class="fn">Anthropic</span>();
    <span class="kw">const</span> result <span class="kw">=</span> <span class="kw">await</span> client.messages.<span class="fn">create</span>({
      model: <span class="str">'claude-sonnet-4-5-20250929'</span>,
      max_tokens: <span class="num">100</span>,
      messages: [{role: <span class="str">'user'</span>, content: <span class="str">'Hi'</span>}],
    });

    <span class="fn">expect</span>(result.content[<span class="num">0</span>].text).<span class="fn">toBe</span>(<span class="str">'Mocked response'</span>);
  });
});</code></pre>
  </div>
</section>

<section class="content-section">
  <h2 id="next-steps">ë‹¤ìŒ ë‹¨ê³„</h2>
  <p>TypeScript SDKë¥¼ ìµí˜”ë‹¤ë©´ ì‹¤ì „ í”„ë¡œì íŠ¸ì— ì ìš©í•´ë³´ì„¸ìš”:</p>

  <ul>
    <li><a href="conversational-agent.html">ëŒ€í™”í˜• ì—ì´ì „íŠ¸</a> - Next.js ì±—ë´‡ êµ¬ì¶•</li>
    <li><a href="code-generation.html">ì½”ë“œ ìƒì„±</a> - CLI ë„êµ¬ ë§Œë“¤ê¸°</li>
    <li><a href="tool-use.html">Tool Use</a> - í•¨ìˆ˜ í˜¸ì¶œ êµ¬í˜„</li>
    <li><a href="streaming.html">ìŠ¤íŠ¸ë¦¬ë°</a> - ì‹¤ì‹œê°„ ì‘ë‹µ ì²˜ë¦¬</li>
  </ul>
</section>

<nav class="page-nav"></nav>

</main>

<aside class="inline-toc"></aside>
<footer class="site-footer"></footer>

</div>
<script src="../js/main.js"></script>
</body>
</html>
