<!DOCTYPE html>
<html lang="ko" data-theme="dark-kernel">
<head>
<script>
(function(){var m=document.cookie.match(/claude_theme=([^;]+)/);if(m)document.documentElement.setAttribute('data-theme',m[1]);})();
</script>
<meta charset="UTF-8">
<meta property="og:type" content="article">
<meta property="og:site_name" content="Claude 문서 /with MINZKN">
<meta property="og:title" content="인증 - Claude 문서">
<meta property="og:description" content="Claude API 키 발급, 관리 및 보안 베스트 프랙티스">
<meta property="og:url" content="https://minzkn.com/claude/pages/authentication.html">
<meta property="og:image" content="https://minzkn.com/claude/images/og-image.png">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="Claude API 키 발급, 관리 및 보안 베스트 프랙티스">
<meta name="keywords" content="Claude API 키, 인증, authentication, API key, 보안">
<meta name="author" content="MINZKN">
<title>인증 - Claude 문서 /with MINZKN</title>
<link rel="icon" type="image/svg+xml" href="../images/favicon.svg">
<link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/joungkyun/font-d2coding/d2coding.css">
<link rel="stylesheet" href="../css/themes.css">
<link rel="stylesheet" href="../css/style.css">
<link rel="stylesheet" href="../css/responsive.css">
</head>
<body>
<div class="page-wrapper">

<header class="site-header"></header>
<nav class="side-nav" aria-label="사이트 내비게이션"></nav>

<main class="main-content">

<nav class="breadcrumb"></nav>

<section class="content-section">
  <h1 id="top">인증 (Authentication)</h1>
  <p class="lead">
    Claude API는 API 키 기반 인증을 사용합니다. 모든 API 요청에는 유효한 API 키가 필요하며,
    이는 HTTP 헤더를 통해 전송됩니다.
  </p>
</section>

<section class="content-section">
  <h2 id="quick-start">처음 시작하기</h2>

  <div class="info-box tip">
    <div class="info-box-title">🎓 처음 Claude API를 사용하시나요?</div>
    <p><strong>3단계로 시작하기:</strong></p>
    <ol>
      <li><strong>API 키 발급</strong> (3분) - Console에서 키 생성 및 복사</li>
      <li><strong>환경 변수 설정</strong> (1분) - <code>export ANTHROPIC_API_KEY="..."</code></li>
      <li><strong>첫 요청 테스트</strong> (1분) - curl 또는 SDK로 "Hello, Claude!" 전송</li>
    </ol>
    <p style="margin-top: 1em;">
      💡 <strong>핵심 개념</strong>: Claude API는 REST API입니다. HTTP 요청 헤더에 <code>x-api-key</code>를 포함하면 모든 프로그래밍 언어에서 사용할 수 있습니다.
    </p>
  </div>
</section>

<section class="content-section">
  <h2 id="getting-api-key">API 키 발급</h2>
  <p>API 키를 발급받으려면 다음 단계를 따르세요:</p>

  <ol>
    <li>
      <strong>Anthropic Console 접속</strong><br>
      <a href="https://console.anthropic.com" target="_blank" rel="noopener">console.anthropic.com</a>에 접속하여 계정을 생성하거나 로그인합니다.
    </li>
    <li>
      <strong>결제 정보 등록</strong><br>
      API 사용을 위해서는 결제 수단을 등록해야 합니다. Settings → Billing에서 크레딧을 충전하거나 자동 결제를 설정합니다.
    </li>
    <li>
      <strong>API 키 생성</strong><br>
      Settings → API Keys로 이동하여 "Create Key" 버튼을 클릭합니다.
    </li>
    <li>
      <strong>키 복사 및 안전하게 저장</strong><br>
      생성된 키는 단 한 번만 표시됩니다. 안전한 곳에 저장하세요. 잃어버리면 재발급해야 합니다.
    </li>
  </ol>

  <div class="info-box warning">
    <div class="info-box-title">⚠️ 중요: API 키 보안</div>
    <p>
      API 키는 <strong>절대로</strong> 공개 저장소, 클라이언트 측 코드, 또는 공유 문서에 포함시키지 마세요.
      유출된 API 키는 즉시 삭제하고 새로 발급받아야 합니다.
    </p>
  </div>

  <!-- API Key Issuance Flow Diagram -->
  <div class="diagram-container">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 700 280"
         style="width:100%;max-width:700px;display:block;margin:1.5em auto;">
      <defs>
        <marker id="auth-1-arrow" viewBox="0 0 10 7" refX="10" refY="3.5"
                markerWidth="10" markerHeight="7" orient="auto">
          <polygon points="0 0, 10 3.5, 0 7" fill="var(--diagram-arrow)"/>
        </marker>
      </defs>

      <!-- Step 1: Console -->
      <rect x="30" y="20" width="140" height="70" rx="8"
            fill="var(--bg-secondary)" stroke="var(--accent-primary)" stroke-width="2"/>
      <text x="100" y="45" text-anchor="middle" fill="var(--accent-primary)" font-size="18" font-weight="bold">1</text>
      <text x="100" y="65" text-anchor="middle" fill="var(--diagram-text)" font-size="12">Console 접속</text>
      <text x="100" y="80" text-anchor="middle" fill="var(--text-secondary)" font-size="10">console.anthropic.com</text>

      <!-- Arrow 1→2 -->
      <line x1="170" y1="55" x2="210" y2="55"
            stroke="var(--diagram-arrow)" stroke-width="2" marker-end="url(#auth-1-arrow)"/>

      <!-- Step 2: Billing -->
      <rect x="210" y="20" width="140" height="70" rx="8"
            fill="var(--bg-secondary)" stroke="var(--accent-primary)" stroke-width="2"/>
      <text x="280" y="45" text-anchor="middle" fill="var(--accent-primary)" font-size="18" font-weight="bold">2</text>
      <text x="280" y="65" text-anchor="middle" fill="var(--diagram-text)" font-size="12">결제 정보 등록</text>
      <text x="280" y="80" text-anchor="middle" fill="var(--text-secondary)" font-size="10">Billing Setup</text>

      <!-- Arrow 2→3 -->
      <line x1="350" y1="55" x2="390" y2="55"
            stroke="var(--diagram-arrow)" stroke-width="2" marker-end="url(#auth-1-arrow)"/>

      <!-- Step 3: Create Key -->
      <rect x="390" y="20" width="140" height="70" rx="8"
            fill="var(--bg-secondary)" stroke="var(--accent-primary)" stroke-width="2"/>
      <text x="460" y="45" text-anchor="middle" fill="var(--accent-primary)" font-size="18" font-weight="bold">3</text>
      <text x="460" y="65" text-anchor="middle" fill="var(--diagram-text)" font-size="12">API 키 생성</text>
      <text x="460" y="80" text-anchor="middle" fill="var(--text-secondary)" font-size="10">Create Key</text>

      <!-- Arrow 3→4 (downward) -->
      <line x1="280" y1="90" x2="280" y2="130"
            stroke="var(--diagram-arrow)" stroke-width="2" marker-end="url(#auth-1-arrow)"/>

      <!-- Step 4: Store Securely -->
      <rect x="210" y="130" width="140" height="70" rx="8"
            fill="var(--accent-primary)" fill-opacity="0.2"
            stroke="var(--accent-primary)" stroke-width="2"/>
      <text x="280" y="155" text-anchor="middle" fill="var(--accent-primary)" font-size="18" font-weight="bold">4</text>
      <text x="280" y="175" text-anchor="middle" fill="var(--diagram-text)" font-size="12">안전하게 저장</text>
      <text x="280" y="190" text-anchor="middle" fill="var(--text-secondary)" font-size="10">환경 변수 / Secret Manager</text>

      <!-- Warning Note -->
      <rect x="30" y="220" width="500" height="50" rx="6"
            fill="var(--info-bg-warning)" stroke="var(--accent-warning)" stroke-width="1.5"/>
      <text x="280" y="240" text-anchor="middle" fill="var(--diagram-text)" font-size="11" font-weight="bold">
        ⚠️ 키는 단 한 번만 표시됩니다
      </text>
      <text x="280" y="258" text-anchor="middle" fill="var(--text-secondary)" font-size="10">
        분실 시 재발급 필요 / 절대 공개 저장소에 커밋하지 마세요
      </text>
    </svg>
    <p class="diagram-caption">그림 1: API 키 발급 프로세스 (4단계)</p>
  </div>
</section>

<section class="content-section">
  <h2 id="using-api-key">API 키 사용</h2>
  <p>
    모든 API 요청에 <code>x-api-key</code> HTTP 헤더를 포함시켜야 합니다.
  </p>

  <h3 id="curl-example">curl 예시</h3>
  <div class="code-block">
    <div class="code-header">
      <span class="code-lang">Bash</span>
      <button class="code-copy" aria-label="코드 복사">Copy</button>
    </div>
    <pre><code>curl https://api.anthropic.com/v1/messages \
  -H <span class="str">"x-api-key: sk-ant-api03-XXX"</span> \
  -H <span class="str">"anthropic-version: 2023-06-01"</span> \
  -H <span class="str">"content-type: application/json"</span> \
  -d <span class="str">'{
    "model": "claude-sonnet-4-5-20250929",
    "max_tokens": 1024,
    "messages": [
      {"role": "user", "content": "Hello, Claude!"}
    ]
  }'</span></code></pre>
  </div>

  <h3 id="environment-variable">환경 변수 사용 (권장)</h3>
  <p>
    API 키를 환경 변수로 설정하면 코드에 직접 키를 노출하지 않을 수 있습니다.
  </p>

  <div class="info-box info">
    <div class="info-box-title">✅ 왜 환경 변수를 사용해야 하나요?</div>
    <ul>
      <li><strong>보안</strong>: 코드에 키가 하드코딩되지 않아 Git 커밋 시 안전</li>
      <li><strong>유연성</strong>: 환경별(개발/프로덕션) 키 쉽게 전환 가능</li>
      <li><strong>표준</strong>: 12 Factor App 원칙 준수, 클라우드 배포에 최적화</li>
      <li><strong>SDK 자동 인식</strong>: Python/TypeScript SDK가 자동으로 <code>ANTHROPIC_API_KEY</code> 읽음</li>
    </ul>
  </div>

  <div class="code-block">
    <div class="code-header">
      <span class="code-lang">Bash (.bashrc / .zshrc)</span>
    </div>
    <pre><code><span class="kw">export</span> <span class="str">ANTHROPIC_API_KEY</span>=<span class="str">"sk-ant-api03-YOUR_KEY_HERE"</span></code></pre>
  </div>

  <div class="code-block">
    <div class="code-header">
      <span class="code-lang">curl with environment variable</span>
    </div>
    <pre><code>curl https://api.anthropic.com/v1/messages \
  -H <span class="str">"x-api-key: $ANTHROPIC_API_KEY"</span> \
  -H <span class="str">"anthropic-version: 2023-06-01"</span> \
  -H <span class="str">"content-type: application/json"</span> \
  -d <span class="str">'{...}'</span></code></pre>
  </div>
</section>

<section class="content-section">
  <h2 id="sdk-authentication">SDK에서 인증</h2>
  <p>공식 SDK는 환경 변수를 자동으로 읽어 인증을 처리합니다.</p>

  <h3 id="python-sdk-auth">Python SDK</h3>
  <div class="code-block">
    <div class="code-header">
      <span class="code-lang">Python</span>
      <button class="code-copy" aria-label="코드 복사">Copy</button>
    </div>
    <pre><code><span class="kw">import</span> os
<span class="kw">from</span> anthropic <span class="kw">import</span> Anthropic

<span class="cmt"># 방법 1: 환경 변수 자동 인식 (권장)</span>
client <span class="kw">=</span> <span class="fn">Anthropic</span>()
<span class="cmt"># ANTHROPIC_API_KEY 환경 변수를 자동으로 읽음</span>

<span class="cmt"># 방법 2: 명시적으로 키 전달</span>
client <span class="kw">=</span> <span class="fn">Anthropic</span>(
    api_key<span class="kw">=</span>os.environ.<span class="fn">get</span>(<span class="str">"ANTHROPIC_API_KEY"</span>)
)

<span class="cmt"># 방법 3: 하드코딩 (비권장 - 개발 테스트용만)</span>
client <span class="kw">=</span> <span class="fn">Anthropic</span>(
    api_key<span class="kw">=</span><span class="str">"sk-ant-api03-XXX"</span>
)</code></pre>
  </div>

  <h3 id="typescript-sdk-auth">TypeScript/JavaScript SDK</h3>
  <div class="code-block">
    <div class="code-header">
      <span class="code-lang">TypeScript</span>
      <button class="code-copy" aria-label="코드 복사">Copy</button>
    </div>
    <pre><code><span class="kw">import</span> Anthropic <span class="kw">from</span> <span class="str">'@anthropic-ai/sdk'</span>;

<span class="cmt">// 방법 1: 환경 변수 자동 인식 (권장)</span>
<span class="kw">const</span> client <span class="kw">=</span> <span class="kw">new</span> <span class="fn">Anthropic</span>();
<span class="cmt">// process.env.ANTHROPIC_API_KEY를 자동으로 읽음</span>

<span class="cmt">// 방법 2: 명시적으로 키 전달</span>
<span class="kw">const</span> client <span class="kw">=</span> <span class="kw">new</span> <span class="fn">Anthropic</span>({
  apiKey: process.env.<span class="str">ANTHROPIC_API_KEY</span>,
});

<span class="cmt">// 방법 3: 하드코딩 (비권장)</span>
<span class="kw">const</span> client <span class="kw">=</span> <span class="kw">new</span> <span class="fn">Anthropic</span>({
  apiKey: <span class="str">'sk-ant-api03-XXX'</span>,
});</code></pre>
  </div>
</section>

<section class="content-section">
  <h2 id="managing-keys">API 키 관리</h2>

  <h3 id="multiple-keys">여러 키 관리</h3>
  <p>
    프로젝트별, 환경별(개발/스테이징/프로덕션)로 별도의 API 키를 생성하여 관리하는 것이 좋습니다.
    이렇게 하면 문제 발생 시 해당 키만 삭제하고 다른 서비스는 정상 작동할 수 있습니다.
  </p>

  <div class="code-block">
    <div class="code-header">
      <span class="code-lang">환경별 키 설정 예시 (.env)</span>
    </div>
    <pre><code><span class="cmt"># 개발 환경</span>
<span class="str">ANTHROPIC_API_KEY_DEV</span>=<span class="str">sk-ant-api03-dev-XXX</span>

<span class="cmt"># 프로덕션 환경</span>
<span class="str">ANTHROPIC_API_KEY_PROD</span>=<span class="str">sk-ant-api03-prod-XXX</span></code></pre>
  </div>

  <h3 id="key-rotation">키 로테이션</h3>
  <p>
    보안 베스트 프랙티스로, 정기적으로(예: 90일마다) API 키를 교체하는 것이 권장됩니다.
  </p>

  <ol>
    <li>새 API 키 생성</li>
    <li>새 키를 환경 변수에 업데이트</li>
    <li>모든 서비스 재배포</li>
    <li>구 키 삭제</li>
  </ol>

  <h3 id="key-revocation">키 삭제</h3>
  <p>
    API 키가 유출되었거나 더 이상 사용하지 않는 경우, Console에서 즉시 삭제해야 합니다.
    삭제된 키로 요청하면 <code>401 Unauthorized</code> 오류가 발생합니다.
  </p>
</section>

<section class="content-section">
  <h2 id="security-best-practices">보안 베스트 프랙티스</h2>

  <h3 id="never-expose">1. 절대 노출하지 마세요</h3>
  <ul>
    <li>Git 저장소에 커밋 ❌</li>
    <li>클라이언트 측 JavaScript에 포함 ❌</li>
    <li>공개 문서, 스크린샷에 포함 ❌</li>
    <li>로그 파일에 출력 ❌</li>
  </ul>

  <h3 id="use-env">2. 환경 변수 사용</h3>
  <div class="code-block">
    <div class="code-header">
      <span class="code-lang">.gitignore 예시</span>
    </div>
    <pre><code><span class="cmt"># 환경 변수 파일 제외</span>
.env
.env.local
.env.*.local

<span class="cmt"># API 키 설정 파일 제외</span>
config/secrets.json
secrets/</code></pre>
  </div>

  <h3 id="backend-only">3. 백엔드에서만 API 호출</h3>
  <p>
    프론트엔드에서 직접 Claude API를 호출하면 API 키가 노출됩니다.
    대신 백엔드 프록시 서버를 통해 호출하세요.
  </p>

  <!-- Secure Architecture Diagram -->
  <div class="diagram-container">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 650 400"
         style="width:100%;max-width:650px;display:block;margin:1.5em auto;">
      <defs>
        <marker id="auth-2-arrow" viewBox="0 0 10 7" refX="10" refY="3.5"
                markerWidth="10" markerHeight="7" orient="auto">
          <polygon points="0 0, 10 3.5, 0 7" fill="var(--diagram-arrow)"/>
        </marker>
        <marker id="auth-2-cross" viewBox="0 0 10 10" refX="5" refY="5"
                markerWidth="10" markerHeight="10">
          <line x1="2" y1="2" x2="8" y2="8" stroke="var(--accent-danger)" stroke-width="2"/>
          <line x1="8" y1="2" x2="2" y2="8" stroke="var(--accent-danger)" stroke-width="2"/>
        </marker>
      </defs>

      <!-- ===== WRONG WAY (Top) ===== -->
      <text x="325" y="25" text-anchor="middle" fill="var(--accent-danger)" font-size="14" font-weight="bold">
        ❌ 잘못된 방법: API 키 노출 위험
      </text>

      <!-- Frontend -->
      <rect x="50" y="45" width="120" height="60" rx="8"
            fill="var(--bg-secondary)" stroke="var(--border-color)" stroke-width="1.5"/>
      <text x="110" y="70" text-anchor="middle" fill="var(--diagram-text)" font-size="12" font-weight="bold">
        Frontend
      </text>
      <text x="110" y="90" text-anchor="middle" fill="var(--text-secondary)" font-size="10">
        (Browser)
      </text>

      <!-- Wrong Arrow with X -->
      <line x1="170" y1="75" x2="320" y2="75"
            stroke="var(--accent-danger)" stroke-width="3" stroke-dasharray="8,4" marker-end="url(#auth-2-cross)"/>
      <text x="245" y="65" text-anchor="middle" fill="var(--accent-danger)" font-size="10" font-weight="bold">
        API Key 노출!
      </text>

      <!-- Claude API (Wrong) -->
      <rect x="320" y="45" width="150" height="60" rx="8"
            fill="var(--bg-secondary)" stroke="var(--border-color)" stroke-width="1.5"/>
      <text x="395" y="70" text-anchor="middle" fill="var(--diagram-text)" font-size="12" font-weight="bold">
        Claude API
      </text>
      <text x="395" y="90" text-anchor="middle" fill="var(--text-secondary)" font-size="10">
        api.anthropic.com
      </text>

      <!-- Warning Box (Wrong Way) -->
      <rect x="490" y="50" width="140" height="50" rx="6"
            fill="var(--info-bg-danger)" stroke="var(--accent-danger)" stroke-width="1.5"/>
      <text x="560" y="70" text-anchor="middle" fill="var(--diagram-text)" font-size="10" font-weight="bold">
        ⚠️ 위험
      </text>
      <text x="560" y="85" text-anchor="middle" fill="var(--text-secondary)" font-size="9">
        브라우저 DevTools에서
      </text>
      <text x="560" y="97" text-anchor="middle" fill="var(--text-secondary)" font-size="9">
        API 키 확인 가능
      </text>

      <!-- Divider -->
      <line x1="30" y1="145" x2="620" y2="145" stroke="var(--border-primary)" stroke-width="2"/>

      <!-- ===== CORRECT WAY (Bottom) ===== -->
      <text x="325" y="180" text-anchor="middle" fill="var(--accent-primary)" font-size="14" font-weight="bold">
        ✅ 올바른 방법: 백엔드 프록시 사용
      </text>

      <!-- Frontend (Correct) -->
      <rect x="50" y="200" width="120" height="60" rx="8"
            fill="var(--bg-secondary)" stroke="var(--accent-primary)" stroke-width="2"/>
      <text x="110" y="225" text-anchor="middle" fill="var(--diagram-text)" font-size="12" font-weight="bold">
        Frontend
      </text>
      <text x="110" y="245" text-anchor="middle" fill="var(--text-secondary)" font-size="10">
        (React/Vue)
      </text>

      <!-- Safe Arrow 1 -->
      <line x1="170" y1="230" x2="250" y2="230"
            stroke="var(--diagram-arrow)" stroke-width="2" marker-end="url(#auth-2-arrow)"/>
      <text x="210" y="220" text-anchor="middle" fill="var(--text-secondary)" font-size="10">
        HTTP Request
      </text>
      <text x="210" y="250" text-anchor="middle" fill="var(--diagram-accent)" font-size="9">
        (키 없음)
      </text>

      <!-- Backend Proxy -->
      <rect x="250" y="200" width="140" height="60" rx="8"
            fill="var(--bg-secondary)" stroke="var(--accent-primary)" stroke-width="2"/>
      <text x="320" y="225" text-anchor="middle" fill="var(--diagram-text)" font-size="12" font-weight="bold">
        Backend
      </text>
      <text x="320" y="245" text-anchor="middle" fill="var(--text-secondary)" font-size="10">
        (Node.js/Python)
      </text>

      <!-- Safe Arrow 2 -->
      <line x1="390" y1="230" x2="470" y2="230"
            stroke="var(--diagram-arrow)" stroke-width="2" marker-end="url(#auth-2-arrow)"/>
      <text x="430" y="220" text-anchor="middle" fill="var(--text-secondary)" font-size="10">
        API Call
      </text>
      <text x="430" y="250" text-anchor="middle" fill="var(--accent-primary)" font-size="9" font-weight="bold">
        (with API Key)
      </text>

      <!-- Claude API (Correct) -->
      <rect x="470" y="200" width="150" height="60" rx="8"
            fill="var(--bg-secondary)" stroke="var(--accent-primary)" stroke-width="2"/>
      <text x="545" y="225" text-anchor="middle" fill="var(--diagram-text)" font-size="12" font-weight="bold">
        Claude API
      </text>
      <text x="545" y="245" text-anchor="middle" fill="var(--text-secondary)" font-size="10">
        api.anthropic.com
      </text>

      <!-- Environment Variable Box -->
      <rect x="210" y="280" width="220" height="70" rx="8"
            fill="var(--accent-glow)" stroke="var(--accent-primary)" stroke-width="1.5"/>
      <text x="320" y="300" text-anchor="middle" fill="var(--diagram-text)" font-size="11" font-weight="bold">
        🔐 환경 변수 / Secret Manager
      </text>
      <text x="320" y="318" text-anchor="middle" fill="var(--text-secondary)" font-size="9">
        ANTHROPIC_API_KEY=sk-ant-***
      </text>
      <text x="320" y="333" text-anchor="middle" fill="var(--text-secondary)" font-size="9">
        백엔드만 접근 가능
      </text>

      <!-- Arrow from Env to Backend -->
      <line x1="320" y1="280" x2="320" y2="260"
            stroke="var(--diagram-accent)" stroke-width="2" stroke-dasharray="4,3" marker-end="url(#auth-2-arrow)"/>
      <text x="350" y="273" text-anchor="start" fill="var(--text-secondary)" font-size="9">
        읽기
      </text>

      <!-- Security Note -->
      <rect x="50" y="365" width="570" height="25" rx="6"
            fill="var(--info-bg-info)" stroke="var(--accent-info)" stroke-width="1.5"/>
      <text x="335" y="382" text-anchor="middle" fill="var(--diagram-text)" font-size="10">
        💡 프론트엔드는 절대 API 키에 접근할 수 없으며, 백엔드가 모든 API 호출을 중개합니다
      </text>
    </svg>
    <p class="diagram-caption">그림 2: 안전한 API 키 관리 아키텍처 - 백엔드 프록시 패턴</p>
  </div>

  <h3 id="secret-managers">4. 시크릿 관리 시스템 사용</h3>
  <p>프로덕션 환경에서는 전문 시크릿 관리 도구를 사용하세요:</p>

  <ul>
    <li><strong>AWS Secrets Manager</strong></li>
    <li><strong>Google Cloud Secret Manager</strong></li>
    <li><strong>Azure Key Vault</strong></li>
    <li><strong>HashiCorp Vault</strong></li>
    <li><strong>Doppler</strong></li>
  </ul>

  <div class="code-block">
    <div class="code-header">
      <span class="code-lang">AWS Secrets Manager 예시 (Python)</span>
      <button class="code-copy" aria-label="코드 복사">Copy</button>
    </div>
    <pre><code><span class="kw">import</span> boto3
<span class="kw">import</span> json
<span class="kw">from</span> anthropic <span class="kw">import</span> Anthropic

<span class="kw">def</span> <span class="fn">get_api_key</span>():
    session <span class="kw">=</span> boto3.<span class="fn">session</span>.<span class="fn">Session</span>()
    client <span class="kw">=</span> session.<span class="fn">client</span>(service_name<span class="kw">=</span><span class="str">'secretsmanager'</span>)

    response <span class="kw">=</span> client.<span class="fn">get_secret_value</span>(SecretId<span class="kw">=</span><span class="str">'anthropic-api-key'</span>)
    secret <span class="kw">=</span> json.<span class="fn">loads</span>(response[<span class="str">'SecretString'</span>])

    <span class="kw">return</span> secret[<span class="str">'ANTHROPIC_API_KEY'</span>]

<span class="cmt"># 사용</span>
api_key <span class="kw">=</span> <span class="fn">get_api_key</span>()
claude <span class="kw">=</span> <span class="fn">Anthropic</span>(api_key<span class="kw">=</span>api_key)</code></pre>
  </div>

  <h3 id="rate-limiting">5. Rate Limiting 구현</h3>
  <p>
    백엔드에서 사용자별 요청 횟수를 제한하여 API 키 남용을 방지하세요.
  </p>

  <div class="code-block">
    <div class="code-header">
      <span class="code-lang">Express.js Rate Limiting 예시</span>
      <button class="code-copy" aria-label="코드 복사">Copy</button>
    </div>
    <pre><code><span class="kw">import</span> rateLimit <span class="kw">from</span> <span class="str">'express-rate-limit'</span>;

<span class="kw">const</span> limiter <span class="kw">=</span> <span class="fn">rateLimit</span>({
  windowMs: <span class="num">15</span> <span class="kw">*</span> <span class="num">60</span> <span class="kw">*</span> <span class="num">1000</span>, <span class="cmt">// 15분</span>
  max: <span class="num">100</span>, <span class="cmt">// IP당 최대 100회 요청</span>
  message: <span class="str">'너무 많은 요청을 보냈습니다. 잠시 후 다시 시도하세요.'</span>,
});

app.<span class="fn">use</span>(<span class="str">'/api/claude'</span>, limiter);</code></pre>
  </div>
</section>

<section class="content-section">
  <h2 id="monitoring">API 사용량 모니터링</h2>
  <p>
    Anthropic Console의 Usage 탭에서 API 사용량을 실시간으로 모니터링할 수 있습니다.
  </p>

  <h3 id="usage-metrics">확인 가능한 지표</h3>
  <ul>
    <li><strong>Total Requests</strong>: 총 API 호출 수</li>
    <li><strong>Tokens Used</strong>: 입력/출력 토큰 합계</li>
    <li><strong>Cost</strong>: 총 비용 (USD)</li>
    <li><strong>Errors</strong>: 오류 발생 횟수</li>
  </ul>

  <div class="info-box tip">
    <div class="info-box-title">💡 비용 알림 설정</div>
    <p>
      Console에서 월별 사용량 한도를 설정하고, 한도 도달 시 이메일 알림을 받을 수 있습니다.
      예상치 못한 과금을 방지하려면 반드시 알림을 설정하세요.
    </p>
  </div>
</section>

<section class="content-section">
  <h2 id="troubleshooting">인증 문제 해결</h2>

  <h3 id="401-error">401 Unauthorized</h3>
  <div class="code-block">
    <div class="code-header">
      <span class="code-lang">Error Response</span>
    </div>
    <pre><code>{
  <span class="str">"type"</span>: <span class="str">"error"</span>,
  <span class="str">"error"</span>: {
    <span class="str">"type"</span>: <span class="str">"authentication_error"</span>,
    <span class="str">"message"</span>: <span class="str">"invalid x-api-key"</span>
  }
}</code></pre>
  </div>

  <p><strong>원인:</strong></p>
  <ul>
    <li>API 키가 잘못되었거나 삭제됨</li>
    <li><code>x-api-key</code> 헤더 누락</li>
    <li>환경 변수가 설정되지 않음</li>
  </ul>

  <p><strong>해결:</strong></p>
  <ol>
    <li>Console에서 API 키 상태 확인</li>
    <li>환경 변수 <code>echo $ANTHROPIC_API_KEY</code> 확인</li>
    <li>헤더 이름 정확히 확인 (<code>x-api-key</code>, 대소문자 무관)</li>
  </ol>

  <h3 id="403-error">403 Forbidden</h3>
  <p><strong>원인:</strong> 계정에 충분한 크레딧이 없거나 권한 부족</p>
  <p><strong>해결:</strong> Console → Billing에서 크레딧 충전 또는 결제 정보 확인</p>
</section>

<section class="content-section">
  <h2 id="test-first-call">첫 번째 API 호출 테스트 (1분 완성)</h2>
  <p>
    API 키 설정이 완료되었다면 간단한 curl 명령으로 즉시 테스트할 수 있습니다.
  </p>

  <div class="code-block">
    <div class="code-header">
      <span class="code-lang">Bash (Terminal)</span>
      <button class="code-copy" aria-label="코드 복사">Copy</button>
    </div>
    <pre><code><span class="cmt"># 1. 환경 변수 확인</span>
echo $ANTHROPIC_API_KEY

<span class="cmt"># 2. 첫 번째 API 호출 (간단한 인사)</span>
curl https://api.anthropic.com/v1/messages \
  -H <span class="str">"x-api-key: $ANTHROPIC_API_KEY"</span> \
  -H <span class="str">"anthropic-version: 2023-06-01"</span> \
  -H <span class="str">"content-type: application/json"</span> \
  -d <span class="str">'{
    "model": "claude-sonnet-4-5-20250929",
    "max_tokens": 100,
    "messages": [
      {"role": "user", "content": "안녕하세요, Claude! 간단히 인사해주세요."}
    ]
  }'</span></code></pre>
  </div>

  <div class="info-box tip">
    <div class="info-box-title">💡 예상 결과</div>
    <p>성공 시 다음과 같은 JSON 응답을 받게 됩니다:</p>
    <pre style="background: var(--bg-secondary); padding: 1em; border-radius: 6px; font-size: 0.9em; overflow-x: auto;"><code>{
  "id": "msg_01ABC...",
  "type": "message",
  "role": "assistant",
  "content": [
    {
      "type": "text",
      "text": "안녕하세요! 반갑습니다. 도와드릴 일이 있으신가요?"
    }
  ],
  "model": "claude-sonnet-4-5-20250929",
  "usage": {
    "input_tokens": 15,
    "output_tokens": 25
  }
}</code></pre>
    <p style="margin-top: 1em;">
      ✅ 이 응답을 받았다면 인증이 정상적으로 작동하는 것입니다!
    </p>
  </div>

  <div class="info-box warning">
    <div class="info-box-title">⚠️ 에러가 발생하나요?</div>
    <ul>
      <li><strong>401 Unauthorized</strong>: API 키 확인 (<code>echo $ANTHROPIC_API_KEY</code>)</li>
      <li><strong>403 Forbidden</strong>: Console에서 크레딧 잔액 확인</li>
      <li><strong>Connection refused</strong>: 인터넷 연결 및 프록시 설정 확인</li>
    </ul>
    <p style="margin-top: 0.5em;">
      자세한 내용은 <a href="#troubleshooting">인증 문제 해결</a> 섹션을 참조하세요.
    </p>
  </div>
</section>

<section class="content-section">
  <h2 id="next-steps">다음 단계</h2>
  <p>인증 설정을 완료했다면 첫 API 요청을 보내보세요:</p>

  <ul>
    <li><a href="quickstart.html">빠른 시작</a> - 첫 번째 API 호출</li>
    <li><a href="messages-api.html">메시지 API</a> - 대화 처리 상세 가이드</li>
    <li><a href="python-sdk.html">Python SDK</a> - Python에서 사용하기</li>
    <li><a href="typescript-sdk.html">TypeScript SDK</a> - TypeScript/JavaScript에서 사용하기</li>
  </ul>
</section>

<nav class="page-nav"></nav>

</main>

<aside class="inline-toc"></aside>
<footer class="site-footer"></footer>

</div>
<script src="../js/main.js"></script>
</body>
</html>
