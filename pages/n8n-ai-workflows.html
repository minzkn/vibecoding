<!DOCTYPE html>
<html lang="ko" data-theme="dark-kernel">
<head>
<!-- BEGIN: Google adsense -->
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2110881342960271" crossorigin="anonymous"></script>
<!-- END: Google adsense -->
<!-- BEGIN: Google adsense repair -->
<script async src="https://fundingchoicesmessages.google.com/i/pub-2110881342960271?ers=1" nonce="laI6FT8gpRxugDJv5AGJRA"></script><script nonce="laI6FT8gpRxugDJv5AGJRA">(function() {function signalGooglefcPresent() {if (!window.frames['googlefcPresent']) {if (document.body) {const iframe = document.createElement('iframe'); iframe.style = 'width: 0; height: 0; border: none; z-index: -1000; left: -1000px; top: -1000px;'; iframe.style.display = 'none'; iframe.name = 'googlefcPresent'; document.body.appendChild(iframe);} else {setTimeout(signalGooglefcPresent, 0);}}}signalGooglefcPresent();})();</script>
<!-- END: Google adsense repair -->
<!-- BEGIN: Google analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-1VWQF060SX"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-1VWQF060SX');
</script>
<!-- END: Google analytics -->
<script>
(function(){var m=document.cookie.match(/claude_theme=([^;]+)/);if(m)document.documentElement.setAttribute('data-theme',m[1]);})();
</script>
<meta charset="UTF-8">
<meta property="og:type" content="article">
<meta property="og:site_name" content="AI Vibe Coding ê°€ì´ë“œ /with MINZKN">
<meta property="og:title" content="n8n AI ì›Œí¬í”Œë¡œìš° êµ¬ì¶•">
<meta property="og:description" content="n8nìœ¼ë¡œ ClaudeÂ·OpenAI ì—°ë™ AI ì—ì´ì „íŠ¸, RAG íŒŒì´í”„ë¼ì¸, ì¶œë ¥ íŒŒì„œ, ë©€í‹°ì—ì´ì „íŠ¸, ì‹¤ì „ ì‚¬ë¡€ ì™„ì „ ê°€ì´ë“œ">
<meta property="og:url" content="https://minzkn.com/claude/pages/n8n-ai-workflows.html">
<meta property="og:image" content="https://minzkn.com/claude/images/og-image.png">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="n8nìœ¼ë¡œ ClaudeÂ·OpenAI ì—°ë™ AI ì—ì´ì „íŠ¸, RAG íŒŒì´í”„ë¼ì¸, ì¶œë ¥ íŒŒì„œ, ë©€í‹°ì—ì´ì „íŠ¸, ì‹¤ì „ ì‚¬ë¡€ ì™„ì „ ê°€ì´ë“œ">
<meta name="keywords" content="n8n AI, Claude ì—°ë™, OpenAI ë…¸ë“œ, AI Agent, RAG, ì›Œí¬í”Œë¡œìš° ìë™í™”, LLM íŒŒì´í”„ë¼ì¸, ë©€í‹°ì—ì´ì „íŠ¸, ì¶œë ¥íŒŒì„œ, ë²¡í„°ìŠ¤í† ì–´">
<meta name="author" content="MINZKN">
<title>n8n AI ì›Œí¬í”Œë¡œìš° êµ¬ì¶• - AI Vibe Coding ê°€ì´ë“œ /with MINZKN</title>
<link rel="icon" type="image/svg+xml" href="../images/favicon.svg">
<link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/joungkyun/font-d2coding/d2coding.css">
<link rel="stylesheet" href="../css/themes.css">
<link rel="stylesheet" href="../css/style.css">
<link rel="stylesheet" href="../css/responsive.css">
</head>
<body>
<div class="page-wrapper">

<header class="site-header"></header>
<nav class="side-nav" aria-label="ì‚¬ì´íŠ¸ ë‚´ë¹„ê²Œì´ì…˜"></nav>

<main class="main-content">
<div class="breadcrumb"></div>

<h1 id="top">n8n AI ì›Œí¬í”Œë¡œìš° êµ¬ì¶•</h1>
<p class="lead">ClaudeÂ·OpenAIÂ·GeminiÂ·Ollamaë¥¼ n8nê³¼ ì—°ë™í•˜ì—¬ AI ì—ì´ì „íŠ¸Â·RAGÂ·ë©€í‹°ì—ì´ì „íŠ¸Â·Human-in-the-Loop íŒŒì´í”„ë¼ì¸ì„ êµ¬ì¶•í•˜ëŠ” ì™„ì „ ì‹¤ì „ ê°€ì´ë“œ</p>

<div class="info-box warning">
  <strong>ì „ì œ ì¡°ê±´:</strong> n8nì´ ì„¤ì¹˜ë˜ì–´ ìˆì–´ì•¼ í•©ë‹ˆë‹¤. â†’ <a href="n8n-intro.html#installation">n8n ì„¤ì¹˜ ê°€ì´ë“œ</a>
</div>

<section class="content-section">
  <h2 id="ai-nodes-overview">n8n AI ë…¸ë“œ ìƒíƒœê³„</h2>

  <p>
    n8nì€ <strong>LangChain</strong> ê¸°ë°˜ì˜ AI ë…¸ë“œë“¤ì„ ê¸°ë³¸ ì œê³µí•©ë‹ˆë‹¤.
    ì½”ë“œ ì—†ì´ AI ì—ì´ì „íŠ¸, RAG íŒŒì´í”„ë¼ì¸, ë©€í‹°ëª¨ë‹¬ ì²˜ë¦¬ë¥¼ ì›Œí¬í”Œë¡œìš°ë¡œ êµ¬ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
  </p>

  <svg viewBox="0 0 800 500" class="diagram" role="img" aria-label="n8n AI ë…¸ë“œ ê³„ì¸µ êµ¬ì¡°">
    <defs>
      <marker id="n8n-ai-arrow" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
        <polygon points="0 0, 10 3, 0 6" fill="var(--diagram-arrow)" />
      </marker>
    </defs>
    <rect x="250" y="20" width="300" height="60" fill="var(--diagram-fill)" stroke="var(--diagram-accent)" stroke-width="2.5" rx="8"/>
    <text x="400" y="48" fill="var(--diagram-accent)" text-anchor="middle" font-size="15" font-weight="bold">AI Agent ë…¸ë“œ</text>
    <text x="400" y="68" fill="var(--text-secondary)" text-anchor="middle" font-size="11">ììœ¨ íŒë‹¨ + ë„êµ¬ ì‚¬ìš© (ReAct)</text>
    <line x1="400" y1="80" x2="400" y2="105" stroke="var(--diagram-arrow)" stroke-width="1.5" marker-end="url(#n8n-ai-arrow)"/>
    <rect x="250" y="105" width="300" height="60" fill="var(--diagram-fill)" stroke="var(--diagram-stroke)" stroke-width="1.5" rx="8"/>
    <text x="400" y="132" fill="var(--diagram-text)" text-anchor="middle" font-size="14" font-weight="bold">Basic LLM Chain / Summarization / Q&amp;A</text>
    <text x="400" y="152" fill="var(--text-secondary)" text-anchor="middle" font-size="11">í”„ë¡¬í”„íŠ¸ â†’ LLM â†’ ì¶œë ¥ (ë‹¨ìˆœ ì²´ì¸)</text>
    <line x1="310" y1="165" x2="180" y2="205" stroke="var(--diagram-arrow)" stroke-width="1.5" marker-end="url(#n8n-ai-arrow)"/>
    <line x1="400" y1="165" x2="400" y2="205" stroke="var(--diagram-arrow)" stroke-width="1.5" marker-end="url(#n8n-ai-arrow)"/>
    <line x1="490" y1="165" x2="620" y2="205" stroke="var(--diagram-arrow)" stroke-width="1.5" marker-end="url(#n8n-ai-arrow)"/>
    <rect x="70" y="205" width="160" height="55" fill="var(--diagram-fill)" stroke="var(--diagram-stroke)" stroke-width="1.5" rx="6"/>
    <text x="150" y="228" fill="var(--diagram-text)" text-anchor="middle" font-size="13" font-weight="bold">Anthropic (Claude)</text>
    <text x="150" y="248" fill="var(--text-secondary)" text-anchor="middle" font-size="11">claude-opus-4-6 ë“±</text>
    <rect x="320" y="205" width="160" height="55" fill="var(--diagram-fill)" stroke="var(--diagram-stroke)" stroke-width="1.5" rx="6"/>
    <text x="400" y="228" fill="var(--diagram-text)" text-anchor="middle" font-size="13" font-weight="bold">OpenAI Chat Model</text>
    <text x="400" y="248" fill="var(--text-secondary)" text-anchor="middle" font-size="11">gpt-4o, gpt-4o-mini</text>
    <rect x="570" y="205" width="160" height="55" fill="var(--diagram-fill)" stroke="var(--diagram-stroke)" stroke-width="1.5" rx="6"/>
    <text x="650" y="228" fill="var(--diagram-text)" text-anchor="middle" font-size="13" font-weight="bold">Ollama / Groq</text>
    <text x="650" y="248" fill="var(--text-secondary)" text-anchor="middle" font-size="11">ë¡œì»¬ / ê³ ì† ì¶”ë¡ </text>
    <line x1="200" y1="290" x2="100" y2="335" stroke="var(--diagram-arrow)" stroke-width="1.5" marker-end="url(#n8n-ai-arrow)"/>
    <line x1="200" y1="290" x2="310" y2="335" stroke="var(--diagram-arrow)" stroke-width="1.5" marker-end="url(#n8n-ai-arrow)"/>
    <rect x="20" y="335" width="160" height="55" fill="var(--diagram-fill)" stroke="var(--diagram-stroke)" stroke-width="1.5" rx="6"/>
    <text x="100" y="358" fill="var(--diagram-text)" text-anchor="middle" font-size="12" font-weight="bold">Window Buffer Memory</text>
    <text x="100" y="378" fill="var(--text-secondary)" text-anchor="middle" font-size="11">ìµœê·¼ Nê°œ ëŒ€í™”</text>
    <rect x="200" y="335" width="160" height="55" fill="var(--diagram-fill)" stroke="var(--diagram-stroke)" stroke-width="1.5" rx="6"/>
    <text x="280" y="358" fill="var(--diagram-text)" text-anchor="middle" font-size="12" font-weight="bold">Redis Chat Memory</text>
    <text x="280" y="378" fill="var(--text-secondary)" text-anchor="middle" font-size="11">ì˜ì† ì„¸ì…˜ ë©”ëª¨ë¦¬</text>
    <line x1="600" y1="290" x2="490" y2="335" stroke="var(--diagram-arrow)" stroke-width="1.5" marker-end="url(#n8n-ai-arrow)"/>
    <line x1="600" y1="290" x2="680" y2="335" stroke="var(--diagram-arrow)" stroke-width="1.5" marker-end="url(#n8n-ai-arrow)"/>
    <rect x="390" y="335" width="160" height="55" fill="var(--diagram-fill)" stroke="var(--diagram-stroke)" stroke-width="1.5" rx="6"/>
    <text x="470" y="358" fill="var(--diagram-text)" text-anchor="middle" font-size="12" font-weight="bold">HTTP Request Tool</text>
    <text x="470" y="378" fill="var(--text-secondary)" text-anchor="middle" font-size="11">ì™¸ë¶€ API í˜¸ì¶œ</text>
    <rect x="570" y="335" width="160" height="55" fill="var(--diagram-fill)" stroke="var(--diagram-stroke)" stroke-width="1.5" rx="6"/>
    <text x="650" y="358" fill="var(--diagram-text)" text-anchor="middle" font-size="12" font-weight="bold">Workflow Tool</text>
    <text x="650" y="378" fill="var(--text-secondary)" text-anchor="middle" font-size="11">ì„œë¸Œì›Œí¬í”Œë¡œìš° ì‹¤í–‰</text>
    <rect x="250" y="430" width="300" height="55" fill="var(--diagram-fill)" stroke="var(--diagram-stroke)" stroke-width="1.5" rx="6"/>
    <text x="400" y="453" fill="var(--diagram-text)" text-anchor="middle" font-size="13" font-weight="bold">Vector Store (RAG)</text>
    <text x="400" y="473" fill="var(--text-secondary)" text-anchor="middle" font-size="11">Pinecone / Qdrant / Supabase pgvector / In-Memory</text>
    <line x1="400" y1="390" x2="400" y2="430" stroke="var(--diagram-arrow)" stroke-width="1.5" marker-end="url(#n8n-ai-arrow)"/>
  </svg>
  <p class="diagram-caption">n8n AI ë…¸ë“œ ê³„ì¸µ: AI Agentê°€ LLM ëª¨ë¸Â·ë©”ëª¨ë¦¬Â·ë„êµ¬ë¥¼ ì¡°í•©í•˜ì—¬ ììœ¨ ì‹¤í–‰</p>

  <h3 id="ai-node-catalog">AI ë…¸ë“œ ì „ì²´ ì¹´íƒˆë¡œê·¸</h3>

  <table>
    <thead>
      <tr><th>ì¹´í…Œê³ ë¦¬</th><th>ë…¸ë“œ</th><th>ì—­í• </th></tr>
    </thead>
    <tbody>
      <tr><td rowspan="4"><strong>Chain</strong></td><td>Basic LLM Chain</td><td>í”„ë¡¬í”„íŠ¸ â†’ LLM â†’ í…ìŠ¤íŠ¸ ì¶œë ¥</td></tr>
      <tr><td>Summarization Chain</td><td>ê¸´ ë¬¸ì„œ ìš”ì•½ (Map-Reduce ë˜ëŠ” Stuffing)</td></tr>
      <tr><td>Retrieval Q&amp;A Chain</td><td>ë¬¸ì„œ ê¸°ë°˜ Q&amp;A (ë²¡í„° ìŠ¤í† ì–´ ê²°í•©)</td></tr>
      <tr><td>Conversational Chain</td><td>ë©”ëª¨ë¦¬ í¬í•¨ ëŒ€í™”í˜• ì²´ì¸</td></tr>
      <tr><td><strong>Agent</strong></td><td>AI Agent</td><td>ReAct íŒ¨í„´, ììœ¨ ë„êµ¬ ì„ íƒÂ·ì‹¤í–‰</td></tr>
      <tr><td rowspan="6"><strong>LLM ëª¨ë¸</strong></td><td>Anthropic Chat Model</td><td>Claude API (claude-opus-4-6 ë“±)</td></tr>
      <tr><td>OpenAI Chat Model</td><td>GPT-4o, GPT-4o-mini ë“±</td></tr>
      <tr><td>Google Gemini Chat Model</td><td>Gemini 1.5 Pro/Flash</td></tr>
      <tr><td>Ollama Chat Model</td><td>ë¡œì»¬ LLM (Llama, Mistral ë“±)</td></tr>
      <tr><td>Groq Chat Model</td><td>ì´ˆê³ ì† Llama ì¶”ë¡  (ë¬´ë£Œ í‹°ì–´)</td></tr>
      <tr><td>Azure OpenAI Chat Model</td><td>Azure ë°°í¬ GPT ëª¨ë¸</td></tr>
      <tr><td rowspan="4"><strong>ë©”ëª¨ë¦¬</strong></td><td>Window Buffer Memory</td><td>ìµœê·¼ Nê°œ ë©”ì‹œì§€ ë³´ê´€ (ì¸ë©”ëª¨ë¦¬)</td></tr>
      <tr><td>Redis Chat Memory</td><td>Redis ê¸°ë°˜ ì„¸ì…˜ë³„ ì˜ì† ë©”ëª¨ë¦¬</td></tr>
      <tr><td>Postgres Chat Memory</td><td>PostgreSQL ê¸°ë°˜ ì˜ì† ë©”ëª¨ë¦¬</td></tr>
      <tr><td>Motorhead Memory</td><td>Motorhead ì„œë²„ ê¸°ë°˜ ìš”ì•½ ë©”ëª¨ë¦¬</td></tr>
      <tr><td rowspan="5"><strong>ë²¡í„° ìŠ¤í† ì–´</strong></td><td>In-Memory Vector Store</td><td>ì„ì‹œ ë©”ëª¨ë¦¬ ë²¡í„° (í…ŒìŠ¤íŠ¸ìš©)</td></tr>
      <tr><td>Pinecone Vector Store</td><td>Pinecone í´ë¼ìš°ë“œ</td></tr>
      <tr><td>Qdrant Vector Store</td><td>Qdrant ì…€í”„í˜¸ìŠ¤íŒ…</td></tr>
      <tr><td>Supabase Vector Store</td><td>Supabase pgvector</td></tr>
      <tr><td>Chroma Vector Store</td><td>ChromaDB ì…€í”„í˜¸ìŠ¤íŒ…</td></tr>
      <tr><td rowspan="3"><strong>ì„ë² ë”©</strong></td><td>OpenAI Embeddings</td><td>text-embedding-3-small/large</td></tr>
      <tr><td>Anthropic (via HTTP)</td><td>voyage-3 ë“± ë³„ë„ í˜¸ì¶œ</td></tr>
      <tr><td>Ollama Embeddings</td><td>ë¡œì»¬ ì„ë² ë”© (ë¬´ë£Œ)</td></tr>
      <tr><td rowspan="5"><strong>ë¬¸ì„œ ë¡œë”</strong></td><td>Default Data Loader</td><td>Binary ë°ì´í„°(PDF, DOCX, CSV ë“±)</td></tr>
      <tr><td>GitHub Document Loader</td><td>GitHub ì €ì¥ì†Œ íŒŒì¼ ë¡œë“œ</td></tr>
      <tr><td>Notion Document Loader</td><td>Notion í˜ì´ì§€/DB ë¡œë“œ</td></tr>
      <tr><td>JSON Document Loader</td><td>JSON íŒŒì¼ ë¡œë“œ</td></tr>
      <tr><td>Recursive URL Loader</td><td>ì›¹ì‚¬ì´íŠ¸ í¬ë¡¤ë§ + ë¡œë“œ</td></tr>
      <tr><td rowspan="3"><strong>í…ìŠ¤íŠ¸ ë¶„í• </strong></td><td>Recursive Character Text Splitter</td><td>ë²”ìš© (ê¶Œì¥)</td></tr>
      <tr><td>Character Text Splitter</td><td>ë‹¨ìˆœ ë¬¸ì ê¸°ì¤€ ë¶„í• </td></tr>
      <tr><td>Token Text Splitter</td><td>í† í° ìˆ˜ ê¸°ì¤€ ì •í™•í•œ ë¶„í• </td></tr>
      <tr><td rowspan="3"><strong>ì¶œë ¥ íŒŒì„œ</strong></td><td>Auto-fixing Output Parser</td><td>íŒŒì‹± ì‹¤íŒ¨ ì‹œ LLMì´ ìë™ ìˆ˜ì •</td></tr>
      <tr><td>Structured Output Parser</td><td>JSON Schema ê¸°ë°˜ êµ¬ì¡°í™” ì¶œë ¥</td></tr>
      <tr><td>Item List Output Parser</td><td>ëª©ë¡ í˜•íƒœ ì¶œë ¥ íŒŒì‹±</td></tr>
      <tr><td rowspan="5"><strong>ë„êµ¬ (Tool)</strong></td><td>Calculator</td><td>ìˆ˜í•™ ê³„ì‚°</td></tr>
      <tr><td>HTTP Request Tool</td><td>ì—ì´ì „íŠ¸ê°€ ì™¸ë¶€ API í˜¸ì¶œ</td></tr>
      <tr><td>Wikipedia</td><td>Wikipedia ê²€ìƒ‰</td></tr>
      <tr><td>SerpAPI</td><td>Google ê²€ìƒ‰ ê²°ê³¼</td></tr>
      <tr><td>n8n Workflow Tool</td><td>ì„œë¸Œì›Œí¬í”Œë¡œìš°ë¥¼ ë„êµ¬ë¡œ ì‚¬ìš©</td></tr>
    </tbody>
  </table>
</section>

<section class="content-section">
  <h2 id="claude-integration">Claude (Anthropic) ì—°ë™ ì‹¬í™”</h2>

  <h3 id="claude-credentials">ìê²©ì¦ëª… ì„¤ì •</h3>

  <pre><code><span class="cmt"># UIì—ì„œ ìê²©ì¦ëª… ì¶”ê°€</span>
Settings â†’ Credentials â†’ Add Credential â†’ Anthropic

API Key: sk-ant-api03-...

<span class="cmt"># ë˜ëŠ” í™˜ê²½ ë³€ìˆ˜ (n8nì´ ìë™ìœ¼ë¡œ ìê²©ì¦ëª… ìƒì„±)</span>
ANTHROPIC_API_KEY=sk-ant-api03-...</code></pre>

  <h3 id="claude-llm-chain">Basic LLM Chain êµ¬ì„±</h3>

  <pre><code><span class="cmt"># Basic LLM Chain ë…¸ë“œ ì„¤ì •</span>
Chat Model â†’ Anthropic Chat Model
  Model: claude-opus-4-6
  Max Tokens: 4096
  Temperature: 0.7
  Top P: 0.9
  Extended Thinking: OFF (ê³ ê¸‰ ì¶”ë¡  ì‹œ ON)

Prompt:
  System: |
    ë‹¹ì‹ ì€ ì „ë¬¸ì ì¸ ì½”ë“œ ë¦¬ë·°ì–´ì…ë‹ˆë‹¤.
    ì½”ë“œì˜ ë¬¸ì œì ì„ êµ¬ì²´ì ìœ¼ë¡œ ì§€ì í•˜ê³  ê°œì„  ë°©ì•ˆì„ ì œì‹œí•˜ì„¸ìš”.
    ì‘ë‹µì€ ë°˜ë“œì‹œ í•œêµ­ì–´ë¡œ ì‘ì„±í•˜ì„¸ìš”.
  Human: {{ $json.code }}</code></pre>

  <h3 id="claude-direct-api">HTTP Requestë¡œ Claude API ì§ì ‘ í˜¸ì¶œ</h3>

  <p>ë©€í‹°ëª¨ë‹¬(ì´ë¯¸ì§€ ë¶„ì„), ìŠ¤íŠ¸ë¦¬ë°, ìºì‹œ ì œì–´ ë“± ê³ ê¸‰ ê¸°ëŠ¥ì€ HTTP Request ë…¸ë“œë¡œ ì§ì ‘ í˜¸ì¶œí•©ë‹ˆë‹¤.</p>

  <pre><code><span class="cmt"># HTTP Request ë…¸ë“œ â€” Claude API ì§ì ‘ í˜¸ì¶œ</span>
Method: POST
URL: https://api.anthropic.com/v1/messages
Headers:
  x-api-key: {{ $env.ANTHROPIC_API_KEY }}
  anthropic-version: 2023-06-01
  content-type: application/json
  anthropic-beta: prompt-caching-2024-07-31   <span class="cmt"># í”„ë¡¬í”„íŠ¸ ìºì‹±</span>

Body (JSON):
{
  "model": "claude-opus-4-6",
  "max_tokens": 4096,
  "system": [
    {
      "type": "text",
      "text": "{{ $json.systemPrompt }}",
      "cache_control": { "type": "ephemeral" }
    }
  ],
  "messages": [
    {
      "role": "user",
      "content": "{{ $json.userMessage }}"
    }
  ]
}</code></pre>

  <pre><code><span class="cmt">// ì‘ë‹µ íŒŒì‹± (Code ë…¸ë“œ)</span>
<span class="kw">const</span> resp = $json;
<span class="kw">return</span> [{
  json: {
    answer:       resp.content[<span class="num">0</span>].text,
    inputTokens:  resp.usage.input_tokens,
    outputTokens: resp.usage.output_tokens,
    cacheRead:    resp.usage.cache_read_input_tokens ?? <span class="num">0</span>,
    cacheWrite:   resp.usage.cache_creation_input_tokens ?? <span class="num">0</span>,
    stopReason:   resp.stop_reason,
    <span class="cmt">// ë¹„ìš© ì¶”ì • (claude-opus-4-6 ê¸°ì¤€)</span>
    costUSD: (resp.usage.input_tokens / <span class="num">1e6</span> * <span class="num">3</span>) +
             (resp.usage.output_tokens / <span class="num">1e6</span> * <span class="num">15</span>),
  }
}];</code></pre>

  <h3 id="claude-vision">ì´ë¯¸ì§€ ë¶„ì„ (Vision)</h3>

  <pre><code><span class="cmt"># ì´ë¯¸ì§€ URL â†’ Claude Vision ë¶„ì„</span>
<span class="cmt">## HTTP Request ë…¸ë“œ Body</span>
{
  "model": "claude-opus-4-6",
  "max_tokens": 2048,
  "messages": [
    {
      "role": "user",
      "content": [
        {
          "type": "image",
          "source": {
            "type": "url",
            "url": "{{ $json.imageUrl }}"
          }
        },
        {
          "type": "text",
          "text": "ì´ ì´ë¯¸ì§€ë¥¼ ìì„¸íˆ ì„¤ëª…í•˜ê³ , ì£¼ìš” ê°ì²´ë¥¼ JSON ë°°ì—´ë¡œ ë‚˜ì—´í•˜ì„¸ìš”."
        }
      ]
    }
  ]
}</code></pre>

  <pre><code><span class="cmt"># Binary ì´ë¯¸ì§€ â†’ Base64 â†’ Claude</span>

<span class="cmt">## Code ë…¸ë“œ â€” Binaryë¥¼ Base64ë¡œ ë³€í™˜</span>
<span class="kw">const</span> item = $input.first();
<span class="kw">const</span> base64 = item.binary.data.data;  <span class="cmt">// ì´ë¯¸ base64</span>
<span class="kw">const</span> mimeType = item.binary.data.mimeType;

<span class="kw">return</span> [{ json: { base64, mimeType } }];</code></pre>

  <pre><code><span class="cmt">## HTTP Request Body (base64 ì´ë¯¸ì§€)</span>
{
  "model": "claude-opus-4-6",
  "max_tokens": 2048,
  "messages": [{
    "role": "user",
    "content": [
      {
        "type": "image",
        "source": {
          "type": "base64",
          "media_type": "{{ $json.mimeType }}",
          "data": "{{ $json.base64 }}"
        }
      },
      { "type": "text", "text": "{{ $json.prompt }}" }
    ]
  }]
}</code></pre>
</section>

<section class="content-section">
  <h2 id="output-parsers">ì¶œë ¥ íŒŒì„œ (Output Parser)</h2>

  <p>
    LLMì˜ ììœ  í˜•ì‹ í…ìŠ¤íŠ¸ ì¶œë ¥ì„ <strong>êµ¬ì¡°í™”ëœ ë°ì´í„°</strong>ë¡œ ë³€í™˜í•©ë‹ˆë‹¤.
    ì´í›„ ë…¸ë“œì—ì„œ <code>$json.fieldName</code>ìœ¼ë¡œ ë°”ë¡œ ì ‘ê·¼í•  ìˆ˜ ìˆì–´ ì›Œí¬í”Œë¡œìš° ì—°ê²°ì´ ë§¤ìš° ê°„í¸í•´ì§‘ë‹ˆë‹¤.
  </p>

  <h3 id="output-parser-structured">Structured Output Parser</h3>

  <pre><code><span class="cmt"># Basic LLM Chain + Structured Output Parser êµ¬ì„±</span>

Output Parser â†’ Structured Output Parser
  Schema Type: Manual
  Attributes:
    - Name: category
      Type: string
      Description: "ë¶„ë¥˜ ì¹´í…Œê³ ë¦¬ (ê²°ì œ/ê¸°ìˆ /ê³„ì •/ê¸°íƒ€ ì¤‘ í•˜ë‚˜)"
    - Name: severity
      Type: options
      Options: ê¸´ê¸‰, ë†’ìŒ, ë³´í†µ, ë‚®ìŒ
      Description: "ì‹¬ê°ë„ ìˆ˜ì¤€"
    - Name: summary
      Type: string
      Description: "50ì ì´ë‚´ í•œêµ­ì–´ ìš”ì•½"
    - Name: requiresHuman
      Type: boolean
      Description: "ì¸ê°„ ë‹´ë‹¹ì ì²˜ë¦¬ í•„ìš” ì—¬ë¶€"

<span class="cmt"># í”„ë¡¬í”„íŠ¸ì— íŒŒì„œ ì§€ì¹¨ì´ ìë™ ì¶”ê°€ë¨</span>
<span class="cmt"># ì¶œë ¥ ê²°ê³¼ â†’ ë°”ë¡œ $json.category, $json.severity ë¡œ ì ‘ê·¼</span></code></pre>

  <pre><code><span class="cmt">// íŒŒì‹± ê²°ê³¼ ì˜ˆì‹œ</span>
{
  "category": "ê²°ì œ",
  "severity": "ê¸´ê¸‰",
  "summary": "ì‹ ìš©ì¹´ë“œ ê²°ì œ ì‹¤íŒ¨, ì¦‰ì‹œ ì²˜ë¦¬ í•„ìš”",
  "requiresHuman": <span class="kw">true</span>
}</code></pre>

  <h3 id="output-parser-autofix">Auto-fixing Output Parser</h3>

  <p>LLMì´ ì˜ëª»ëœ í˜•ì‹ì„ ë°˜í™˜í•˜ë©´, ì—ëŸ¬ ë©”ì‹œì§€ì™€ í•¨ê»˜ LLMì—ê²Œ ìë™ìœ¼ë¡œ ì¬ìš”ì²­í•˜ì—¬ ìˆ˜ì •í•©ë‹ˆë‹¤.</p>

  <pre><code><span class="cmt"># Auto-fixing Output Parser ì„¤ì •</span>
Output Parser â†’ Auto-fixing Output Parser
  Parser: Structured Output Parser (ë‚´ë¶€ì— êµ¬ì¡° ì •ì˜)
  Max Retries: 3    <span class="cmt"># ìµœëŒ€ ìˆ˜ì • ì¬ì‹œë„ íšŸìˆ˜</span>

<span class="cmt"># ë™ì‘ ë°©ì‹</span>
1. LLM ì¶œë ¥ íŒŒì‹± ì‹œë„
2. ì‹¤íŒ¨ â†’ LLMì— ì—ëŸ¬ ë©”ì‹œì§€ì™€ í•¨ê»˜ ì¬ìš”ì²­
   "ë‹¤ìŒ ì—ëŸ¬ë¥¼ ìˆ˜ì •í•˜ì„¸ìš”: JSON parse error at line 3..."
3. ìµœëŒ€ Retry íšŸìˆ˜ê¹Œì§€ ë°˜ë³µ
4. ì—¬ì „íˆ ì‹¤íŒ¨ â†’ ë…¸ë“œ ì—ëŸ¬ ì²˜ë¦¬</code></pre>

  <h3 id="output-parser-manual">Code ë…¸ë“œë¡œ ìˆ˜ë™ íŒŒì‹±</h3>

  <pre><code><span class="cmt">// LLM ì¶œë ¥ì—ì„œ JSON ì¶”ì¶œ (ë§ˆí¬ë‹¤ìš´ ì½”ë“œë¸”ë¡ í¬í•¨ ê²½ìš°)</span>
<span class="kw">const</span> text = $json.text || $json.output;

<span class="cmt">// ```json ... ``` ë¸”ë¡ ì¶”ì¶œ</span>
<span class="kw">const</span> jsonMatch = text.match(<span class="str">/```(?:json)?\s*([\s\S]*?)```/</span>);
<span class="kw">if</span> (jsonMatch) {
  <span class="kw">const</span> parsed = JSON.parse(jsonMatch[<span class="num">1</span>].trim());
  <span class="kw">return</span> [{ json: parsed }];
}

<span class="cmt">// ìˆœìˆ˜ JSON íŒŒì‹± ì‹œë„</span>
<span class="kw">try</span> {
  <span class="kw">const</span> parsed = JSON.parse(text.trim());
  <span class="kw">return</span> [{ json: parsed }];
} <span class="kw">catch</span> {
  <span class="cmt">// ì •ê·œì‹ìœ¼ë¡œ í‚¤-ê°’ ì¶”ì¶œ (í´ë°±)</span>
  <span class="kw">const</span> category = text.match(<span class="str">/category[:\s]+([^\n,}]+)/i</span>)?.[<span class="num">1</span>]?.trim();
  <span class="kw">return</span> [{ json: { category, rawText: text } }];
}</code></pre>
</section>

<section class="content-section">
  <h2 id="ai-agent">AI Agent ë…¸ë“œ ì™„ì „ ê°€ì´ë“œ</h2>

  <p>
    <strong>AI Agent ë…¸ë“œ</strong>ëŠ” LLMì´ ìŠ¤ìŠ¤ë¡œ "ì–´ë–¤ ë„êµ¬ë¥¼ ì“¸ì§€" íŒë‹¨í•˜ê³ ,
    ë„êµ¬ ì‹¤í–‰ ê²°ê³¼ë¥¼ ë°”íƒ•ìœ¼ë¡œ ë‹¤ìŒ í–‰ë™ì„ ê²°ì •í•˜ëŠ” <strong>ReAct íŒ¨í„´</strong>ì„ êµ¬í˜„í•©ë‹ˆë‹¤.
  </p>

  <svg viewBox="0 0 800 380" class="diagram" role="img" aria-label="AI Agent ReAct ì‹¤í–‰ ë£¨í”„">
    <defs>
      <marker id="n8n-agent-arrow" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
        <polygon points="0 0, 10 3, 0 6" fill="var(--diagram-arrow)" />
      </marker>
    </defs>
    <rect x="30" y="155" width="120" height="60" fill="var(--diagram-fill)" stroke="var(--diagram-stroke)" stroke-width="1.5" rx="8"/>
    <text x="90" y="182" fill="var(--diagram-text)" text-anchor="middle" font-size="12" font-weight="bold">ì‚¬ìš©ì ì§ˆë¬¸</text>
    <text x="90" y="200" fill="var(--text-secondary)" text-anchor="middle" font-size="10">"BTC í˜„ì¬ ê°€ê²©?"</text>
    <line x1="150" y1="185" x2="195" y2="185" stroke="var(--diagram-arrow)" stroke-width="2" marker-end="url(#n8n-agent-arrow)"/>
    <rect x="195" y="20" width="160" height="330" fill="var(--diagram-fill)" stroke="var(--diagram-accent)" stroke-width="2" rx="8"/>
    <text x="275" y="45" fill="var(--diagram-accent)" text-anchor="middle" font-size="13" font-weight="bold">Claude LLM</text>
    <rect x="210" y="60" width="130" height="50" fill="var(--diagram-fill)" stroke="var(--diagram-stroke)" stroke-width="1" rx="5"/>
    <text x="275" y="82" fill="var(--diagram-text)" text-anchor="middle" font-size="11" font-weight="bold">â‘  Thought</text>
    <text x="275" y="100" fill="var(--text-secondary)" text-anchor="middle" font-size="10">ë„êµ¬ ì„ íƒ íŒë‹¨</text>
    <rect x="210" y="130" width="130" height="50" fill="var(--diagram-fill)" stroke="var(--diagram-stroke)" stroke-width="1" rx="5"/>
    <text x="275" y="152" fill="var(--diagram-text)" text-anchor="middle" font-size="11" font-weight="bold">â‘¡ Action</text>
    <text x="275" y="170" fill="var(--text-secondary)" text-anchor="middle" font-size="10">ë„êµ¬ í˜¸ì¶œ ìš”ì²­</text>
    <rect x="210" y="200" width="130" height="50" fill="var(--diagram-fill)" stroke="var(--diagram-stroke)" stroke-width="1" rx="5"/>
    <text x="275" y="222" fill="var(--diagram-text)" text-anchor="middle" font-size="11" font-weight="bold">â‘¢ Observation</text>
    <text x="275" y="240" fill="var(--text-secondary)" text-anchor="middle" font-size="10">ë„êµ¬ ê²°ê³¼ ìˆ˜ì‹ </text>
    <rect x="210" y="270" width="130" height="50" fill="var(--diagram-fill)" stroke="var(--diagram-stroke)" stroke-width="1" rx="5"/>
    <text x="275" y="292" fill="var(--diagram-text)" text-anchor="middle" font-size="11" font-weight="bold">â‘£ Final Answer</text>
    <text x="275" y="310" fill="var(--text-secondary)" text-anchor="middle" font-size="10">ìµœì¢… ì‘ë‹µ</text>
    <line x1="275" y1="110" x2="275" y2="130" stroke="var(--diagram-arrow)" stroke-width="1.5" marker-end="url(#n8n-agent-arrow)"/>
    <line x1="275" y1="180" x2="275" y2="200" stroke="var(--diagram-arrow)" stroke-width="1.5" marker-end="url(#n8n-agent-arrow)"/>
    <line x1="275" y1="250" x2="275" y2="270" stroke="var(--diagram-arrow)" stroke-width="1.5" marker-end="url(#n8n-agent-arrow)"/>
    <rect x="430" y="40" width="150" height="55" fill="var(--diagram-fill)" stroke="var(--diagram-stroke)" stroke-width="1.5" rx="6"/>
    <text x="505" y="63" fill="var(--diagram-text)" text-anchor="middle" font-size="12" font-weight="bold">HTTP Request Tool</text>
    <text x="505" y="82" fill="var(--text-secondary)" text-anchor="middle" font-size="10">CoinGecko API</text>
    <rect x="430" y="115" width="150" height="55" fill="var(--diagram-fill)" stroke="var(--diagram-stroke)" stroke-width="1.5" rx="6"/>
    <text x="505" y="138" fill="var(--diagram-text)" text-anchor="middle" font-size="12" font-weight="bold">Calculator Tool</text>
    <text x="505" y="157" fill="var(--text-secondary)" text-anchor="middle" font-size="10">ë³€ë™ë¥  ê³„ì‚°</text>
    <rect x="430" y="190" width="150" height="55" fill="var(--diagram-fill)" stroke="var(--diagram-stroke)" stroke-width="1.5" rx="6"/>
    <text x="505" y="213" fill="var(--diagram-text)" text-anchor="middle" font-size="12" font-weight="bold">Workflow Tool</text>
    <text x="505" y="232" fill="var(--text-secondary)" text-anchor="middle" font-size="10">ì„œë¸Œì›Œí¬í”Œë¡œìš°</text>
    <line x1="355" y1="155" x2="430" y2="68" stroke="var(--diagram-arrow)" stroke-width="1.5" stroke-dasharray="5,3" marker-end="url(#n8n-agent-arrow)"/>
    <line x1="355" y1="155" x2="430" y2="143" stroke="var(--diagram-arrow)" stroke-width="1.5" stroke-dasharray="5,3" marker-end="url(#n8n-agent-arrow)"/>
    <line x1="355" y1="155" x2="430" y2="218" stroke="var(--diagram-arrow)" stroke-width="1.5" stroke-dasharray="5,3" marker-end="url(#n8n-agent-arrow)"/>
    <line x1="430" y1="68" x2="355" y2="225" stroke="var(--diagram-arrow)" stroke-width="1" stroke-dasharray="3,3" marker-end="url(#n8n-agent-arrow)"/>
    <line x1="430" y1="143" x2="355" y2="225" stroke="var(--diagram-arrow)" stroke-width="1" stroke-dasharray="3,3" marker-end="url(#n8n-agent-arrow)"/>
    <rect x="630" y="265" width="140" height="60" fill="var(--diagram-fill)" stroke="var(--diagram-stroke)" stroke-width="1.5" rx="8"/>
    <text x="700" y="292" fill="var(--diagram-text)" text-anchor="middle" font-size="12" font-weight="bold">ìµœì¢… ì‘ë‹µ</text>
    <text x="700" y="312" fill="var(--text-secondary)" text-anchor="middle" font-size="10">"BTC: $XX,XXX"</text>
    <line x1="355" y1="295" x2="630" y2="295" stroke="var(--diagram-arrow)" stroke-width="2" marker-end="url(#n8n-agent-arrow)"/>
  </svg>
  <p class="diagram-caption">AI Agent ReAct ë£¨í”„: Thought â†’ Action(ë„êµ¬ í˜¸ì¶œ) â†’ Observation â†’ ë°˜ë³µ â†’ Final Answer</p>

  <h3 id="agent-config">AI Agent í•µì‹¬ ì„¤ì •</h3>

  <pre><code><span class="cmt"># AI Agent ë…¸ë“œ ì „ì²´ ì„¤ì •</span>

Chat Model â†’ Anthropic Chat Model
  Model: claude-opus-4-6
  Temperature: 0          <span class="cmt"># ë„êµ¬ ì‚¬ìš© ì‹œ ê²°ì •ë¡ ì  í–‰ë™ ê¶Œì¥</span>
  Max Tokens: 4096

Memory â†’ Window Buffer Memory
  Context Window Length: 10

Max Iterations: 10        <span class="cmt"># ë¬´í•œ ë£¨í”„ ë°©ì§€ (ë„êµ¬ ìµœëŒ€ í˜¸ì¶œ íšŸìˆ˜)</span>
Return Intermediate Steps: true  <span class="cmt"># ì¤‘ê°„ Thought/Action í¬í•¨ ì¶œë ¥</span>

System Prompt: |
  ë‹¹ì‹ ì€ ìœ ìš©í•œ AI ì–´ì‹œìŠ¤í„´íŠ¸ì…ë‹ˆë‹¤.
  ì£¼ì–´ì§„ ë„êµ¬ë¥¼ ì ê·¹ í™œìš©í•˜ì—¬ ì •í™•í•œ ë‹µë³€ì„ ì œê³µí•˜ì„¸ìš”.
  ìµœì¢… ë‹µë³€ì€ ë°˜ë“œì‹œ í•œêµ­ì–´ë¡œ ì‘ì„±í•˜ì„¸ìš”.
  ëª¨ë¥´ëŠ” ì •ë³´ëŠ” ì¶”ì¸¡í•˜ì§€ ë§ê³  ë„êµ¬ë¡œ í™•ì¸í•˜ì„¸ìš”.

Human Message: {{ $json.userMessage }}</code></pre>

  <h3 id="agent-tools">ë„êµ¬(Tool) ì„¤ì • ìƒì„¸</h3>

  <pre><code><span class="cmt"># HTTP Request Tool â€” ì£¼ì‹/ì•”í˜¸í™”í ê°€ê²© ì¡°íšŒ</span>
Name: get_crypto_price
Description: |
  ì•”í˜¸í™”íì˜ í˜„ì¬ ê°€ê²©ê³¼ 24ì‹œê°„ ë³€ë™ë¥ ì„ ì¡°íšŒí•©ë‹ˆë‹¤.
  id íŒŒë¼ë¯¸í„°ì— ì½”ì¸ IDë¥¼ ì…ë ¥í•˜ì„¸ìš”.
  ì˜ˆ: bitcoin, ethereum, ripple
Method: GET
URL: https://api.coingecko.com/api/v3/simple/price
Query Parameters:
  ids: {{ $parameter.id }}
  vs_currencies: usd,krw
  include_24hr_change: true</code></pre>

  <pre><code><span class="cmt"># n8n Workflow Tool â€” ë³µì¡í•œ DB ì¡°íšŒë¥¼ ì„œë¸Œì›Œí¬í”Œë¡œìš°ë¡œ</span>
Name: get_customer_info
Description: |
  ê³ ê° IDë¡œ ê³ ê° ì •ë³´(ì´ë¦„, ì´ë©”ì¼, ì£¼ë¬¸ ì´ë ¥)ë¥¼ ì¡°íšŒí•©ë‹ˆë‹¤.
  customer_id íŒŒë¼ë¯¸í„°ì— ê³ ê° ID(ìˆ«ì)ë¥¼ ì…ë ¥í•˜ì„¸ìš”.
Workflow: "ê³ ê° ì •ë³´ ì¡°íšŒ ì„œë¸Œì›Œí¬í”Œë¡œìš°"

<span class="cmt"># ì„œë¸Œì›Œí¬í”Œë¡œìš° ë‚´ë¶€:</span>
Execute Workflow Trigger
  â†“
PostgreSQL
  Query: |
    SELECT c.*, json_agg(o.*) as orders
    FROM customers c
    LEFT JOIN orders o ON o.customer_id = c.id
    WHERE c.id = {{ $json.customer_id }}
    GROUP BY c.id
  â†“
Respond to Workflow</code></pre>

  <h3 id="agent-system-prompt">ì—ì´ì „íŠ¸ ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ ì„¤ê³„</h3>

  <pre><code><span class="cmt"># ê³ ê° ì§€ì› ì—ì´ì „íŠ¸ ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ ì˜ˆì‹œ</span>
ë‹¹ì‹ ì€ [íšŒì‚¬ëª…] ê³µì‹ ê³ ê° ì§€ì› AIì…ë‹ˆë‹¤.

## ì—­í• ê³¼ ê¶Œí•œ
- ì£¼ë¬¸ ì¡°íšŒ, ë°°ì†¡ ìƒíƒœ í™•ì¸, ë°˜í’ˆ/êµí™˜ ì•ˆë‚´ ê°€ëŠ¥
- í™˜ë¶ˆ ì²˜ë¦¬ëŠ” 50,000ì› ì´í•˜ë§Œ ì§ì ‘ ì²˜ë¦¬ ê°€ëŠ¥
- 50,000ì› ì´ˆê³¼ ë˜ëŠ” ë²•ì  ë¶„ìŸ â†’ ì¸ê°„ ë‹´ë‹¹ì ì—°ê²°

## ë„êµ¬ ì‚¬ìš© ê·œì¹™
- ê³ ê° ì •ë³´ ì¡°íšŒ ì‹œ ë°˜ë“œì‹œ get_customer_info ë„êµ¬ ì‚¬ìš©
- ì£¼ë¬¸ ìƒíƒœ í™•ì¸ ì‹œ ë°˜ë“œì‹œ get_order_status ë„êµ¬ ì‚¬ìš©
- ì¶”ì¸¡ìœ¼ë¡œ ì£¼ë¬¸ ìƒíƒœë¥¼ ë‹µë³€í•˜ì§€ ë§ ê²ƒ

## ì‘ë‹µ í˜•ì‹
- ì¹œì ˆí•˜ê³  ê³µê°ì ì¸ ì–´ì¡° ìœ ì§€
- ì „ë¬¸ ìš©ì–´ ëŒ€ì‹  ì‰¬ìš´ í‘œí˜„ ì‚¬ìš©
- í•´ê²°ì´ ì–´ë ¤ìš°ë©´ ë‹´ë‹¹ì ì—°ê²° ì œì•ˆ

## ê°œì¸ì •ë³´ ë³´í˜¸
- ì „í™”ë²ˆí˜¸, ì‹ ìš©ì¹´ë“œ ë²ˆí˜¸ë¥¼ ì‘ë‹µì— í¬í•¨í•˜ì§€ ë§ ê²ƒ
- ì´ë©”ì¼ì€ ë§ˆìŠ¤í‚¹ ì²˜ë¦¬: hong***@example.com</code></pre>
</section>

<section class="content-section">
  <h2 id="memory-strategies">ë©”ëª¨ë¦¬ ì „ëµ</h2>

  <h3 id="memory-comparison">ë©”ëª¨ë¦¬ ì¢…ë¥˜ ë¹„êµ</h3>

  <table>
    <thead>
      <tr><th>ë©”ëª¨ë¦¬ íƒ€ì…</th><th>ì˜ì†ì„±</th><th>í† í° ì‚¬ìš©</th><th>ì í•©í•œ ì‚¬ìš©ì²˜</th><th>ì„¸ì…˜ ë¶„ë¦¬</th></tr>
    </thead>
    <tbody>
      <tr><td><strong>Window Buffer</strong></td><td>ì¸ë©”ëª¨ë¦¬ (ì„ì‹œ)</td><td>ìµœê·¼ Nê°œ Ã— ë©”ì‹œì§€ ê¸¸ì´</td><td>ë‹¨ì¼ ì‹¤í–‰ ë‚´ ëŒ€í™”</td><td>ì‹¤í–‰ ID ê¸°ì¤€</td></tr>
      <tr><td><strong>Redis Chat</strong></td><td>Redisì— ì˜ì†</td><td>ì„¤ì •í•œ Window í¬ê¸°</td><td>ë‹¤ì¤‘ ì„¸ì…˜, ì±—ë´‡</td><td>Session ID í‚¤</td></tr>
      <tr><td><strong>Postgres Chat</strong></td><td>DBì— ì˜ì†</td><td>ì„¤ì •í•œ Window í¬ê¸°</td><td>ëŒ€í™” ì´ë ¥ ë¶„ì„ í•„ìš” ì‹œ</td><td>Session ID ì»¬ëŸ¼</td></tr>
      <tr><td><strong>ì—†ìŒ(Stateless)</strong></td><td>ì—†ìŒ</td><td>ì—†ìŒ</td><td>ë‹¨ë°œì„± ì§ˆì˜, ë¶„ë¥˜Â·ìš”ì•½</td><td>-</td></tr>
    </tbody>
  </table>

  <h3 id="memory-session">ì„¸ì…˜ë³„ ë©”ëª¨ë¦¬ ê´€ë¦¬</h3>

  <pre><code><span class="cmt"># Redis Chat Memory â€” ì‚¬ìš©ìë³„ ë…ë¦½ ë©”ëª¨ë¦¬</span>

AI Agent
  Memory â†’ Redis Chat Memory
    Session Key: {{ $json.userId }}        <span class="cmt"># ì‚¬ìš©ìë³„ ë¶„ë¦¬</span>
    Session ID: {{ $json.sessionId }}      <span class="cmt"># ë˜ëŠ” ëŒ€í™” ì„¸ì…˜ë³„ ë¶„ë¦¬</span>
    Context Window Length: 20             <span class="cmt"># ìµœê·¼ 20ê°œ ë©”ì‹œì§€</span>
    Redis Credential: (Redis ìê²©ì¦ëª…)

<span class="cmt"># Telegram ë´‡ ì˜ˆì‹œ â€” chat.idë¡œ ì„¸ì…˜ ë¶„ë¦¬</span>
Session Key: {{ $json.message.chat.id }}</code></pre>

  <pre><code><span class="cmt">// Code ë…¸ë“œ â€” ì˜¤ë˜ëœ ë©”ëª¨ë¦¬ ìˆ˜ë™ ì •ë¦¬ (Redis)</span>
<span class="cmt">// íŠ¹ì • ì‚¬ìš©ìì˜ ëŒ€í™” ì´ë ¥ ì´ˆê¸°í™”</span>
<span class="kw">const</span> userId = $json.userId;
<span class="kw">const</span> sessionKey = <span class="str">`n8n:${userId}:history`</span>;

<span class="cmt">// ë‹¤ìŒ Redis ë…¸ë“œì—ì„œ DEL ëª…ë ¹ ì‹¤í–‰</span>
<span class="kw">return</span> [{ json: { sessionKey } }];</code></pre>
</section>

<section class="content-section">
  <h2 id="rag-pipeline">RAG íŒŒì´í”„ë¼ì¸ ì™„ì „ êµ¬ì¶•</h2>

  <h3 id="rag-document-loaders">ë¬¸ì„œ ë¡œë” ì¢…ë¥˜</h3>

  <table>
    <thead>
      <tr><th>ë¡œë”</th><th>ì§€ì› í˜•ì‹</th><th>íŠ¹ì´ì‚¬í•­</th></tr>
    </thead>
    <tbody>
      <tr><td>Default Data Loader (Binary)</td><td>PDF, DOCX, TXT, HTML, CSV, JSON</td><td>Binary ë…¸ë“œ ì¶œë ¥ì„ ì—°ê²°</td></tr>
      <tr><td>GitHub Document Loader</td><td>GitHub ì €ì¥ì†Œ íŒŒì¼</td><td>íŠ¹ì • ë””ë ‰í† ë¦¬Â·í™•ì¥ì í•„í„° ê°€ëŠ¥</td></tr>
      <tr><td>Notion Document Loader</td><td>Notion í˜ì´ì§€Â·DB</td><td>Notion API ìê²©ì¦ëª… í•„ìš”</td></tr>
      <tr><td>Recursive URL Loader</td><td>ì›¹í˜ì´ì§€ (í¬ë¡¤ë§)</td><td>ìµœëŒ€ ê¹Šì´, ë„ë©”ì¸ ì œí•œ ì„¤ì •</td></tr>
      <tr><td>JSON Document Loader</td><td>JSON íŒŒì¼/êµ¬ì¡°</td><td>íŠ¹ì • í‚¤ë§Œ í…ìŠ¤íŠ¸ë¡œ ì¶”ì¶œ ê°€ëŠ¥</td></tr>
    </tbody>
  </table>

  <h3 id="rag-text-splitters">í…ìŠ¤íŠ¸ ë¶„í• ê¸° ë¹„êµ</h3>

  <table>
    <thead>
      <tr><th>ë¶„í• ê¸°</th><th>ë¶„í•  ê¸°ì¤€</th><th>ê¶Œì¥ ì„¤ì •</th><th>ì í•©í•œ ê²½ìš°</th></tr>
    </thead>
    <tbody>
      <tr><td><strong>Recursive Character</strong></td><td>\n\n â†’ \n â†’ ê³µë°± â†’ ë¬¸ì</td><td>Chunk: 1000, Overlap: 200</td><td>ë²”ìš© (ê°€ì¥ ì¶”ì²œ)</td></tr>
      <tr><td><strong>Character</strong></td><td>ë‹¨ì¼ êµ¬ë¶„ì (ê¸°ë³¸: \n\n)</td><td>Chunk: 2000, Overlap: 200</td><td>ë¬¸ë‹¨ ê¸°ì¤€ ëª…í™•í•œ ë¬¸ì„œ</td></tr>
      <tr><td><strong>Token</strong></td><td>LLM í† í° ìˆ˜ ê¸°ì¤€</td><td>Chunk: 512 tokens</td><td>í† í° í•œë„ ì •í™•íˆ ì œì–´ ì‹œ</td></tr>
    </tbody>
  </table>

  <h3 id="rag-ingest">ì›Œí¬í”Œë¡œìš° 1: ë¬¸ì„œ ì¸ë±ì‹± íŒŒì´í”„ë¼ì¸</h3>

  <pre><code><span class="cmt"># ë¬¸ì„œ â†’ ì²­í¬ â†’ ì„ë² ë”© â†’ ë²¡í„° DB ì €ì¥</span>

<span class="cmt">## íŠ¸ë¦¬ê±°: íŒŒì¼ ì—…ë¡œë“œ Webhook</span>
Webhook Trigger (multipart/form-data)
  â†“
<span class="cmt">## ë©”íƒ€ë°ì´í„° ì¶”ì¶œ</span>
Code ë…¸ë“œ
  const filename = $binary.data.fileName;
  const source = $json.source ?? 'upload';
  const uploadedBy = $json.uploadedBy ?? 'system';
  return [{ json: { filename, source, uploadedBy }, binary: $input.first().binary }];
  â†“
<span class="cmt">## ì¤‘ë³µ ì²´í¬ (ì„ íƒ)</span>
Supabase ë…¸ë“œ
  Query: SELECT id FROM documents WHERE filename = '{{ $json.filename }}'
  â†“
IF (ì´ë¯¸ ì¡´ì¬í•˜ë©´) â†’ 409 ì‘ë‹µ ë°˜í™˜

<span class="cmt">## ë¬¸ì„œ â†’ í…ìŠ¤íŠ¸ ì²­í¬ ë¶„í• </span>
Default Data Loader
  Data Type: Binary (ìë™ ê°ì§€: PDF/DOCX/TXT)
  Text Splitter â†’ Recursive Character Text Splitter
    Chunk Size: 1000
    Chunk Overlap: 200
    Separators: ["\n\n", "\n", " ", ""]
  â†“
<span class="cmt">## ì„ë² ë”© ìƒì„± + ë²¡í„° DB ì €ì¥</span>
Supabase Vector Store
  Operation: Insert Documents
  Embedding â†’ OpenAI Embeddings (text-embedding-3-small)
  Table: documents
  Query Name: match_documents
  Metadata:
    source: {{ $json.filename }}
    uploadedBy: {{ $json.uploadedBy }}
    uploadedAt: {{ $now.toISO() }}
  â†“
<span class="cmt">## ì™„ë£Œ ì‘ë‹µ</span>
Respond to Webhook
  Body: { "success": true, "chunks": {{ $input.all().length }} }</code></pre>

  <h3 id="rag-query">ì›Œí¬í”Œë¡œìš° 2: RAG ì§ˆì˜ì‘ë‹µ</h3>

  <pre><code><span class="cmt"># ì§ˆë¬¸ â†’ ë²¡í„° ê²€ìƒ‰ â†’ LLM ë‹µë³€ ìƒì„±</span>

Webhook Trigger
  Body: { "question": "...", "userId": "...", "topK": 5 }
  â†“
<span class="cmt">## ë°©ë²• A: Retrieval Q&A Chain (ê°„ë‹¨)</span>
Retrieval Q&A Chain
  Chat Model â†’ Anthropic (claude-opus-4-6)
  Vector Store â†’ Supabase (Retrieve Documents)
    Query: {{ $json.question }}
    Top K: {{ $json.topK ?? 5 }}
  Prompt Template: |
    ë‹¤ìŒ ë¬¸ì„œë¥¼ ì°¸ê³ í•˜ì—¬ ì§ˆë¬¸ì— ë‹µë³€í•˜ì„¸ìš”.
    ë¬¸ì„œì— ì—†ëŠ” ë‚´ìš©ì€ "ë¬¸ì„œì—ì„œ í™•ì¸í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤"ë¼ê³  ë‹µë³€í•˜ì„¸ìš”.

    ë¬¸ì„œ:
    {context}

    ì§ˆë¬¸: {question}
  â†“
Respond to Webhook (answer + sources)</code></pre>

  <pre><code><span class="cmt">## ë°©ë²• B: AI Agent + Vector Store Tool (ë” ìœ ì—°)</span>

AI Agent
  Chat Model: Claude claude-opus-4-6
  Memory: Redis Chat Memory (userId í‚¤)
  Tools:
    Vector Store Retriever Tool
      Vector Store: Supabase
      Name: search_documents
      Description: "ë‚´ë¶€ ë¬¸ì„œì—ì„œ ê´€ë ¨ ì •ë³´ë¥¼ ê²€ìƒ‰í•©ë‹ˆë‹¤. queryì— ê²€ìƒ‰í•  ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”."
      Top K: 5
      Filter: { "source": "{{ $json.docSource }}" }  <span class="cmt"># íŠ¹ì • ë¬¸ì„œë§Œ</span>

  System Prompt: |
    ë‹¹ì‹ ì€ ë‚´ë¶€ ë¬¸ì„œ ê¸°ë°˜ AI ì–´ì‹œìŠ¤í„´íŠ¸ì…ë‹ˆë‹¤.
    ë°˜ë“œì‹œ search_documents ë„êµ¬ë¡œ ë¬¸ì„œë¥¼ í™•ì¸í•œ í›„ ë‹µë³€í•˜ì„¸ìš”.
    ì¶œì²˜ íŒŒì¼ëª…ì„ í•­ìƒ ëª…ì‹œí•˜ì„¸ìš”.
    ë¬¸ì„œì— ì—†ëŠ” ë‚´ìš©ì€ ì†”ì§íˆ ëª¨ë¥¸ë‹¤ê³  í•˜ì„¸ìš”.

  Human: {{ $json.question }}</code></pre>

  <h3 id="rag-advanced">ê³ ê¸‰ RAG ê¸°ë²•</h3>

  <pre><code><span class="cmt">// í•˜ì´ë¸Œë¦¬ë“œ ê²€ìƒ‰: ë²¡í„° ìœ ì‚¬ë„ + í‚¤ì›Œë“œ ê²€ìƒ‰ ê²°í•©</span>

<span class="cmt">// 1. ë²¡í„° ê²€ìƒ‰ (ì˜ë¯¸ì  ìœ ì‚¬ë„)</span>
Supabase Vector Store Retrieve â†’ ìƒìœ„ 10ê°œ

<span class="cmt">// 2. PostgreSQL í‚¤ì›Œë“œ ê²€ìƒ‰ (Full-Text Search)</span>
PostgreSQL:
  SELECT *, ts_rank(to_tsvector('korean', content), query) AS rank
  FROM documents, to_tsquery('korean', '{{ $json.keywords }}') query
  WHERE to_tsvector('korean', content) @@ query
  ORDER BY rank DESC LIMIT 10

<span class="cmt">// 3. Code ë…¸ë“œ â€” ê²°ê³¼ ë³‘í•© ë° ì¤‘ë³µ ì œê±°</span>
<span class="kw">const</span> vector = $items(<span class="str">"Vector Store"</span>).map(i => i.json);
<span class="kw">const</span> keyword = $items(<span class="str">"PostgreSQL"</span>).map(i => i.json);
<span class="kw">const</span> merged = [...vector, ...keyword];
<span class="kw">const</span> seen = <span class="kw">new</span> <span class="type">Set</span>();
<span class="kw">const</span> unique = merged.filter(d => {
  <span class="kw">if</span> (seen.has(d.id)) <span class="kw">return false</span>;
  seen.add(d.id);
  <span class="kw">return true</span>;
});
<span class="kw">return</span> [{ json: { documents: unique.slice(<span class="num">0</span>, <span class="num">8</span>) } }];
  â†“
<span class="cmt">// 4. LLMì— ì»¨í…ìŠ¤íŠ¸ì™€ í•¨ê»˜ ì „ë‹¬</span></code></pre>

  <pre><code><span class="cmt">// ì¿¼ë¦¬ ì¬ì‘ì„± (Query Rewriting) â€” ê²€ìƒ‰ í’ˆì§ˆ í–¥ìƒ</span>

Basic LLM Chain (ì¿¼ë¦¬ ì¬ì‘ì„± ì „ìš©, ë¹ ë¥¸ ëª¨ë¸ ì‚¬ìš©)
  Chat Model: claude-haiku-4-5
  Prompt: |
    ëŒ€í™” ì´ë ¥ê³¼ ì‚¬ìš©ì ì§ˆë¬¸ì„ ë³´ê³ , ë¬¸ì„œ ê²€ìƒ‰ì— ìµœì í™”ëœ
    ë…ë¦½ì ì¸ ê²€ìƒ‰ ì¿¼ë¦¬ë¥¼ í•œêµ­ì–´ë¡œ ì‘ì„±í•˜ì„¸ìš”.
    ëŒ€í™” ì´ë ¥ ì—†ì´ë„ ì´í•´ ê°€ëŠ¥í•œ ì™„ì „í•œ ì¿¼ë¦¬ì—¬ì•¼ í•©ë‹ˆë‹¤.

    ëŒ€í™” ì´ë ¥: {{ $json.history ?? "ì—†ìŒ" }}
    ì‚¬ìš©ì ì§ˆë¬¸: {{ $json.question }}

    ê²€ìƒ‰ ì¿¼ë¦¬ë§Œ ì¶œë ¥ (ì„¤ëª… ì—†ì´):
  â†“
ë²¡í„° DB ê²€ìƒ‰ (ì¬ì‘ì„±ëœ ì¿¼ë¦¬ë¡œ)</code></pre>
</section>

<section class="content-section">
  <h2 id="multi-agent">ë©€í‹°ì—ì´ì „íŠ¸ íŒ¨í„´</h2>

  <h3 id="multi-agent-parallel">íŒ¨í„´ 1: ë³‘ë ¬ ì „ë¬¸ê°€ ì—ì´ì „íŠ¸</h3>

  <pre><code><span class="cmt"># í•˜ë‚˜ì˜ ë³µì¡í•œ ì§ˆë¬¸ì„ ì—¬ëŸ¬ ì „ë¬¸ ì—ì´ì „íŠ¸ê°€ ë³‘ë ¬ ì²˜ë¦¬</span>

Webhook Trigger ("ë¶„ê¸°ë³„ ì‹¤ì  ë¶„ì„í•´ì¤˜")
  â†“
Code ë…¸ë“œ (ì§ˆë¬¸ ë¶„í•´)
  return [
    { json: { question: "Q1-Q2 ë§¤ì¶œ íŠ¸ë Œë“œ", agent: "sales" } },
    { json: { question: "ë¹„ìš© êµ¬ì¡° ë¶„ì„", agent: "finance" } },
    { json: { question: "ì‹œì¥ ì ìœ ìœ¨ ë³€í™”", agent: "market" } },
  ];
  â†“ (3ê°œ ì•„ì´í…œ, ë³‘ë ¬ ì²˜ë¦¬)

<span class="cmt">## ê° ì•„ì´í…œì— ëŒ€í•´ ë‹´ë‹¹ ì—ì´ì „íŠ¸ ë¼ìš°íŒ…</span>
Switch ë…¸ë“œ ({{ $json.agent }}ìœ¼ë¡œ ë¶„ê¸°)
  "sales"  â†’ ë§¤ì¶œ ë¶„ì„ ì—ì´ì „íŠ¸ (DB Tool + Chart Tool)
  "finance"â†’ ì¬ë¬´ ë¶„ì„ ì—ì´ì „íŠ¸ (DB Tool + Calculator)
  "market" â†’ ì‹œì¥ ë¶„ì„ ì—ì´ì „íŠ¸ (Web Search Tool + DB Tool)
  â†“ (Merge: Append)

<span class="cmt">## ê²°ê³¼ í†µí•© ì—ì´ì „íŠ¸</span>
AI Agent (í†µí•© ìš”ì•½)
  System: "ì„¸ ì „ë¬¸ê°€ì˜ ë¶„ì„ì„ ì¢…í•©í•˜ì—¬ ê²½ì˜ ë³´ê³ ì„œë¥¼ ì‘ì„±í•˜ì„¸ìš”."
  Human: "ë¶„ì„ ê²°ê³¼:\n{{ $json.allResults }}"</code></pre>

  <h3 id="multi-agent-supervisor">íŒ¨í„´ 2: ìŠˆí¼ë°”ì´ì € ì—ì´ì „íŠ¸</h3>

  <pre><code><span class="cmt"># ìŠˆí¼ë°”ì´ì €ê°€ ì „ë¬¸ ì—ì´ì „íŠ¸ë“¤ì„ ì§€íœ˜</span>

Chat Trigger (ì‚¬ìš©ì ìš”ì²­)
  â†“
ìŠˆí¼ë°”ì´ì € AI Agent
  System: |
    ë‹¹ì‹ ì€ íŒ€ ìŠˆí¼ë°”ì´ì €ì…ë‹ˆë‹¤.
    ì‚¬ìš©ì ìš”ì²­ì„ ë¶„ì„í•˜ê³  ì ì ˆí•œ ì „ë¬¸ ì—ì´ì „íŠ¸ì—ê²Œ ì‘ì—…ì„ í• ë‹¹í•˜ì„¸ìš”.
    ì‚¬ìš© ê°€ëŠ¥í•œ ì—ì´ì „íŠ¸:
    - research_agent: ì›¹ ê²€ìƒ‰, ì •ë³´ ìˆ˜ì§‘
    - code_agent: ì½”ë“œ ì‘ì„±, ë””ë²„ê¹…
    - data_agent: ë°ì´í„° ë¶„ì„, ì‹œê°í™”
    ê²°ê³¼ë¥¼ ê²€í† í•˜ê³  ìµœì¢… ë‹µë³€ì„ ì‚¬ìš©ìì—ê²Œ ì „ë‹¬í•˜ì„¸ìš”.
  Tools:
    â†’ research_agent (Workflow Tool)
    â†’ code_agent (Workflow Tool)
    â†’ data_agent (Workflow Tool)</code></pre>

  <h3 id="multi-agent-human-in-loop">íŒ¨í„´ 3: Human-in-the-Loop</h3>

  <pre><code><span class="cmt"># AI ì²˜ë¦¬ â†’ ì‚¬ëŒ ê²€í†  â†’ ìŠ¹ì¸/ê±°ì ˆ â†’ ê³„ì† ì‹¤í–‰</span>

Webhook Trigger (ìë™í™” ìš”ì²­)
  â†“
AI Agent (ì´ˆì•ˆ ì‘ì„±)
  â†“
<span class="cmt">## ì‚¬ëŒ ê²€í†  ìš”ì²­ (Slackì— ìŠ¹ì¸ ìš”ì²­)</span>
Slack ë…¸ë“œ
  Text: "AIê°€ ë‹¤ìŒ ì´ˆì•ˆì„ ì‘ì„±í–ˆìŠµë‹ˆë‹¤:\n{{ $json.draft }}\nìŠ¹ì¸í•˜ì‹œê² ìŠµë‹ˆê¹Œ?"
  Blocks:
    - type: actions
      elements:
        - type: button
          text: "âœ… ìŠ¹ì¸"
          action_id: approve
          value: "{{ $execution.resumeUrl }}?action=approve"
        - type: button
          text: "âŒ ê±°ì ˆ"
          action_id: reject
          value: "{{ $execution.resumeUrl }}?action=reject"
          style: danger
  â†“
<span class="cmt">## Webhook ì¬ê°œ ëŒ€ê¸° (ìµœëŒ€ 24ì‹œê°„)</span>
Wait ë…¸ë“œ
  Resume: On Webhook Call
  Webhook Suffix: /approval/{{ $execution.id }}
  Max Wait Time: 86400   <span class="cmt"># 24ì‹œê°„ í›„ ìë™ íƒ€ì„ì•„ì›ƒ</span>
  â†“
<span class="cmt">## ìŠ¹ì¸/ê±°ì ˆ ì²˜ë¦¬</span>
IF ({{ $json.action }} === "approve")
  True â†’ ì‹¤ì œ ì‹¤í–‰ (ì´ë©”ì¼ ë°œì†¡, DB ì €ì¥ ë“±)
  False â†’ ì·¨ì†Œ ì•Œë¦¼ + ë¡œê·¸</code></pre>

  <pre><code><span class="cmt"># Wait ë…¸ë“œ ì¬ê°œ URL í˜¸ì¶œ ë°©ë²•</span>

<span class="cmt">## Slack ë²„íŠ¼ í´ë¦­ ì‹œ n8nìœ¼ë¡œ ì¬ê°œ ì‹ í˜¸ ì „ì†¡</span>
<span class="cmt">## action_idì— ë”°ë¼ resumeUrlì— íŒŒë¼ë¯¸í„° ì¶”ê°€</span>

<span class="cmt">## ì™¸ë¶€ì—ì„œ ì¬ê°œ í˜¸ì¶œ (curl ì˜ˆì‹œ)</span>
curl -X POST "{{ $execution.resumeUrl }}" \
  -H "Content-Type: application/json" \
  -d '{"action": "approve", "approvedBy": "manager@company.com"}'</code></pre>
</section>

<section class="content-section">
  <h2 id="real-world-examples">ì‹¤ì „ AI ìë™í™” ì‚¬ë¡€</h2>

  <h3 id="example-slack-ai">ì‚¬ë¡€ 1: Slack AI ë¶„ë¥˜ & ìë™ ë¼ìš°íŒ…</h3>

  <pre><code><span class="cmt"># Slack ìƒˆ ë©”ì‹œì§€ â†’ AI ë¶„ë¥˜ â†’ ë‹´ë‹¹ì íƒœê·¸ + DB ë¡œê·¸</span>

Slack Trigger (ìƒˆ ë©”ì‹œì§€)
  Channel: #customer-support
  â†“
Basic LLM Chain (claude-haiku-4-5, ë¹ ë¦„)
  System: |
    ê³ ê° ë©”ì‹œì§€ë¥¼ JSONìœ¼ë¡œë§Œ ë¶„ë¥˜í•˜ì„¸ìš”.
    category: ["ê²°ì œ", "ê¸°ìˆ ", "ê³„ì •", "ë°°ì†¡", "ì¼ë°˜", "ê¸°íƒ€"]
    severity: ["ê¸´ê¸‰", "ë†’ìŒ", "ë³´í†µ", "ë‚®ìŒ"]
    sentiment: ["í™”ë‚¨", "ë¶ˆë§Œ", "ì¤‘ë¦½", "ë§Œì¡±"]
    language: ["í•œêµ­ì–´", "ì˜ì–´", "ê¸°íƒ€"]
  User: {{ $json.text }}

Output Parser â†’ Structured Output Parser
  category, severity, sentiment, language (ëª¨ë‘ string)
  â†“
Code ë…¸ë“œ (ë‹´ë‹¹ì ë§¤í•‘)
  const assigneeMap = {
    "ê²°ì œ": { user: "U01FINANCE", channel: "#finance-support" },
    "ê¸°ìˆ ": { user: "U02DEVTEAM", channel: "#dev-support" },
    "ê³„ì •": { user: "U03OPSCORE", channel: "#ops-support" },
  };
  const assignee = assigneeMap[$json.category] ?? { user: "U04GENERAL" };
  return [{ json: { ...$json, assignee } }];
  â†“
[ë³‘ë ¬]
  Slack (ì›ë³¸ ì±„ë„ì— ë¶„ë¥˜ íƒœê·¸ ì¶”ê°€)
    Thread TS: {{ $json.ts }}
    Text: "ì¹´í…Œê³ ë¦¬: {{ $json.category }} | ì‹¬ê°ë„: {{ $json.severity }}"
  PostgreSQL (í‹°ì¼“ ìƒì„±)
    INSERT INTO support_tickets ...
  IF (severity == "ê¸´ê¸‰")
    â†’ Slack DM to assignee.user (ì¦‰ì‹œ ì•Œë¦¼)</code></pre>

  <h3 id="example-github-review">ì‚¬ë¡€ 2: GitHub PR AI ì½”ë“œ ë¦¬ë·°</h3>

  <pre><code><span class="cmt"># PR ì˜¤í”ˆ â†’ diff ê°€ì ¸ì˜¤ê¸° â†’ AI ë¦¬ë·° â†’ GitHub ì½”ë©˜íŠ¸</span>

GitHub Trigger
  Event: Pull Request, Action: opened/synchronize
  â†“
Code ë…¸ë“œ (PR ë©”íƒ€ë°ì´í„°)
  const pr = $json.pull_request;
  return [{ json: {
    title: pr.title,
    author: pr.user.login,
    diffUrl: pr.diff_url,
    commentsUrl: pr.comments_url,
    prNumber: pr.number,
    repoFullName: $json.repository.full_name,
  }}];
  â†“
HTTP Request (diff ë‹¤ìš´ë¡œë“œ)
  URL: {{ $json.diffUrl }}
  Headers: Authorization: token {{ $env.GITHUB_TOKEN }}, Accept: application/vnd.github.v3.diff
  â†“
Code ë…¸ë“œ (diff ì „ì²˜ë¦¬)
  const diff = $json.data;
  const MAX_CHARS = 12000;
  const truncated = diff.length > MAX_CHARS
    ? diff.slice(0, MAX_CHARS) + '\n... (ì´í•˜ ìƒëµ)'
    : diff;
  const addedLines = (diff.match(/^\+[^+]/mg) ?? []).length;
  const removedLines = (diff.match(/^-[^-]/mg) ?? []).length;
  return [{ json: { diff: truncated, addedLines, removedLines } }];
  â†“
Basic LLM Chain (claude-opus-4-6)
  System: |
    ë‹¹ì‹ ì€ ì‹œë‹ˆì–´ ì†Œí”„íŠ¸ì›¨ì–´ ì—”ì§€ë‹ˆì–´ì…ë‹ˆë‹¤.
    PR ì½”ë“œ ë³€ê²½ì‚¬í•­ì„ ë¶„ì„í•˜ê³  ê±´ì„¤ì ì¸ í”¼ë“œë°±ì„ ì‘ì„±í•˜ì„¸ìš”.

    ## ë¦¬ë·° í•­ëª© (ì¤‘ìš”ë„ ìˆœ)
    1. ğŸ› ë²„ê·¸ ë° ì ì¬ì  ì˜¤ë¥˜
    2. ğŸ”’ ë³´ì•ˆ ì·¨ì•½ì 
    3. âš¡ ì„±ëŠ¥ ì´ìŠˆ
    4. ğŸ—ï¸ ì½”ë“œ êµ¬ì¡° ë° ê°€ë…ì„±
    5. ğŸ§ª í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€
    6. âœ… ì˜ëœ ì 

    ê° í•­ëª©ì— í•´ë‹¹í•˜ëŠ” ë‚´ìš©ì´ ì—†ìœ¼ë©´ ìƒëµí•˜ì„¸ìš”.
    êµ¬ì²´ì ì¸ ì½”ë“œ ë¼ì¸ì„ ì¸ìš©í•˜ë©´ ë” ì¢‹ìŠµë‹ˆë‹¤.
  User: |
    PR ì œëª©: {{ $node["Code"].json.title }}
    ì‘ì„±ì: {{ $node["Code"].json.author }}
    ë³€ê²½: +{{ $node["Code 1"].json.addedLines }}ì¤„ / -{{ $node["Code 1"].json.removedLines }}ì¤„

    ì½”ë“œ ë³€ê²½ì‚¬í•­:
    ```diff
    {{ $json.diff }}
    ```
  â†“
HTTP Request (GitHub ì½”ë©˜íŠ¸ ë“±ë¡)
  URL: https://api.github.com/repos/{{ $node["Code"].json.repoFullName }}/issues/{{ $node["Code"].json.prNumber }}/comments
  Method: POST
  Headers: Authorization: token {{ $env.GITHUB_TOKEN }}
  Body: { "body": "## ğŸ¤– AI ì½”ë“œ ë¦¬ë·°\n\n{{ $json.text }}\n\n---\n*ìë™ ìƒì„±ëœ ë¦¬ë·°ì…ë‹ˆë‹¤. ì°¸ê³ ìš©ìœ¼ë¡œ í™œìš©í•˜ì„¸ìš”.*" }</code></pre>

  <h3 id="example-content-pipeline">ì‚¬ë¡€ 3: AI ì½˜í…ì¸  ìƒì„± íŒŒì´í”„ë¼ì¸</h3>

  <pre><code><span class="cmt"># ì£¼ì œ ì…ë ¥ â†’ AI ë¦¬ì„œì¹˜ â†’ ì´ˆì•ˆ ì‘ì„± â†’ SEO ìµœì í™” â†’ ë°œí–‰</span>

Webhook Trigger
  Body: { "topic": "n8nìœ¼ë¡œ AI ìë™í™” êµ¬ì¶•í•˜ê¸°", "language": "ko", "targetLength": 1500 }
  â†“
AI Agent (ë¦¬ì„œì¹˜ ì—ì´ì „íŠ¸)
  Tools: Wikipedia, SerpAPI, HTTP Request (ë‰´ìŠ¤ API)
  System: ì£¼ì œì— ëŒ€í•œ ìµœì‹  ì •ë³´ë¥¼ ìˆ˜ì§‘í•˜ê³  JSONìœ¼ë¡œ ìš”ì•½í•˜ì„¸ìš”.
  â†“
Basic LLM Chain (ì´ˆì•ˆ ì‘ì„±, claude-opus-4-6)
  Prompt: |
    ë¦¬ì„œì¹˜ ê²°ê³¼ë¥¼ ë°”íƒ•ìœ¼ë¡œ ë¸”ë¡œê·¸ í¬ìŠ¤íŠ¸ ì´ˆì•ˆì„ ì‘ì„±í•˜ì„¸ìš”.
    - ì–¸ì–´: {{ $json.language }}
    - ëª©í‘œ ê¸¸ì´: {{ $json.targetLength }}ì
    - H2/H3 êµ¬ì¡°, ì˜ˆì œ ì½”ë“œ í¬í•¨
    - SEO ìµœì í™”ëœ ì œëª©ê³¼ ì†Œì œëª©

    ë¦¬ì„œì¹˜ ê²°ê³¼:
    {{ $json.research }}
  â†“
Basic LLM Chain (SEO ë©”íƒ€ë°ì´í„° ì¶”ì¶œ, claude-haiku-4-5)
  Prompt: |
    ë‹¤ìŒ ë¸”ë¡œê·¸ í¬ìŠ¤íŠ¸ì—ì„œ SEO ë©”íƒ€ë°ì´í„°ë¥¼ JSONìœ¼ë¡œ ì¶”ì¶œí•˜ì„¸ìš”.
    - title: SEO ìµœì í™” ì œëª© (60ì ì´ë‚´)
    - description: ë©”íƒ€ ì„¤ëª… (160ì ì´ë‚´)
    - keywords: í•µì‹¬ í‚¤ì›Œë“œ ë°°ì—´ (5-10ê°œ)
    - readingTime: ì˜ˆìƒ ì½ê¸° ì‹œê°„ (ë¶„)

    {{ $json.text }}

Output Parser â†’ Structured Output Parser
  â†“
[ë³‘ë ¬]
  HTTP Request (WordPress API ë°œí–‰ ë˜ëŠ” Notion ì €ì¥)
  Google Sheets (ì½˜í…ì¸  ìº˜ë¦°ë” ê¸°ë¡)
  Slack (íŒ€ ì•Œë¦¼: ìƒˆ í¬ìŠ¤íŠ¸ ì´ˆì•ˆ ì™„ë£Œ)</code></pre>

  <h3 id="example-incident">ì‚¬ë¡€ 4: AI ì¥ì•  ëŒ€ì‘ ìë™í™”</h3>

  <pre><code><span class="cmt"># ëª¨ë‹ˆí„°ë§ ì•Œë¦¼ â†’ AI ì›ì¸ ë¶„ì„ â†’ ìë™ ë³µêµ¬ ì‹œë„ â†’ ì—ìŠ¤ì»¬ë ˆì´ì…˜</span>

Webhook Trigger (Prometheus AlertManager)
  Body: { "alertname": "HighCPUUsage", "service": "api-server", "severity": "critical" }
  â†“
Code ë…¸ë“œ (ê²½ë³´ íŒŒì‹±)
  const alert = $json.alerts[0];
  return [{ json: {
    alertname: alert.labels.alertname,
    service: alert.labels.service,
    severity: alert.labels.severity,
    startedAt: alert.startsAt,
    description: alert.annotations.description,
  }}];
  â†“
[ë³‘ë ¬]
  HTTP Request (ìµœê·¼ ë¡œê·¸ ì¡°íšŒ - Loki/Elasticsearch)
  HTTP Request (ë©”íŠ¸ë¦­ ì¡°íšŒ - Prometheus)
  PostgreSQL (ìµœê·¼ ë°°í¬ ì´ë ¥)
  â†“ (Merge)
AI Agent (ì›ì¸ ë¶„ì„ + ë³µêµ¬ ë°©ì•ˆ)
  System: |
    DevOps ì „ë¬¸ê°€ë¡œì„œ ì¥ì•  ì›ì¸ì„ ë¶„ì„í•˜ê³  ì¦‰ì‹œ ì¡°ì¹˜ ë°©ì•ˆì„ ì œì‹œí•˜ì„¸ìš”.
    ì œê³µëœ ë„êµ¬ë¡œ ì¶”ê°€ ì¡°ì‚¬ë¥¼ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
    ë³µêµ¬ ëª…ë ¹ì–´ëŠ” ë°˜ë“œì‹œ ì‹¤í–‰ ì „ ìŠ¹ì¸ì„ ìš”ì²­í•˜ì„¸ìš”.
  Tools:
    â†’ SSH Command Tool (ì„œë²„ ëª…ë ¹ì–´ ì‹¤í–‰)
    â†’ Kubernetes API Tool (Pod ì¬ì‹œì‘ ë“±)
  User: |
    ì¥ì•  ë‚´ìš©:
    {{ $json.description }}

    ìµœê·¼ ë¡œê·¸: {{ $json.logs }}
    ë©”íŠ¸ë¦­: {{ $json.metrics }}
    ìµœê·¼ ë°°í¬: {{ $json.deployments }}
  â†“
Slack ë…¸ë“œ (ì¦‰ì‹œ ì•Œë¦¼ + AI ë¶„ì„ ê²°ê³¼)
  Channel: #incidents
  Text: |
    ğŸš¨ *{{ $json.alertname }}* - {{ $json.service }}
    AI ë¶„ì„: {{ $json.output }}
  â†“
IF (severity == "critical" && ìë™ ë³µêµ¬ ì œì•ˆ ìˆìŒ)
  â†’ Human-in-the-Loop (ìŠ¹ì¸ í›„ ë³µêµ¬ ì‹¤í–‰)
  â†’ PagerDuty (ì˜¨ì½œ ë‹´ë‹¹ì í˜¸ì¶œ)</code></pre>

  <h3 id="example-lead-scoring">ì‚¬ë¡€ 5: AI ë¦¬ë“œ ìŠ¤ì½”ì–´ë§</h3>

  <pre><code><span class="cmt"># CRM ì‹ ê·œ ë¦¬ë“œ â†’ AI ë¶„ì„ â†’ ì ìˆ˜ ì‚°ì¶œ â†’ ì˜ì—…íŒ€ ë¼ìš°íŒ…</span>

HubSpot Trigger (ìƒˆ Contact ìƒì„±)
  â†“
HTTP Request (íšŒì‚¬ ì •ë³´ ë³´ê°• - Clearbit/Apollo)
  URL: https://company.clearbit.com/v2/companies/find
  Query: domain={{ $json.company.domain }}
  â†“
Basic LLM Chain (claude-opus-4-6)
  System: |
    B2B SaaS ì˜ì—… ì „ë¬¸ê°€ë¡œì„œ ë¦¬ë“œë¥¼ ë¶„ì„í•˜ê³  ì ìˆ˜ë¥¼ ì‚°ì¶œí•˜ì„¸ìš”.

    ì ìˆ˜ ê¸°ì¤€ (0-100ì ):
    - íšŒì‚¬ ê·œëª¨ (ì§ì› ìˆ˜): ëŒ€ê¸°ì—… 30ì , ì¤‘ê¸°ì—… 20ì , ì†Œê¸°ì—… 10ì 
    - ì—…ì¢… ì í•©ì„±: AI/Tech 25ì , ì œì¡° 15ì , ì„œë¹„ìŠ¤ 10ì 
    - íƒ€ì´í‹€ ì í•©ì„±: Cë ˆë²¨/VP 20ì , ë§¤ë‹ˆì € 15ì , ì¼ë°˜ 5ì 
    - ì¸ê²Œì´ì§€ë¨¼íŠ¸: ë°ëª¨ ì‹ ì²­ 25ì , ì½˜í…ì¸  ë‹¤ìš´ 15ì , ë°©ë¬¸ë§Œ 5ì 

    JSONìœ¼ë¡œë§Œ ì‘ë‹µ: { "score": number, "tier": "A|B|C", "reason": string, "nextAction": string }
  User: |
    ì´ë¦„: {{ $json.firstname }} {{ $json.lastname }}
    ì§ì±…: {{ $json.jobtitle }}
    íšŒì‚¬: {{ $json.company }}
    ì§ì› ìˆ˜: {{ $json.company_size }}
    ì—…ì¢…: {{ $json.industry }}
    ìœ ì… ê²½ë¡œ: {{ $json.lead_source }}

Output Parser â†’ Structured Output Parser
  â†“
HubSpot ë…¸ë“œ (ë¦¬ë“œ ì ìˆ˜ ì—…ë°ì´íŠ¸)
  Update Contact Property: lead_score, lead_tier, ai_reason
  â†“
Switch (tier)
  "A" â†’ ì˜ì—…íŒ€ ì¦‰ì‹œ ì•Œë¦¼ + ìë™ ë¯¸íŒ… ì¼ì • ì œì•ˆ
  "B" â†’ ì´ë©”ì¼ ì‹œí€€ìŠ¤ ë“±ë¡
  "C" â†’ ë‰´ìŠ¤ë ˆí„°ë§Œ êµ¬ë…</code></pre>
</section>

<section class="content-section">
  <h2 id="security-prompt">í”„ë¡¬í”„íŠ¸ ë³´ì•ˆ</h2>

  <h3 id="prompt-injection">í”„ë¡¬í”„íŠ¸ ì¸ì ì…˜ ë°©ì§€</h3>

  <pre><code><span class="cmt">// Code ë…¸ë“œ â€” ì‚¬ìš©ì ì…ë ¥ ìœ„ìƒì²˜ë¦¬</span>
<span class="kw">const</span> userInput = $json.userMessage;

<span class="cmt">// 1. ê¸¸ì´ ì œí•œ</span>
<span class="kw">if</span> (userInput.length > <span class="num">2000</span>) {
  <span class="kw">throw new</span> <span class="type">Error</span>(<span class="str">'ì…ë ¥ì´ ë„ˆë¬´ ê¹ë‹ˆë‹¤ (ìµœëŒ€ 2000ì)'</span>);
}

<span class="cmt">// 2. ì¸ì ì…˜ íŒ¨í„´ ê°ì§€</span>
<span class="kw">const</span> injectionPatterns = [
  <span class="str">/ignore\s+(all\s+)?previous\s+instructions/i</span>,
  <span class="str">/system\s+prompt/i</span>,
  <span class="str">/jailbreak/i</span>,
  <span class="str">/\[INST\]/i</span>,
  <span class="str">/&lt;system&gt;/i</span>,
];
<span class="kw">for</span> (<span class="kw">const</span> pattern <span class="kw">of</span> injectionPatterns) {
  <span class="kw">if</span> (pattern.test(userInput)) {
    <span class="kw">throw new</span> <span class="type">Error</span>(<span class="str">'í—ˆìš©ë˜ì§€ ì•ŠëŠ” ì…ë ¥ì…ë‹ˆë‹¤'</span>);
  }
}

<span class="cmt">// 3. íŠ¹ìˆ˜ ë¬¸ì ì´ìŠ¤ì¼€ì´í”„ (SQL ì¸ì ì…˜ ë°©ì§€)</span>
<span class="kw">const</span> sanitized = userInput
  .replace(<span class="str">/[<>&"']/g</span>, c => ({
    <span class="str">'<'</span>: <span class="str">'&lt;'</span>, <span class="str">'>'</span>: <span class="str">'&gt;'</span>, <span class="str">'&'</span>: <span class="str">'&amp;'</span>,
    <span class="str">'"'</span>: <span class="str">'&quot;'</span>, <span class="str">"'"</span>: <span class="str">'&#39;'</span>
  }[c]));

<span class="kw">return</span> [{ json: { sanitizedInput: sanitized } }];</code></pre>

  <h3 id="rate-limiting">Rate Limiting</h3>

  <pre><code><span class="cmt">// Code ë…¸ë“œ â€” ì‚¬ìš©ìë³„ ìš”ì²­ ì œí•œ (Redis ê¸°ë°˜)</span>
<span class="kw">const</span> userId = $json.userId;
<span class="kw">const</span> key = <span class="str">`ratelimit:${userId}:${$now.toFormat('yyyy-MM-dd-HH')}`</span>;
<span class="kw">const</span> MAX_REQUESTS_PER_HOUR = <span class="num">20</span>;

<span class="cmt">// ë‹¤ìŒ Redis ë…¸ë“œì—ì„œ:</span>
<span class="cmt">// INCR key â†’ TTL 3600 â†’ IF count > MAX â†’ 429 ë°˜í™˜</span>
<span class="kw">return</span> [{ json: { ratelimitKey: key, maxRequests: MAX_REQUESTS_PER_HOUR } }];</code></pre>
</section>

<section class="content-section">
  <h2 id="cost-optimization">AI ë¹„ìš© ìµœì í™”</h2>

  <h3 id="cost-model-routing">ëª¨ë¸ ë¼ìš°íŒ… ì „ëµ</h3>

  <pre><code><span class="cmt">// Code ë…¸ë“œ â€” ë³µì¡ë„ ê¸°ë°˜ ëª¨ë¸ ìë™ ì„ íƒ</span>
<span class="kw">const</span> { prompt, taskType } = $json;
<span class="kw">const</span> tokenEstimate = Math.ceil(prompt.length / <span class="num">3.5</span>);

<span class="kw">let</span> model, temperature;

<span class="kw">if</span> (taskType === <span class="str">'classification'</span> || tokenEstimate < <span class="num">500</span>) {
  model = <span class="str">'claude-haiku-4-5'</span>;  <span class="cmt">// ë¹ ë¥´ê³  ì €ë ´</span>
  temperature = <span class="num">0</span>;
} <span class="kw">else if</span> (taskType === <span class="str">'code'</span> || tokenEstimate < <span class="num">2000</span>) {
  model = <span class="str">'claude-sonnet-4-6'</span>;  <span class="cmt">// ê· í˜•</span>
  temperature = <span class="num">0.3</span>;
} <span class="kw">else</span> {
  model = <span class="str">'claude-opus-4-6'</span>;    <span class="cmt">// ë³µì¡í•œ ì¶”ë¡ </span>
  temperature = <span class="num">0.7</span>;
}

<span class="kw">return</span> [{ json: { ...($json), model, temperature } }];</code></pre>

  <h3 id="cost-caching">í”„ë¡¬í”„íŠ¸ ìºì‹± (Anthropic)</h3>

  <pre><code><span class="cmt"># ê¸´ ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ì— ìºì‹œ í™œì„±í™” â†’ ë¹„ìš© 90% ì ˆê°</span>
<span class="cmt"># ìµœì†Œ 1024 í† í° ì´ìƒì¸ ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ì— ì ìš©</span>

{
  "system": [
    {
      "type": "text",
      "text": "{{ $json.longSystemPrompt }}",
      "cache_control": { "type": "ephemeral" }  <span class="cmt"># ì´ ë¶€ë¶„ ìºì‹œ</span>
    }
  ],
  "messages": [
    { "role": "user", "content": "{{ $json.userMessage }}" }
  ]
}

<span class="cmt"># ìºì‹œ íˆíŠ¸ ì‹œ ë¹„ìš©</span>
<span class="cmt"># ì…ë ¥ í† í°: $3/MTok â†’ $0.30/MTok (90% ì ˆê°)</span>
<span class="cmt"># ìœ íš¨ ì‹œê°„: 5ë¶„ (í˜¸ì¶œí•  ë•Œë§ˆë‹¤ ê°±ì‹ )</span></code></pre>

  <table>
    <thead>
      <tr><th>ì‘ì—… ìœ í˜•</th><th>ê¶Œì¥ ëª¨ë¸</th><th>ì´ìœ </th></tr>
    </thead>
    <tbody>
      <tr><td>ë¶„ë¥˜Â·íƒœê¹…Â·ê°ì •ë¶„ì„</td><td>claude-haiku-4-5</td><td>ë‹¨ìˆœ ì‘ì—…, ì†ë„Â·ë¹„ìš© ìš°ì„ </td></tr>
      <tr><td>ìš”ì•½Â·ë²ˆì—­Â·ì¶”ì¶œ</td><td>claude-haiku-4-5 / sonnet</td><td>ì¶©ë¶„í•œ í’ˆì§ˆ, ì €ë¹„ìš©</td></tr>
      <tr><td>ì½”ë“œ ìƒì„±Â·ë¦¬ë·°</td><td>claude-sonnet-4-6</td><td>í’ˆì§ˆ-ë¹„ìš© ê· í˜•</td></tr>
      <tr><td>ë³µì¡í•œ ì¶”ë¡ Â·ì—ì´ì „íŠ¸</td><td>claude-opus-4-6</td><td>ìµœê³  í’ˆì§ˆ í•„ìš”</td></tr>
      <tr><td>ëŒ€ëŸ‰ ë°˜ë³µ ì²˜ë¦¬</td><td>Ollama (ë¡œì»¬)</td><td>ë¹„ìš© ì œë¡œ, í”„ë¼ì´ë²„ì‹œ</td></tr>
      <tr><td>ë¹ ë¥¸ ì¶”ë¡  (ì €ì§€ì—°)</td><td>Groq (Llama)</td><td>ë¬´ë£Œ í‹°ì–´, ì´ˆê³ ì†</td></tr>
    </tbody>
  </table>
</section>

<section class="content-section">
  <h2 id="next-steps">ë‹¤ìŒ ë‹¨ê³„</h2>

  <div class="info-box info">
    <div class="info-box-title">ğŸ“š ê´€ë ¨ ê°€ì´ë“œ</div>
    <ul>
      <li><a href="n8n-intro.html">n8n ê¸°ì´ˆ</a> â€” ì„¤ì¹˜, í•µì‹¬ ê°œë…, ë…¸ë“œ ë ˆí¼ëŸ°ìŠ¤</li>
      <li><a href="n8n-advanced.html">n8n ê³ ê¸‰ í™œìš©</a> â€” ì»¤ìŠ¤í…€ ë…¸ë“œ, ìš´ì˜ ë°°í¬, ë³´ì•ˆ</li>
      <li><a href="claude-api.html">Claude API ê°€ì´ë“œ</a> â€” Anthropic API ì‹¬ì¸µ í™œìš©</li>
      <li><a href="mcp-intro.html">MCPë€?</a> â€” Claudeì™€ ì™¸ë¶€ ë„êµ¬ ì—°ë™</li>
    </ul>
  </div>
</section>

<nav class="page-nav"></nav>
</main>

<aside class="inline-toc">
  <div class="toc-title">ëª©ì°¨</div>
  <div class="toc-nav"></div>
</aside>
<footer class="site-footer"></footer>

</div>
<script src="../js/main.js"></script>
</body>
</html>
