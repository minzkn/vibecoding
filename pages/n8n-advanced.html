<!DOCTYPE html>
<html lang="ko" data-theme="dark-kernel">
<head>
<!-- BEGIN: Google adsense -->
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2110881342960271" crossorigin="anonymous"></script>
<!-- END: Google adsense -->
<!-- BEGIN: Google adsense repair -->
<script async src="https://fundingchoicesmessages.google.com/i/pub-2110881342960271?ers=1" nonce="laI6FT8gpRxugDJv5AGJRA"></script><script nonce="laI6FT8gpRxugDJv5AGJRA">(function() {function signalGooglefcPresent() {if (!window.frames['googlefcPresent']) {if (document.body) {const iframe = document.createElement('iframe'); iframe.style = 'width: 0; height: 0; border: none; z-index: -1000; left: -1000px; top: -1000px;'; iframe.style.display = 'none'; iframe.name = 'googlefcPresent'; document.body.appendChild(iframe);} else {setTimeout(signalGooglefcPresent, 0);}}}signalGooglefcPresent();})();</script>
<!-- END: Google adsense repair -->
<!-- BEGIN: Google analytics -->
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-1VWQF060SX"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-1VWQF060SX');
</script>
<!-- END: Google analytics -->

<script>
(function(){var m=document.cookie.match(/claude_theme=([^;]+)/);if(m)document.documentElement.setAttribute('data-theme',m[1]);})();
</script>
<meta charset="UTF-8">
<meta property="og:type" content="article">
<meta property="og:site_name" content="AI Vibe Coding ê°€ì´ë“œ /with MINZKN">
<meta property="og:title" content="n8n ê³ ê¸‰ í™œìš©">
<meta property="og:description" content="n8n ì»¤ìŠ¤í…€ ë…¸ë“œ ê°œë°œ, ì„œë¸Œì›Œí¬í”Œë¡œìš°, Docker ìš´ì˜ ë°°í¬, ë³´ì•ˆ ì„¤ì •, ì„±ëŠ¥ ìµœì í™”, ëª¨ë‹ˆí„°ë§ ì™„ì „ ê°€ì´ë“œ">
<meta property="og:url" content="https://minzkn.com/claude/pages/n8n-advanced.html">
<meta property="og:image" content="https://minzkn.com/claude/images/og-image.png">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="n8n ì»¤ìŠ¤í…€ ë…¸ë“œ ê°œë°œ, ì„œë¸Œì›Œí¬í”Œë¡œìš°, Docker ìš´ì˜ ë°°í¬, ë³´ì•ˆ ì„¤ì •, ì„±ëŠ¥ ìµœì í™”, ëª¨ë‹ˆí„°ë§ ì™„ì „ ê°€ì´ë“œ">
<meta name="keywords" content="n8n ê³ ê¸‰, ì»¤ìŠ¤í…€ ë…¸ë“œ, n8n ë°°í¬, n8n ë³´ì•ˆ, n8n ì„±ëŠ¥, n8n ëª¨ë‹ˆí„°ë§, n8n Docker, n8n ì„œë¸Œì›Œí¬í”Œë¡œìš°">
<meta name="author" content="MINZKN">
<title>n8n ê³ ê¸‰ í™œìš© - AI Vibe Coding ê°€ì´ë“œ /with MINZKN</title>
<link rel="icon" type="image/svg+xml" href="../images/favicon.svg">
<link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/joungkyun/font-d2coding/d2coding.css">
<link rel="stylesheet" href="../css/themes.css">
<link rel="stylesheet" href="../css/style.css">
<link rel="stylesheet" href="../css/responsive.css">
</head>
<body>
<div class="page-wrapper">

<header class="site-header"></header>
<nav class="side-nav" aria-label="ì‚¬ì´íŠ¸ ë‚´ë¹„ê²Œì´ì…˜"></nav>

<main class="main-content">
<div class="breadcrumb"></div>

<h1 id="top">n8n ê³ ê¸‰ í™œìš©</h1>
<p class="lead">ì»¤ìŠ¤í…€ ë…¸ë“œ ê°œë°œ, ì„œë¸Œì›Œí¬í”Œë¡œìš° ëª¨ë“ˆí™”, Docker ìš´ì˜ ë°°í¬, ë³´ì•ˆ ê°•í™”, ì„±ëŠ¥ ìµœì í™”, ëª¨ë‹ˆí„°ë§ê¹Œì§€ â€” n8nì„ í”„ë¡œë•ì…˜ ìˆ˜ì¤€ìœ¼ë¡œ ìš´ì˜í•˜ëŠ” ì™„ì „ ê°€ì´ë“œ</p>

<section class="content-section">
  <h2 id="subworkflow">ì„œë¸Œì›Œí¬í”Œë¡œìš° & ëª¨ë“ˆí™”</h2>

  <p>
    ëŒ€ê·œëª¨ ìë™í™” ì‹œìŠ¤í…œì„ êµ¬ì¶•í•˜ë©´ ì›Œí¬í”Œë¡œìš°ê°€ ë³µì¡í•´ì§‘ë‹ˆë‹¤.
    <strong>ì„œë¸Œì›Œí¬í”Œë¡œìš°(Sub-Workflow)</strong>ëŠ” ê³µí†µ ë¡œì§ì„ ë³„ë„ ì›Œí¬í”Œë¡œìš°ë¡œ ë¶„ë¦¬í•˜ê³ 
    ì¬ì‚¬ìš©í•˜ëŠ” ëª¨ë“ˆí™” íŒ¨í„´ì…ë‹ˆë‹¤.
  </p>

  <h3 id="subworkflow-structure">ì„œë¸Œì›Œí¬í”Œë¡œìš° êµ¬ì¡°</h3>

  <svg viewBox="0 0 800 340" class="diagram" role="img" aria-label="ì„œë¸Œì›Œí¬í”Œë¡œìš° êµ¬ì¡°">
    <defs>
      <marker id="n8n-adv-arrow" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
        <polygon points="0 0, 10 3, 0 6" fill="var(--diagram-arrow)" />
      </marker>
    </defs>

    <!-- ë©”ì¸ ì›Œí¬í”Œë¡œìš° -->
    <rect x="20" y="20" width="740" height="140" fill="var(--diagram-fill)" stroke="var(--diagram-accent)" stroke-width="2" rx="8"/>
    <text x="40" y="45" fill="var(--diagram-accent)" font-size="13" font-weight="bold">ë©”ì¸ ì›Œí¬í”Œë¡œìš°</text>

    <rect x="40" y="60" width="110" height="50" fill="var(--diagram-fill)" stroke="var(--diagram-stroke)" stroke-width="1.5" rx="5"/>
    <text x="95" y="88" fill="var(--diagram-text)" text-anchor="middle" font-size="12">Webhook Trigger</text>

    <rect x="185" y="60" width="110" height="50" fill="var(--diagram-fill)" stroke="var(--diagram-stroke)" stroke-width="1.5" rx="5"/>
    <text x="240" y="88" fill="var(--diagram-text)" text-anchor="middle" font-size="12">ë°ì´í„° ê²€ì¦</text>

    <rect x="330" y="60" width="130" height="50" fill="var(--diagram-fill)" stroke="var(--diagram-accent)" stroke-width="2" rx="5"/>
    <text x="395" y="83" fill="var(--diagram-accent)" text-anchor="middle" font-size="12" font-weight="bold">Execute Workflow</text>
    <text x="395" y="100" fill="var(--text-secondary)" text-anchor="middle" font-size="10">AI ì²˜ë¦¬ ì„œë¸Œì›Œí¬í”Œë¡œìš°</text>

    <rect x="495" y="60" width="130" height="50" fill="var(--diagram-fill)" stroke="var(--diagram-accent)" stroke-width="2" rx="5"/>
    <text x="560" y="83" fill="var(--diagram-accent)" text-anchor="middle" font-size="12" font-weight="bold">Execute Workflow</text>
    <text x="560" y="100" fill="var(--text-secondary)" text-anchor="middle" font-size="10">ì•Œë¦¼ ì„œë¸Œì›Œí¬í”Œë¡œìš°</text>

    <rect x="660" y="60" width="80" height="50" fill="var(--diagram-fill)" stroke="var(--diagram-stroke)" stroke-width="1.5" rx="5"/>
    <text x="700" y="88" fill="var(--diagram-text)" text-anchor="middle" font-size="12">ì‘ë‹µ</text>

    <line x1="150" y1="85" x2="185" y2="85" stroke="var(--diagram-arrow)" stroke-width="1.5" marker-end="url(#n8n-adv-arrow)"/>
    <line x1="295" y1="85" x2="330" y2="85" stroke="var(--diagram-arrow)" stroke-width="1.5" marker-end="url(#n8n-adv-arrow)"/>
    <line x1="460" y1="85" x2="495" y2="85" stroke="var(--diagram-arrow)" stroke-width="1.5" marker-end="url(#n8n-adv-arrow)"/>
    <line x1="625" y1="85" x2="660" y2="85" stroke="var(--diagram-arrow)" stroke-width="1.5" marker-end="url(#n8n-adv-arrow)"/>

    <!-- ì„œë¸Œì›Œí¬í”Œë¡œìš°ë“¤ -->
    <rect x="250" y="200" width="200" height="120" fill="var(--diagram-fill)" stroke="var(--diagram-stroke)" stroke-width="1.5" rx="8"/>
    <text x="350" y="225" fill="var(--diagram-text)" text-anchor="middle" font-size="12" font-weight="bold">AI ì²˜ë¦¬ ì„œë¸Œì›Œí¬í”Œë¡œìš°</text>
    <text x="350" y="245" fill="var(--text-secondary)" text-anchor="middle" font-size="10">Execute Workflow Trigger</text>
    <text x="350" y="263" fill="var(--text-secondary)" text-anchor="middle" font-size="10">â†’ Claude AI Chain</text>
    <text x="350" y="281" fill="var(--text-secondary)" text-anchor="middle" font-size="10">â†’ ê²°ê³¼ í¬ë§·</text>
    <text x="350" y="299" fill="var(--text-secondary)" text-anchor="middle" font-size="10">â†’ Respond to Workflow</text>

    <rect x="490" y="200" width="200" height="120" fill="var(--diagram-fill)" stroke="var(--diagram-stroke)" stroke-width="1.5" rx="8"/>
    <text x="590" y="225" fill="var(--diagram-text)" text-anchor="middle" font-size="12" font-weight="bold">ì•Œë¦¼ ì„œë¸Œì›Œí¬í”Œë¡œìš°</text>
    <text x="590" y="245" fill="var(--text-secondary)" text-anchor="middle" font-size="10">Execute Workflow Trigger</text>
    <text x="590" y="263" fill="var(--text-secondary)" text-anchor="middle" font-size="10">â†’ IF (ê¸´ê¸‰ ì—¬ë¶€)</text>
    <text x="590" y="281" fill="var(--text-secondary)" text-anchor="middle" font-size="10">â†’ Slack / Email</text>
    <text x="590" y="299" fill="var(--text-secondary)" text-anchor="middle" font-size="10">â†’ DB ë¡œê·¸</text>

    <!-- ì—°ê²° í™”ì‚´í‘œ -->
    <line x1="395" y1="110" x2="350" y2="200" stroke="var(--diagram-arrow)" stroke-width="1.5" stroke-dasharray="5,3" marker-end="url(#n8n-adv-arrow)"/>
    <line x1="560" y1="110" x2="590" y2="200" stroke="var(--diagram-arrow)" stroke-width="1.5" stroke-dasharray="5,3" marker-end="url(#n8n-adv-arrow)"/>
  </svg>
  <p class="diagram-caption">ì„œë¸Œì›Œí¬í”Œë¡œìš° ëª¨ë“ˆí™”: ë©”ì¸ ì›Œí¬í”Œë¡œìš°ì—ì„œ Execute Workflow ë…¸ë“œë¡œ ì„œë¸Œì›Œí¬í”Œë¡œìš° í˜¸ì¶œ</p>

  <h3 id="subworkflow-create">ì„œë¸Œì›Œí¬í”Œë¡œìš° ë§Œë“¤ê¸°</h3>

  <pre><code><span class="cmt"># ì„œë¸Œì›Œí¬í”Œë¡œìš° êµ¬ì„± (ë³„ë„ ì›Œí¬í”Œë¡œìš°)</span>

<span class="cmt"># 1. íŠ¸ë¦¬ê±°: Execute Workflow Trigger</span>
ë…¸ë“œ: Execute Workflow Trigger
  <span class="cmt"># ì´ ë…¸ë“œê°€ ìˆì–´ì•¼ ì„œë¸Œì›Œí¬í”Œë¡œìš°ë¡œ í˜¸ì¶œ ê°€ëŠ¥</span>
  <span class="cmt"># ì…ë ¥ íŒŒë¼ë¯¸í„°ë¥¼ $jsonìœ¼ë¡œ ë°›ìŒ</span>
  â†“

<span class="cmt"># 2. ì²˜ë¦¬ ë¡œì§</span>
Basic LLM Chain
  User Message: {{ $json.prompt }}
  â†“

Code ë…¸ë“œ (ê²°ê³¼ ê°€ê³µ)
  â†“

<span class="cmt"># 3. ê²°ê³¼ ë°˜í™˜</span>
<span class="cmt"># ë§ˆì§€ë§‰ ë…¸ë“œì˜ ì¶œë ¥ì´ ìë™ìœ¼ë¡œ í˜¸ì¶œìì—ê²Œ ë°˜í™˜ë¨</span></code></pre>

  <pre><code><span class="cmt"># ë©”ì¸ ì›Œí¬í”Œë¡œìš°ì—ì„œ ì„œë¸Œì›Œí¬í”Œë¡œìš° í˜¸ì¶œ</span>

Execute Workflow ë…¸ë“œ
  Source: Database (ì›Œí¬í”Œë¡œìš° ì´ë¦„/IDë¡œ ì„ íƒ)
  Workflow: "AI ì²˜ë¦¬ ì„œë¸Œì›Œí¬í”Œë¡œìš°"

  <span class="cmt"># ë°ì´í„° ì „ë‹¬ ë°©ë²•</span>
  Wait For Sub-Workflow: true   <span class="cmt"># ì™„ë£Œê¹Œì§€ ëŒ€ê¸° (ë™ê¸°)</span>

  Input Data:
    prompt: {{ $json.userPrompt }}
    language: {{ $json.language }}
    maxTokens: 2048</code></pre>

  <h3 id="subworkflow-patterns">ì„œë¸Œì›Œí¬í”Œë¡œìš° íŒ¨í„´</h3>

  <pre><code><span class="cmt"># íŒ¨í„´ 1: ê³µí†µ ì•Œë¦¼ ì„œë¸Œì›Œí¬í”Œë¡œìš°</span>
<span class="cmt"># ëª¨ë“  ì›Œí¬í”Œë¡œìš°ì—ì„œ ì¬ì‚¬ìš©</span>
Input: { channel, message, severity, metadata }

Switch (severity)
  "error" â†’ PagerDuty + Slack #alerts
  "warning" â†’ Slack #monitoring
  "info" â†’ Slack #general + DB ë¡œê·¸

<span class="cmt">---</span>

<span class="cmt"># íŒ¨í„´ 2: ë°ì´í„° ê²€ì¦ ì„œë¸Œì›Œí¬í”Œë¡œìš°</span>
Input: { data, schema }

Code ë…¸ë“œ (JSON Schema ê²€ì¦)
  const Ajv = require('ajv');
  const ajv = new Ajv();
  const valid = ajv.validate($json.schema, $json.data);

  if (!valid) {
    throw new Error(`ê²€ì¦ ì‹¤íŒ¨: ${ajv.errorsText()}`);
  }

  return [{ json: { valid: true, data: $json.data } }];

<span class="cmt">---</span>

<span class="cmt"># íŒ¨í„´ 3: Rate Limiter ì„œë¸Œì›Œí¬í”Œë¡œìš°</span>
Input: { key, maxRequests, windowSeconds }

Redis ë…¸ë“œ (GET í˜„ì¬ ì¹´ìš´íŠ¸)
  â†“
IF ë…¸ë“œ (ì¹´ìš´íŠ¸ < maxRequests)
  True â†’ Redis INCR + EXPIRE â†’ í†µê³¼
  False â†’ ì—ëŸ¬ ë°˜í™˜ (429 Too Many Requests)</code></pre>
</section>

<section class="content-section">
  <h2 id="error-handling">ì—ëŸ¬ ì²˜ë¦¬ & ì•ˆì •ì„±</h2>

  <h3 id="error-types">ì—ëŸ¬ ì²˜ë¦¬ ì „ëµ</h3>

  <table>
    <thead>
      <tr>
        <th>ì „ëµ</th>
        <th>ì ìš© ë°©ë²•</th>
        <th>ì‚¬ìš© ì‹œë‚˜ë¦¬ì˜¤</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><strong>Continue on Fail</strong></td>
        <td>ë…¸ë“œ ì„¤ì • â†’ "Continue on Fail" ON</td>
        <td>ì—ëŸ¬ ë¬´ì‹œí•˜ê³  ê³„ì† ì§„í–‰ (ë¹„ì¤‘ìš” ì‘ì—…)</td>
      </tr>
      <tr>
        <td><strong>Error Workflow</strong></td>
        <td>Settings â†’ Error Workflow ì§€ì •</td>
        <td>ì›Œí¬í”Œë¡œìš° ì‹¤íŒ¨ ì‹œ ì•Œë¦¼/ë³µêµ¬</td>
      </tr>
      <tr>
        <td><strong>Try/Catch íŒ¨í„´</strong></td>
        <td>Code ë…¸ë“œ + IF ë…¸ë“œ ì¡°í•©</td>
        <td>ë…¸ë“œë³„ ì„¸ë°€í•œ ì—ëŸ¬ ì²˜ë¦¬</td>
      </tr>
      <tr>
        <td><strong>ì¬ì‹œë„ ì„¤ì •</strong></td>
        <td>ë…¸ë“œ â†’ Retry on Fail</td>
        <td>ì¼ì‹œì  API ì˜¤ë¥˜, ë„¤íŠ¸ì›Œí¬ ë¶ˆì•ˆì •</td>
      </tr>
    </tbody>
  </table>

  <h3 id="error-workflow">ì—ëŸ¬ ì›Œí¬í”Œë¡œìš° íŒ¨í„´</h3>

  <pre><code><span class="cmt"># ì—ëŸ¬ ì›Œí¬í”Œë¡œìš° êµ¬ì„±</span>

Error Trigger
  â†“

Code ë…¸ë“œ (ì—ëŸ¬ ì •ë³´ íŒŒì‹±)
  const { execution } = $json;
  const errorInfo = {
    workflowName: execution.workflowData.name,
    workflowId: execution.workflowData.id,
    executionId: execution.id,
    errorNode: execution.lastNodeExecuted,
    errorMessage: execution.data?.resultData?.error?.message || "Unknown",
    errorStack: execution.data?.resultData?.error?.stack || "",
    startedAt: execution.startedAt,
    failedAt: new Date().toISOString(),
    inputData: JSON.stringify(
      execution.data?.resultData?.runData?.[execution.lastNodeExecuted]?.[0]?.data?.main?.[0]?.[0]?.json
    ).slice(0, 500), // ì²˜ìŒ 500ìë§Œ
  };

  return [{ json: errorInfo }];
  â†“

IF ë…¸ë“œ (ì‹¬ê°ë„ ë¶„ë¥˜)
  Condition: {{ $json.errorMessage }} Contains "ECONNREFUSED"
    â†’ "ì¸í”„ë¼ ì—ëŸ¬" (ê¸´ê¸‰)
  Default â†’ "ì¼ë°˜ ì—ëŸ¬"
  â†“ (ê¸´ê¸‰)

PagerDuty ë…¸ë“œ (ì¦‰ì‹œ í˜¸ì¶œ)
  + Slack #incidents ì•Œë¦¼
  â†“ (ì¼ë°˜)

Slack #errors ì•Œë¦¼
  + PostgreSQL ì—ëŸ¬ ë¡œê·¸ ì €ì¥</code></pre>

  <h3 id="retry-pattern">ì¬ì‹œë„ + ì§€ìˆ˜ ë°±ì˜¤í”„</h3>

  <pre><code><span class="cmt">// Code ë…¸ë“œ â€” ì¬ì‹œë„ ë¡œì§ êµ¬í˜„</span>
<span class="kw">async function</span> <span class="fn">withRetry</span>(fn, maxRetries = <span class="num">3</span>, baseDelay = <span class="num">1000</span>) {
  <span class="kw">let</span> lastError;

  <span class="kw">for</span> (<span class="kw">let</span> attempt = <span class="num">0</span>; attempt <= maxRetries; attempt++) {
    <span class="kw">try</span> {
      <span class="kw">return await</span> fn();
    } <span class="kw">catch</span> (error) {
      lastError = error;
      <span class="kw">if</span> (attempt === maxRetries) <span class="kw">break</span>;

      <span class="cmt">// ì§€ìˆ˜ ë°±ì˜¤í”„ + ì§€í„°</span>
      <span class="kw">const</span> delay = baseDelay * Math.pow(<span class="num">2</span>, attempt) +
        Math.random() * <span class="num">1000</span>;
      <span class="kw">await new</span> <span class="type">Promise</span>(resolve => setTimeout(resolve, delay));
    }
  }

  <span class="kw">throw</span> lastError;
}

<span class="cmt">// ì‚¬ìš© ì˜ˆì‹œ</span>
<span class="kw">const</span> result = <span class="kw">await</span> <span class="fn">withRetry</span>(<span class="kw">async</span> () => {
  <span class="kw">const</span> response = <span class="kw">await</span> $helpers.httpRequest({
    method: <span class="str">'POST'</span>,
    url: <span class="str">'https://api.anthropic.com/v1/messages'</span>,
    body: { <span class="cmt">/* ... */</span> },
  });
  <span class="kw">return</span> response;
}, <span class="num">3</span>, <span class="num">2000</span>);

<span class="kw">return</span> [{ json: result }];</code></pre>
</section>

<section class="content-section">
  <h2 id="custom-nodes">ì»¤ìŠ¤í…€ ë…¸ë“œ ê°œë°œ</h2>

  <p>
    ê¸°ë³¸ ì œê³µ ë…¸ë“œë¡œ í•´ê²°ë˜ì§€ ì•ŠëŠ” ê²½ìš°, TypeScriptë¡œ ì»¤ìŠ¤í…€ ë…¸ë“œë¥¼ ê°œë°œí•˜ì—¬
    n8nì— ë“±ë¡í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
  </p>

  <h3 id="custom-node-setup">ê°œë°œ í™˜ê²½ ì„¤ì •</h3>

  <pre><code><span class="cmt"># n8n ì»¤ìŠ¤í…€ ë…¸ë“œ í”„ë¡œì íŠ¸ ì´ˆê¸°í™”</span>
npx n8n-node-dev init

<span class="cmt"># ë˜ëŠ” ìˆ˜ë™ ì„¤ì •</span>
mkdir n8n-nodes-mycustom
cd n8n-nodes-mycustom
npm init -y

npm install -D typescript \
  @types/node \
  n8n-workflow \
  @n8n/n8n-node-dev-utils

<span class="cmt"># tsconfig.json</span>
{
  "compilerOptions": {
    "target": "ES2019",
    "module": "commonjs",
    "strict": true,
    "outDir": "./dist",
    "declaration": true,
    "sourceMap": true
  },
  "include": ["nodes/**/*.ts", "credentials/**/*.ts"]
}</code></pre>

  <h3 id="custom-node-code">ì»¤ìŠ¤í…€ ë…¸ë“œ ì½”ë“œ</h3>

  <pre><code><span class="cmt">// nodes/MyApiNode/MyApiNode.node.ts</span>
<span class="kw">import</span> { IExecuteFunctions, INodeExecutionData, INodeType,
         INodeTypeDescription, NodeOperationError } <span class="kw">from</span> <span class="str">'n8n-workflow'</span>;

<span class="kw">export class</span> <span class="type">MyApiNode</span> <span class="kw">implements</span> <span class="type">INodeType</span> {
  description: <span class="type">INodeTypeDescription</span> = {
    <span class="cmt">// ê¸°ë³¸ ì •ë³´</span>
    displayName: <span class="str">'My Custom API'</span>,
    name: <span class="str">'myApiNode'</span>,
    icon: <span class="str">'file:my-icon.svg'</span>,
    group: [<span class="str">'transform'</span>],
    version: <span class="num">1</span>,
    description: <span class="str">'My Custom API Node'</span>,

    <span class="cmt">// ê¸°ë³¸ê°’</span>
    defaults: {
      name: <span class="str">'My API'</span>,
    },

    <span class="cmt">// ì…ì¶œë ¥ ì„¤ì •</span>
    inputs: [<span class="str">'main'</span>],
    outputs: [<span class="str">'main'</span>],

    <span class="cmt">// ìê²©ì¦ëª…</span>
    credentials: [
      {
        name: <span class="str">'myApiCredentials'</span>,
        required: <span class="kw">true</span>,
      },
    ],

    <span class="cmt">// ë…¸ë“œ íŒŒë¼ë¯¸í„° (UI ì„¤ì • í•„ë“œ)</span>
    properties: [
      {
        displayName: <span class="str">'Operation'</span>,
        name: <span class="str">'operation'</span>,
        type: <span class="str">'options'</span>,
        noDataExpression: <span class="kw">true</span>,
        options: [
          { name: <span class="str">'Get User'</span>, value: <span class="str">'getUser'</span> },
          { name: <span class="str">'Create User'</span>, value: <span class="str">'createUser'</span> },
        ],
        default: <span class="str">'getUser'</span>,
      },
      {
        displayName: <span class="str">'User ID'</span>,
        name: <span class="str">'userId'</span>,
        type: <span class="str">'string'</span>,
        required: <span class="kw">true</span>,
        displayOptions: {
          show: { operation: [<span class="str">'getUser'</span>] },
        },
        default: <span class="str">''</span>,
        placeholder: <span class="str">'user-123'</span>,
      },
    ],
  };

  <span class="cmt">// ì‹¤í–‰ ë¡œì§</span>
  <span class="kw">async</span> <span class="fn">execute</span>(<span class="kw">this</span>: <span class="type">IExecuteFunctions</span>): <span class="type">Promise</span>&lt;<span class="type">INodeExecutionData</span>[][]&gt; {
    <span class="kw">const</span> items = <span class="kw">this</span>.getInputData();
    <span class="kw">const</span> returnData: <span class="type">INodeExecutionData</span>[] = [];

    <span class="cmt">// ìê²©ì¦ëª… ê°€ì ¸ì˜¤ê¸°</span>
    <span class="kw">const</span> credentials = <span class="kw">await this</span>.getCredentials(<span class="str">'myApiCredentials'</span>);
    <span class="kw">const</span> apiKey = credentials.apiKey <span class="kw">as string</span>;

    <span class="kw">for</span> (<span class="kw">let</span> i = <span class="num">0</span>; i < items.length; i++) {
      <span class="kw">try</span> {
        <span class="kw">const</span> operation = <span class="kw">this</span>.getNodeParameter(<span class="str">'operation'</span>, i) <span class="kw">as string</span>;

        <span class="kw">if</span> (operation === <span class="str">'getUser'</span>) {
          <span class="kw">const</span> userId = <span class="kw">this</span>.getNodeParameter(<span class="str">'userId'</span>, i) <span class="kw">as string</span>;

          <span class="kw">const</span> response = <span class="kw">await this</span>.helpers.httpRequest({
            method: <span class="str">'GET'</span>,
            url: <span class="str">`https://api.myservice.com/users/${userId}`</span>,
            headers: {
              <span class="str">'Authorization'</span>: <span class="str">`Bearer ${apiKey}`</span>,
            },
          });

          returnData.push({ json: response });
        }
      } <span class="kw">catch</span> (error) {
        <span class="kw">if</span> (<span class="kw">this</span>.continueOnFail()) {
          returnData.push({
            json: { error: (error <span class="kw">as Error</span>).message },
            pairedItem: { item: i },
          });
          <span class="kw">continue</span>;
        }
        <span class="kw">throw new</span> <span class="type">NodeOperationError</span>(<span class="kw">this</span>.getNode(), error <span class="kw">as Error</span>, {
          itemIndex: i,
        });
      }
    }

    <span class="kw">return</span> [returnData];
  }
}</code></pre>

  <h3 id="custom-node-install">ì»¤ìŠ¤í…€ ë…¸ë“œ ì„¤ì¹˜</h3>

  <pre><code><span class="cmt"># ë¹Œë“œ</span>
npm run build

<span class="cmt"># n8nì— ë“±ë¡ (íŒ¨í‚¤ì§€ë¡œ ì„¤ì¹˜)</span>
cd ~/.n8n
mkdir custom
cp -r /path/to/n8n-nodes-mycustom/dist ./custom/node_modules/n8n-nodes-mycustom

<span class="cmt"># package.json ìˆ˜ì •</span>
{
  "n8n": {
    "nodes": ["dist/nodes/MyApiNode/MyApiNode.node.js"],
    "credentials": ["dist/credentials/MyApiCredentials.credentials.js"]
  }
}

<span class="cmt"># í™˜ê²½ ë³€ìˆ˜ë¡œ ì»¤ìŠ¤í…€ ë…¸ë“œ ê²½ë¡œ ì§€ì •</span>
N8N_CUSTOM_EXTENSIONS=/home/node/.n8n/custom

<span class="cmt"># n8n ì¬ì‹œì‘</span>
docker compose restart n8n</code></pre>
</section>

<section class="content-section">
  <h2 id="production-deployment">í”„ë¡œë•ì…˜ ë°°í¬</h2>

  <h3 id="docker-compose-prod">ìš´ì˜ìš© Docker Compose</h3>

  <pre><code><span class="cmt"># docker-compose.prod.yml</span>
<span class="kw">version</span>: <span class="str">'3.8'</span>

<span class="kw">services</span>:
  <span class="kw">n8n</span>:
    <span class="kw">image</span>: n8nio/n8n:latest
    <span class="kw">restart</span>: always
    <span class="kw">ports</span>:
      - <span class="str">"127.0.0.1:5678:5678"</span>   <span class="cmt"># ë¡œì»¬ ë°”ì¸ë”© (Nginx ë’¤ì— ìœ„ì¹˜)</span>
    <span class="kw">environment</span>:
      <span class="cmt"># ë³´ì•ˆ</span>
      - N8N_ENCRYPTION_KEY=${N8N_ENCRYPTION_KEY}
      - N8N_USER_MANAGEMENT_JWT_SECRET=${JWT_SECRET}

      <span class="cmt"># ì¸ì¦ (n8n v1 ì´í›„: ì´ë©”ì¼/íŒ¨ìŠ¤ì›Œë“œ ê¸°ë°˜)</span>
      - N8N_USER_MANAGEMENT_DISABLED=false
      - N8N_DIAGNOSTICS_ENABLED=false
      - N8N_VERSION_NOTIFICATIONS_ENABLED=false

      <span class="cmt"># ì™¸ë¶€ URL</span>
      - N8N_HOST=n8n.yourdomain.com
      - N8N_PORT=5678
      - N8N_PROTOCOL=https
      - WEBHOOK_URL=https://n8n.yourdomain.com

      <span class="cmt"># ë°ì´í„°ë² ì´ìŠ¤</span>
      - DB_TYPE=postgresdb
      - DB_POSTGRESDB_HOST=postgres
      - DB_POSTGRESDB_DATABASE=n8n
      - DB_POSTGRESDB_USER=n8n
      - DB_POSTGRESDB_PASSWORD=${DB_PASSWORD}

      <span class="cmt"># ì‹¤í–‰ ì´ë ¥ ê´€ë¦¬</span>
      - EXECUTIONS_DATA_MAX_AGE=720     <span class="cmt"># 30ì¼</span>
      - EXECUTIONS_DATA_PRUNE=true
      - EXECUTIONS_DATA_PRUNE_MAX_COUNT=50000

      <span class="cmt"># ì„±ëŠ¥</span>
      - N8N_CONCURRENCY_PRODUCTION_LIMIT=20
      - QUEUE_BULL_REDIS_HOST=redis
      - EXECUTIONS_MODE=queue           <span class="cmt"># ëŒ€ìš©ëŸ‰ ì²˜ë¦¬ ì‹œ</span>

      <span class="cmt"># íƒ€ì„ì¡´</span>
      - GENERIC_TIMEZONE=Asia/Seoul
      - TZ=Asia/Seoul
    <span class="kw">volumes</span>:
      - n8n_data:/home/node/.n8n
    <span class="kw">depends_on</span>:
      postgres:
        condition: service_healthy
      redis:
        condition: service_healthy
    <span class="kw">networks</span>:
      - n8n-network
    <span class="kw">healthcheck</span>:
      test: [<span class="str">"CMD"</span>, <span class="str">"wget"</span>, <span class="str">"--spider"</span>, <span class="str">"-q"</span>, <span class="str">"http://localhost:5678/healthz"</span>]
      interval: 30s
      timeout: 10s
      retries: 3

  <span class="kw">n8n-worker</span>:          <span class="cmt"># Queue ëª¨ë“œ ì‚¬ìš© ì‹œ ì›Œì»¤</span>
    <span class="kw">image</span>: n8nio/n8n:latest
    <span class="kw">command</span>: worker
    <span class="kw">restart</span>: always
    <span class="kw">environment</span>:
      - DB_TYPE=postgresdb
      - DB_POSTGRESDB_HOST=postgres
      - DB_POSTGRESDB_DATABASE=n8n
      - DB_POSTGRESDB_USER=n8n
      - DB_POSTGRESDB_PASSWORD=${DB_PASSWORD}
      - QUEUE_BULL_REDIS_HOST=redis
      - N8N_ENCRYPTION_KEY=${N8N_ENCRYPTION_KEY}
    <span class="kw">networks</span>:
      - n8n-network
    <span class="kw">scale</span>: 3               <span class="cmt"># 3ê°œ ì›Œì»¤ ì¸ìŠ¤í„´ìŠ¤</span>

  <span class="kw">postgres</span>:
    <span class="kw">image</span>: postgres:15-alpine
    <span class="kw">restart</span>: always
    <span class="kw">environment</span>:
      - POSTGRES_DB=n8n
      - POSTGRES_USER=n8n
      - POSTGRES_PASSWORD=${DB_PASSWORD}
    <span class="kw">volumes</span>:
      - postgres_data:/var/lib/postgresql/data
      - ./postgres-init.sql:/docker-entrypoint-initdb.d/init.sql
    <span class="kw">networks</span>:
      - n8n-network
    <span class="kw">healthcheck</span>:
      test: [<span class="str">"CMD-SHELL"</span>, <span class="str">"pg_isready -U n8n"</span>]
      interval: 10s
      retries: 5

  <span class="kw">redis</span>:
    <span class="kw">image</span>: redis:7-alpine
    <span class="kw">restart</span>: always
    <span class="kw">command</span>: redis-server --appendonly yes --maxmemory 512mb --maxmemory-policy allkeys-lru
    <span class="kw">volumes</span>:
      - redis_data:/data
    <span class="kw">networks</span>:
      - n8n-network
    <span class="kw">healthcheck</span>:
      test: [<span class="str">"CMD"</span>, <span class="str">"redis-cli"</span>, <span class="str">"ping"</span>]
      interval: 10s
      retries: 5

<span class="kw">volumes</span>:
  n8n_data:
  postgres_data:
  redis_data:

<span class="kw">networks</span>:
  n8n-network:
    driver: bridge</code></pre>

  <h3 id="nginx-config">Nginx ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œ</h3>

  <pre><code><span class="cmt"># /etc/nginx/sites-available/n8n</span>
server {
    listen 80;
    server_name n8n.yourdomain.com;
    return 301 https://$server_name$request_uri;
}

server {
    listen 443 ssl http2;
    server_name n8n.yourdomain.com;

    <span class="cmt"># SSL ì¸ì¦ì„œ (Certbot)</span>
    ssl_certificate /etc/letsencrypt/live/n8n.yourdomain.com/fullchain.pem;
    ssl_certificate_key /etc/letsencrypt/live/n8n.yourdomain.com/privkey.pem;
    ssl_protocols TLSv1.2 TLSv1.3;

    <span class="cmt"># ë³´ì•ˆ í—¤ë”</span>
    add_header Strict-Transport-Security "max-age=31536000; includeSubDomains" always;
    add_header X-Frame-Options DENY;
    add_header X-Content-Type-Options nosniff;

    <span class="cmt"># n8n í”„ë¡ì‹œ</span>
    location / {
        proxy_pass http://127.0.0.1:5678;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection "upgrade";
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;

        <span class="cmt"># WebSocket íƒ€ì„ì•„ì›ƒ</span>
        proxy_read_timeout 3600;
        proxy_send_timeout 3600;
    }

    <span class="cmt"># ìµœëŒ€ ìš”ì²­ í¬ê¸° (íŒŒì¼ ì—…ë¡œë“œ)</span>
    client_max_body_size 100M;
}</code></pre>
</section>

<section class="content-section">
  <h2 id="security">ë³´ì•ˆ ì„¤ì •</h2>

  <h3 id="security-auth">ì¸ì¦ & ì ‘ê·¼ ì œì–´</h3>

  <pre><code><span class="cmt"># n8n v1 ì´í›„ ì´ë©”ì¼/íŒ¨ìŠ¤ì›Œë“œ ì¸ì¦ (ê¶Œì¥)</span>
í™˜ê²½ ë³€ìˆ˜:
  N8N_USER_MANAGEMENT_DISABLED=false

<span class="cmt"># ì²« ì‹¤í–‰ ì‹œ ê´€ë¦¬ì ê³„ì • ìƒì„± í”„ë¡¬í”„íŠ¸ í‘œì‹œ</span>
<span class="cmt"># ì´í›„ Settings â†’ Usersì—ì„œ íŒ€ì› ì¶”ê°€</span>

<span class="cmt"># IP ê¸°ë°˜ ì ‘ê·¼ ì œí•œ (Nginx)</span>
location / {
    allow 10.0.0.0/8;        <span class="cmt"># ë‚´ë¶€ ë„¤íŠ¸ì›Œí¬</span>
    allow 192.168.0.0/16;    <span class="cmt"># ë¡œì»¬ ë„¤íŠ¸ì›Œí¬</span>
    allow 203.0.113.0/24;    <span class="cmt"># íšŒì‚¬ IP ëŒ€ì—­</span>
    deny all;
    proxy_pass http://127.0.0.1:5678;
}

<span class="cmt"># Webhook ê²½ë¡œëŠ” ì™¸ë¶€ í—ˆìš© (ì„ íƒì )</span>
location /webhook/ {
    proxy_pass http://127.0.0.1:5678;
}</code></pre>

  <h3 id="security-credentials">ìê²©ì¦ëª… ë³´ì•ˆ</h3>

  <pre><code><span class="cmt"># ì•”í˜¸í™” í‚¤ ìƒì„± (ìµœì´ˆ ì„¤ì •, ì ˆëŒ€ ë¶„ì‹¤ ê¸ˆì§€)</span>
openssl rand -hex 32
<span class="cmt"># â†’ ì €ì¥: .env íŒŒì¼ì— N8N_ENCRYPTION_KEY=<ìƒì„±ëœ ê°’></span>

<span class="cmt"># .env íŒŒì¼ ì˜ˆì‹œ</span>
N8N_ENCRYPTION_KEY=a1b2c3d4e5f6...  <span class="cmt"># 64ì hex</span>
JWT_SECRET=your-jwt-secret
DB_PASSWORD=strong-random-password

<span class="cmt"># .env íŒŒì¼ ê¶Œí•œ ì„¤ì •</span>
chmod 600 .env
chown root:root .env

<span class="cmt"># ìê²©ì¦ëª… ë°±ì—… (ì•”í˜¸í™”ëœ ìƒíƒœ)</span>
<span class="cmt"># Settings â†’ Setup â†’ Download backup ë˜ëŠ”</span>
docker exec n8n n8n export:credentials --all --output=/backup/credentials.json</code></pre>

  <h3 id="security-webhook">Webhook ë³´ì•ˆ</h3>

  <pre><code><span class="cmt">// Webhook ì„œëª… ê²€ì¦ (Code ë…¸ë“œ)</span>
<span class="kw">const</span> crypto = require(<span class="str">'crypto'</span>);

<span class="kw">const</span> payload = JSON.stringify($json.body);
<span class="kw">const</span> signature = $json.headers[<span class="str">'x-signature-256'</span>];
<span class="kw">const</span> secret = $env.WEBHOOK_SECRET;

<span class="kw">const</span> expectedSignature = <span class="str">'sha256='</span> + crypto
  .createHmac(<span class="str">'sha256'</span>, secret)
  .update(payload)
  .digest(<span class="str">'hex'</span>);

<span class="kw">if</span> (!crypto.timingSafeEqual(
  Buffer.from(signature),
  Buffer.from(expectedSignature)
)) {
  <span class="kw">throw new</span> <span class="type">Error</span>(<span class="str">'Invalid webhook signature'</span>);
}

<span class="kw">return</span> [{ json: $json.body }];</code></pre>

  <h3 id="security-network">ë„¤íŠ¸ì›Œí¬ ê²©ë¦¬</h3>

  <pre><code><span class="cmt"># Docker ë„¤íŠ¸ì›Œí¬ ê²©ë¦¬</span>
<span class="kw">networks</span>:
  <span class="kw">n8n-internal</span>:
    <span class="kw">internal</span>: <span class="kw">true</span>     <span class="cmt"># ì™¸ë¶€ ì¸í„°ë„· ì°¨ë‹¨</span>
  <span class="kw">n8n-external</span>:
    <span class="kw">driver</span>: bridge     <span class="cmt"># ì¸í„°ë„· ì ‘ê·¼ í—ˆìš©</span>

<span class="cmt"># n8nì€ ë‚´ë¶€+ì™¸ë¶€ ë‘˜ ë‹¤, DB/RedisëŠ” ë‚´ë¶€ë§Œ</span>
services:
  n8n:
    networks: [n8n-internal, n8n-external]
  postgres:
    networks: [n8n-internal]  <span class="cmt"># ë‚´ë¶€ ì „ìš©</span>
  redis:
    networks: [n8n-internal]  <span class="cmt"># ë‚´ë¶€ ì „ìš©</span></code></pre>
</section>

<section class="content-section">
  <h2 id="performance">ì„±ëŠ¥ ìµœì í™”</h2>

  <h3 id="performance-queue">Queue ëª¨ë“œ (ëŒ€ìš©ëŸ‰ ì²˜ë¦¬)</h3>

  <p>
    ê¸°ë³¸ ì‹¤í–‰ ëª¨ë“œëŠ” ë‹¨ì¼ í”„ë¡œì„¸ìŠ¤ë¡œ ì²˜ë¦¬í•©ë‹ˆë‹¤.
    ëŒ€ëŸ‰ ì›Œí¬í”Œë¡œìš°ë¥¼ ë™ì‹œì— ì²˜ë¦¬í•˜ë ¤ë©´ <strong>Queue ëª¨ë“œ</strong>ë¥¼ ì‚¬ìš©í•˜ì„¸ìš”.
  </p>

  <svg viewBox="0 0 800 280" class="diagram" role="img" aria-label="n8n Queue ëª¨ë“œ ì•„í‚¤í…ì²˜">
    <defs>
      <marker id="n8n-queue-arrow" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
        <polygon points="0 0, 10 3, 0 6" fill="var(--diagram-arrow)" />
      </marker>
    </defs>

    <!-- ë©”ì¸ ì„œë²„ -->
    <rect x="20" y="80" width="160" height="120" fill="var(--diagram-fill)" stroke="var(--diagram-accent)" stroke-width="2" rx="8"/>
    <text x="100" y="105" fill="var(--diagram-accent)" text-anchor="middle" font-size="13" font-weight="bold">n8n ë©”ì¸ ì„œë²„</text>
    <text x="100" y="128" fill="var(--text-secondary)" text-anchor="middle" font-size="11">UI / ìŠ¤ì¼€ì¤„ëŸ¬</text>
    <text x="100" y="148" fill="var(--text-secondary)" text-anchor="middle" font-size="11">Webhook ìˆ˜ì‹ </text>
    <text x="100" y="168" fill="var(--text-secondary)" text-anchor="middle" font-size="11">ì‘ì—… íì‰</text>
    <text x="100" y="188" fill="var(--text-secondary)" text-anchor="middle" font-size="11">ì‹¤í–‰ ì´ë ¥ ê´€ë¦¬</text>
    <line x1="180" y1="140" x2="240" y2="140" stroke="var(--diagram-arrow)" stroke-width="2" marker-end="url(#n8n-queue-arrow)"/>

    <!-- Redis Queue -->
    <rect x="240" y="100" width="160" height="80" fill="var(--diagram-fill)" stroke="var(--diagram-stroke)" stroke-width="2" rx="8"/>
    <text x="320" y="132" fill="var(--diagram-text)" text-anchor="middle" font-size="13" font-weight="bold">Redis Queue</text>
    <text x="320" y="155" fill="var(--text-secondary)" text-anchor="middle" font-size="11">Bull Queue</text>
    <text x="320" y="172" fill="var(--text-secondary)" text-anchor="middle" font-size="11">ì‘ì—… ëŒ€ê¸°ì—´</text>
    <line x1="400" y1="140" x2="450" y2="90" stroke="var(--diagram-arrow)" stroke-width="1.5" marker-end="url(#n8n-queue-arrow)"/>
    <line x1="400" y1="140" x2="450" y2="140" stroke="var(--diagram-arrow)" stroke-width="1.5" marker-end="url(#n8n-queue-arrow)"/>
    <line x1="400" y1="140" x2="450" y2="190" stroke="var(--diagram-arrow)" stroke-width="1.5" marker-end="url(#n8n-queue-arrow)"/>

    <!-- ì›Œì»¤ë“¤ -->
    <rect x="450" y="50" width="130" height="70" fill="var(--diagram-fill)" stroke="var(--diagram-stroke)" stroke-width="1.5" rx="6"/>
    <text x="515" y="80" fill="var(--diagram-text)" text-anchor="middle" font-size="12" font-weight="bold">Worker 1</text>
    <text x="515" y="100" fill="var(--text-secondary)" text-anchor="middle" font-size="10">ì›Œí¬í”Œë¡œìš° ì‹¤í–‰</text>

    <rect x="450" y="105" width="130" height="70" fill="var(--diagram-fill)" stroke="var(--diagram-stroke)" stroke-width="1.5" rx="6"/>
    <text x="515" y="135" fill="var(--diagram-text)" text-anchor="middle" font-size="12" font-weight="bold">Worker 2</text>
    <text x="515" y="155" fill="var(--text-secondary)" text-anchor="middle" font-size="10">ì›Œí¬í”Œë¡œìš° ì‹¤í–‰</text>

    <rect x="450" y="160" width="130" height="70" fill="var(--diagram-fill)" stroke="var(--diagram-stroke)" stroke-width="1.5" rx="6"/>
    <text x="515" y="190" fill="var(--diagram-text)" text-anchor="middle" font-size="12" font-weight="bold">Worker 3</text>
    <text x="515" y="210" fill="var(--text-secondary)" text-anchor="middle" font-size="10">ì›Œí¬í”Œë¡œìš° ì‹¤í–‰</text>

    <!-- DB -->
    <rect x="640" y="80" width="140" height="120" fill="var(--diagram-fill)" stroke="var(--diagram-stroke)" stroke-width="1.5" rx="8"/>
    <text x="710" y="105" fill="var(--diagram-text)" text-anchor="middle" font-size="13" font-weight="bold">PostgreSQL</text>
    <text x="710" y="128" fill="var(--text-secondary)" text-anchor="middle" font-size="11">ì›Œí¬í”Œë¡œìš° ì •ì˜</text>
    <text x="710" y="148" fill="var(--text-secondary)" text-anchor="middle" font-size="11">ì‹¤í–‰ ì´ë ¥</text>
    <text x="710" y="168" fill="var(--text-secondary)" text-anchor="middle" font-size="11">ìê²©ì¦ëª… (ì•”í˜¸í™”)</text>
    <text x="710" y="188" fill="var(--text-secondary)" text-anchor="middle" font-size="11">ì‚¬ìš©ì ê³„ì •</text>

    <line x1="580" y1="90" x2="640" y2="120" stroke="var(--diagram-arrow)" stroke-width="1" stroke-dasharray="4,3" marker-end="url(#n8n-queue-arrow)"/>
    <line x1="580" y1="140" x2="640" y2="140" stroke="var(--diagram-arrow)" stroke-width="1" stroke-dasharray="4,3" marker-end="url(#n8n-queue-arrow)"/>
    <line x1="580" y1="190" x2="640" y2="160" stroke="var(--diagram-arrow)" stroke-width="1" stroke-dasharray="4,3" marker-end="url(#n8n-queue-arrow)"/>
  </svg>
  <p class="diagram-caption">Queue ëª¨ë“œ: ë©”ì¸ ì„œë²„ëŠ” ì‘ì—…ì„ Redis Queueì— ë„£ê³ , ì—¬ëŸ¬ ì›Œì»¤ê°€ ë³‘ë ¬ë¡œ ì²˜ë¦¬</p>

  <pre><code><span class="cmt"># Queue ëª¨ë“œ ì„¤ì •</span>
environment:
  - EXECUTIONS_MODE=queue         <span class="cmt"># queue ë˜ëŠ” regular</span>
  - QUEUE_BULL_REDIS_HOST=redis
  - QUEUE_BULL_REDIS_PORT=6379
  - QUEUE_BULL_REDIS_DB=0

<span class="cmt"># ì›Œì»¤ ì‹¤í–‰</span>
docker run -d n8nio/n8n worker \
  -e EXECUTIONS_MODE=queue \
  -e QUEUE_BULL_REDIS_HOST=redis</code></pre>

  <h3 id="performance-tips">ì„±ëŠ¥ íŠœë‹ í¬ì¸íŠ¸</h3>

  <pre><code><span class="cmt"># 1. ë³‘ë ¬ ì‹¤í–‰ ì œí•œ (ê³¼ë¶€í•˜ ë°©ì§€)</span>
N8N_CONCURRENCY_PRODUCTION_LIMIT=10  <span class="cmt"># ë™ì‹œ ì‹¤í–‰ ì›Œí¬í”Œë¡œìš° ìˆ˜</span>

<span class="cmt"># 2. ì‹¤í–‰ ì´ë ¥ ìë™ ì •ë¦¬</span>
EXECUTIONS_DATA_PRUNE=true
EXECUTIONS_DATA_MAX_AGE=720      <span class="cmt"># 720ì‹œê°„ = 30ì¼</span>
EXECUTIONS_DATA_PRUNE_MAX_COUNT=100000

<span class="cmt"># 3. PostgreSQL ì¸ë±ìŠ¤ ìµœì í™”</span>
<span class="cmt">-- ì‹¤í–‰ ì´ë ¥ ì¡°íšŒ ì„±ëŠ¥ í–¥ìƒ</span>
CREATE INDEX idx_execution_finished ON execution_entity (finished, stopped_at);
CREATE INDEX idx_execution_workflow ON execution_entity (workflow_id, started_at);

<span class="cmt"># 4. Redis ë©”ëª¨ë¦¬ ì„¤ì •</span>
maxmemory 1gb
maxmemory-policy allkeys-lru

<span class="cmt"># 5. Node.js í™ ë©”ëª¨ë¦¬ ì¦ê°€ (ëŒ€ìš©ëŸ‰ ë°ì´í„° ì²˜ë¦¬ ì‹œ)</span>
NODE_OPTIONS=--max-old-space-size=4096</code></pre>

  <h3 id="performance-batch">ëŒ€ëŸ‰ ë°ì´í„° ì²˜ë¦¬ ìµœì í™”</h3>

  <pre><code><span class="cmt">// Code ë…¸ë“œ â€” ì²­í¬ ë¶„í•  ì²˜ë¦¬</span>
<span class="kw">function</span> <span class="fn">chunkArray</span>&lt;T&gt;(array: T[], size: number): T[][] {
  <span class="kw">const</span> chunks: T[][] = [];
  <span class="kw">for</span> (<span class="kw">let</span> i = <span class="num">0</span>; i < array.length; i += size) {
    chunks.push(array.slice(i, i + size));
  }
  <span class="kw">return</span> chunks;
}

<span class="kw">const</span> allItems = $input.all().map(item => item.json);
<span class="kw">const</span> chunks = chunkArray(allItems, <span class="num">50</span>);  <span class="cmt">// 50ê°œì”© ë¬¶ìŒ</span>

<span class="kw">return</span> chunks.map(chunk => ({ json: { chunk, count: chunk.length } }));</code></pre>

  <pre><code><span class="cmt"># ì²­í¬ ë‹¨ìœ„ ë³‘ë ¬ ì²˜ë¦¬ íŒ¨í„´</span>

Code ë…¸ë“œ (ë°°ì—´ â†’ ì²­í¬ ë¶„í• )
  â†“
Loop Over Items (ê° ì²­í¬ë§ˆë‹¤)
  â†“
  SplitInBatches (ì²­í¬ ë‚´ ì•„ì´í…œ ë³‘ë ¬ ì²˜ë¦¬)
    â†“
    [ë³‘ë ¬] HTTP Request Ã— N
    â†“
  Merge
  â†“
Wait ë…¸ë“œ (Rate Limit ë°©ì§€, 1ì´ˆ ëŒ€ê¸°)
  â†“
ë‹¤ìŒ ì²­í¬...</code></pre>
</section>

<section class="content-section">
  <h2 id="monitoring">ëª¨ë‹ˆí„°ë§ & ìš´ì˜</h2>

  <h3 id="monitoring-health">í—¬ìŠ¤ì²´í¬ & ëª¨ë‹ˆí„°ë§</h3>

  <pre><code><span class="cmt"># n8n í—¬ìŠ¤ì²´í¬ ì—”ë“œí¬ì¸íŠ¸</span>
GET https://n8n.yourdomain.com/healthz
<span class="cmt"># ì‘ë‹µ: {"status":"ok"}</span>

<span class="cmt"># Prometheus ë©”íŠ¸ë¦­ í™œì„±í™”</span>
N8N_METRICS=true
N8N_METRICS_PREFIX=n8n_

<span class="cmt"># ë©”íŠ¸ë¦­ ì—”ë“œí¬ì¸íŠ¸</span>
GET http://localhost:5678/metrics

<span class="cmt"># ì£¼ìš” ë©”íŠ¸ë¦­</span>
n8n_workflow_success_total       <span class="cmt"># ì„±ê³µ ì‹¤í–‰ ìˆ˜</span>
n8n_workflow_failed_total        <span class="cmt"># ì‹¤íŒ¨ ì‹¤í–‰ ìˆ˜</span>
n8n_execution_duration_seconds   <span class="cmt"># ì‹¤í–‰ ì‹œê°„ ë¶„í¬</span>
n8n_active_executions_count      <span class="cmt"># í˜„ì¬ ì‹¤í–‰ ì¤‘ì¸ ìˆ˜</span></code></pre>

  <h3 id="monitoring-grafana">Grafana ëŒ€ì‹œë³´ë“œ ì„¤ì •</h3>

  <pre><code><span class="cmt"># docker-composeì— Prometheus + Grafana ì¶”ê°€</span>
<span class="kw">services</span>:
  <span class="kw">prometheus</span>:
    <span class="kw">image</span>: prom/prometheus
    <span class="kw">volumes</span>:
      - ./prometheus.yml:/etc/prometheus/prometheus.yml
    <span class="kw">ports</span>:
      - <span class="str">"9090:9090"</span>

  <span class="kw">grafana</span>:
    <span class="kw">image</span>: grafana/grafana
    <span class="kw">ports</span>:
      - <span class="str">"3000:3000"</span>
    <span class="kw">volumes</span>:
      - grafana_data:/var/lib/grafana</code></pre>

  <pre><code><span class="cmt"># prometheus.yml</span>
global:
  scrape_interval: 15s

scrape_configs:
  - job_name: 'n8n'
    static_configs:
      - targets: ['n8n:5678']
    metrics_path: '/metrics'</code></pre>

  <h3 id="monitoring-alerts">ì•Œë¦¼ ì„¤ì •</h3>

  <pre><code><span class="cmt"># ì‹¤íŒ¨ìœ¨ ê¸‰ì¦ ì•Œë¦¼ ì›Œí¬í”Œë¡œìš° (n8nìœ¼ë¡œ ëª¨ë‹ˆí„°ë§ êµ¬ì¶•)</span>

Schedule Trigger (5ë¶„ë§ˆë‹¤)
  â†“

PostgreSQL ë…¸ë“œ
  Query: |
    SELECT
      COUNT(*) FILTER (WHERE finished AND NOT stopped) AS success,
      COUNT(*) FILTER (WHERE finished AND stopped) AS failed,
      COUNT(*) FILTER (WHERE NOT finished) AS running
    FROM execution_entity
    WHERE started_at > NOW() - INTERVAL '5 minutes'
  â†“

Code ë…¸ë“œ (ì‹¤íŒ¨ìœ¨ ê³„ì‚°)
  const { success, failed, running } = $json;
  const total = success + failed;
  const failureRate = total > 0 ? failed / total : 0;
  const alert = failureRate > 0.3 && total > 10; // 30% ì´ìƒ, 10ê±´ ì´ìƒ

  return [{ json: { success, failed, running, failureRate, alert } }];
  â†“

IF ë…¸ë“œ (alert === true)
  â†“ (True)

Slack ë…¸ë“œ
  Channel: #n8n-alerts
  Message: |
    âš ï¸ n8n ì‹¤íŒ¨ìœ¨ ê¸‰ì¦
    ìµœê·¼ 5ë¶„ê°„ ì‹¤íŒ¨ìœ¨: {{ Math.round($json.failureRate * 100) }}%
    ì„±ê³µ: {{ $json.success }}, ì‹¤íŒ¨: {{ $json.failed }}</code></pre>

  <h3 id="monitoring-backup">ë°±ì—… & ë³µêµ¬</h3>

  <pre><code><span class="cmt"># ì›Œí¬í”Œë¡œìš° ë‚´ë³´ë‚´ê¸° (ì •ê¸° ë°±ì—…)</span>
docker exec n8n n8n export:workflow \
  --all \
  --output=/backup/workflows-$(date +%Y%m%d).json

<span class="cmt"># ìê²©ì¦ëª… ë‚´ë³´ë‚´ê¸°</span>
docker exec n8n n8n export:credentials \
  --all \
  --output=/backup/credentials-$(date +%Y%m%d).json

<span class="cmt"># PostgreSQL ë°±ì—…</span>
docker exec postgres pg_dump -U n8n n8n | gzip \
  > /backup/n8n-db-$(date +%Y%m%d).sql.gz

<span class="cmt"># ë³µêµ¬</span>
docker exec -i postgres psql -U n8n n8n < /backup/n8n-db-20260101.sql

docker exec n8n n8n import:workflow \
  --input=/backup/workflows-20260101.json

docker exec n8n n8n import:credentials \
  --input=/backup/credentials-20260101.json</code></pre>

  <pre><code><span class="cmt"># ìë™ ë°±ì—… ìŠ¤í¬ë¦½íŠ¸ (cron)</span>
<span class="cmt">#!/bin/bash</span>
BACKUP_DIR=/opt/backups/n8n
DATE=$(date +%Y%m%d-%H%M)

mkdir -p $BACKUP_DIR

<span class="cmt"># ì›Œí¬í”Œë¡œìš° ë°±ì—…</span>
docker exec n8n n8n export:workflow --all --output=/tmp/wf.json
docker cp n8n:/tmp/wf.json $BACKUP_DIR/workflows-$DATE.json

<span class="cmt"># DB ë°±ì—…</span>
docker exec postgres pg_dump -U n8n n8n | gzip \
  > $BACKUP_DIR/db-$DATE.sql.gz

<span class="cmt"># 30ì¼ ì´ì „ ë°±ì—… ì‚­ì œ</span>
find $BACKUP_DIR -mtime +30 -delete

echo "ë°±ì—… ì™„ë£Œ: $DATE"

<span class="cmt"># crontab ë“±ë¡ (ë§¤ì¼ ìƒˆë²½ 3ì‹œ)</span>
<span class="cmt"># 0 3 * * * /opt/scripts/n8n-backup.sh >> /var/log/n8n-backup.log 2>&1</span></code></pre>
</section>

<section class="content-section">
  <h2 id="workflow-management">ì›Œí¬í”Œë¡œìš° ê´€ë¦¬ & ê±°ë²„ë„ŒìŠ¤</h2>

  <h3 id="management-versioning">ë²„ì „ ê´€ë¦¬ (Git ì—°ë™)</h3>

  <pre><code><span class="cmt"># n8n Enterprise: Source Control (Git í†µí•©)</span>
Settings â†’ Source Control â†’ Connect to Git

<span class="cmt"># ì˜¤í”ˆì†ŒìŠ¤ ëŒ€ì•ˆ: ì •ê¸°ì ìœ¼ë¡œ ì›Œí¬í”Œë¡œìš° ë‚´ë³´ë‚´ê¸° í›„ Git ì»¤ë°‹</span>

<span class="cmt">#!/bin/bash â€” ì›Œí¬í”Œë¡œìš° Git ì €ì¥ ìŠ¤í¬ë¦½íŠ¸</span>
REPO_DIR=/opt/n8n-workflows

<span class="cmt"># ì›Œí¬í”Œë¡œìš° ë‚´ë³´ë‚´ê¸°</span>
docker exec n8n n8n export:workflow --all \
  --output=$REPO_DIR/workflows.json --pretty

<span class="cmt"># Git ì»¤ë°‹</span>
cd $REPO_DIR
git add workflows.json
git diff --staged --quiet || git commit -m "workflow: auto-export $(date +%Y-%m-%d)"
git push origin main</code></pre>

  <h3 id="management-naming">ë„¤ì´ë° ì»¨ë²¤ì…˜</h3>

  <pre><code><span class="cmt"># ì›Œí¬í”Œë¡œìš° ëª…ëª… ê·œì¹™</span>
[íŠ¸ë¦¬ê±° íƒ€ì…] [ëª©ì ] [ë²„ì „]

ì˜ˆì‹œ:
  [Webhook] ê³ ê° ë¬¸ì˜ AI ë¶„ë¥˜ v2
  [Schedule] ì¼ì¼ ë§¤ì¶œ ë¦¬í¬íŠ¸ ë°œì†¡
  [Manual] ë°ì´í„° ë§ˆì´ê·¸ë ˆì´ì…˜
  [Sub] ê³µí†µ ì•Œë¦¼ ë°œì†¡ ëª¨ë“ˆ
  [Sub] AI ì‘ë‹µ ìƒì„± ëª¨ë“ˆ

<span class="cmt"># ë…¸ë“œ ëª…ëª… ê·œì¹™</span>
ë™ì‚¬ + ëª©ì ì–´

ì˜ˆì‹œ:
  Load Customer Data
  Validate Input Format
  Call Claude API
  Parse AI Response
  Send Slack Alert
  Save to Database</code></pre>

  <h3 id="management-testing">ì›Œí¬í”Œë¡œìš° í…ŒìŠ¤íŠ¸</h3>

  <pre><code><span class="cmt"># í…ŒìŠ¤íŠ¸ìš© ë”ë¯¸ ë°ì´í„° ìƒì„± (Code ë…¸ë“œ)</span>
<span class="cmt">// ì‹¤ì œ ë°ì´í„° ì—†ì´ ì›Œí¬í”Œë¡œìš° í…ŒìŠ¤íŠ¸</span>
<span class="kw">const</span> testData = [
  {
    id: <span class="str">"test-001"</span>,
    email: <span class="str">"test@example.com"</span>,
    message: <span class="str">"ê²°ì œê°€ ì•ˆ ë©ë‹ˆë‹¤. ë„ì™€ì£¼ì„¸ìš”!"</span>,
    createdAt: <span class="kw">new</span> <span class="type">Date</span>().toISOString(),
  }
];

<span class="kw">return</span> testData.map(item => ({ json: item }));</code></pre>

  <pre><code><span class="cmt"># ìŠ¤í…Œì´ì§• í™˜ê²½ ë¶„ë¦¬</span>

<span class="cmt"># í™˜ê²½ ë³€ìˆ˜ë¡œ í™˜ê²½ êµ¬ë¶„</span>
N8N_ENVIRONMENT=production  <span class="cmt"># ë˜ëŠ” staging, development</span>

<span class="cmt"># ì›Œí¬í”Œë¡œìš°ì—ì„œ í™˜ê²½ ì²´í¬</span>
IF ë…¸ë“œ
  Condition: {{ $env.N8N_ENVIRONMENT }} Equal "production"
  True â†’ ì‹¤ì œ Slack ì•Œë¦¼ ë°œì†¡
  False â†’ ì½˜ì†” ë¡œê·¸ë§Œ (í…ŒìŠ¤íŠ¸ ëª¨ë“œ)</code></pre>
</section>

<section class="content-section">
  <h2 id="troubleshooting">íŠ¸ëŸ¬ë¸”ìŠˆíŒ…</h2>

  <h3 id="ts-common">ìì£¼ ë°œìƒí•˜ëŠ” ë¬¸ì œ</h3>

  <table>
    <thead>
      <tr>
        <th>ì¦ìƒ</th>
        <th>ì›ì¸</th>
        <th>í•´ê²° ë°©ë²•</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>Webhookì´ ìˆ˜ì‹ ë˜ì§€ ì•ŠìŒ</td>
        <td>WEBHOOK_URL ë¯¸ì„¤ì • ë˜ëŠ” ë°©í™”ë²½</td>
        <td><code>WEBHOOK_URL=https://n8n.yourdomain.com</code> ì„¤ì •, í¬íŠ¸ 443/80 ê°œë°©</td>
      </tr>
      <tr>
        <td>ìê²©ì¦ëª… ë³µí˜¸í™” ì‹¤íŒ¨</td>
        <td>N8N_ENCRYPTION_KEY ë³€ê²½</td>
        <td>ìµœì´ˆ ì„¤ì •í•œ í‚¤ ë³µì› (ì ˆëŒ€ ë³€ê²½ ê¸ˆì§€)</td>
      </tr>
      <tr>
        <td>ë©”ëª¨ë¦¬ ë¶€ì¡± (OOM)</td>
        <td>ëŒ€ìš©ëŸ‰ ë°ì´í„° ì²˜ë¦¬, ì‹¤í–‰ ì´ë ¥ ëˆ„ì </td>
        <td>ì‹¤í–‰ ì´ë ¥ ì •ë¦¬, NODE_OPTIONS ë©”ëª¨ë¦¬ ì¦ê°€</td>
      </tr>
      <tr>
        <td>ì‹¤í–‰ì´ ë©ˆì¶¤ (Stuck)</td>
        <td>ë¬´í•œ ë£¨í”„, ì‘ë‹µ ì—†ëŠ” API</td>
        <td>ë…¸ë“œë³„ íƒ€ì„ì•„ì›ƒ ì„¤ì •, ì‹¤í–‰ ì·¨ì†Œ í›„ ì›Œí¬í”Œë¡œìš° ìˆ˜ì •</td>
      </tr>
      <tr>
        <td>AI Agent ë¬´í•œ ë£¨í”„</td>
        <td>ë„êµ¬ ì„¤ëª… ë¶ˆëª…í™•, ëª¨ë¸ í˜¼ë€</td>
        <td>ìµœëŒ€ ë°˜ë³µ íšŸìˆ˜ ì„¤ì •, ë„êµ¬ ì„¤ëª… ê°œì„ </td>
      </tr>
      <tr>
        <td>PostgreSQL ì—°ê²° ì‹¤íŒ¨</td>
        <td>ë„¤íŠ¸ì›Œí¬ ë¶„ë¦¬, ìê²©ì¦ëª… ì˜¤ë¥˜</td>
        <td>Docker ë„¤íŠ¸ì›Œí¬ í™•ì¸, DB ìê²©ì¦ëª… ì¬í™•ì¸</td>
      </tr>
      <tr>
        <td>Webhook ì¤‘ë³µ ì‹¤í–‰</td>
        <td>íƒ€ì„ì•„ì›ƒ ì¬ì‹œë„, ì™¸ë¶€ ì„œë¹„ìŠ¤ ì¬ì „ì†¡</td>
        <td>Idempotency Key êµ¬í˜„, ì¤‘ë³µ ì²´í¬ ë¡œì§ ì¶”ê°€</td>
      </tr>
    </tbody>
  </table>

  <h3 id="ts-debug">ë””ë²„ê¹… íŒ</h3>

  <pre><code><span class="cmt"># ì‹¤í–‰ ë¡œê·¸ í™•ì¸</span>
docker logs n8n --tail 100 -f

<span class="cmt"># íŠ¹ì • ì›Œí¬í”Œë¡œìš° ì‹¤í–‰ ì´ë ¥ DB ì¡°íšŒ</span>
docker exec postgres psql -U n8n -c "
  SELECT id, finished, stopped, started_at, stopped_at,
         (data::json->'resultData'->'error'->>'message') as error
  FROM execution_entity
  WHERE workflow_id = 'ì›Œí¬í”Œë¡œìš°ID'
  ORDER BY started_at DESC
  LIMIT 20;
"

<span class="cmt"># n8n ë””ë²„ê·¸ ëª¨ë“œ ì‹¤í–‰</span>
N8N_LOG_LEVEL=debug n8n start

<span class="cmt"># Code ë…¸ë“œì—ì„œ ë””ë²„ê¹…</span>
console.log('í˜„ì¬ ë°ì´í„°:', JSON.stringify($json, null, 2));
console.log('ì´ì „ ë…¸ë“œ ì¶œë ¥:', JSON.stringify($input.all(), null, 2));</code></pre>
</section>

<section class="content-section">
  <h2 id="next-steps">ê´€ë ¨ ê°€ì´ë“œ</h2>

  <div class="info-box info">
    <div class="info-box-title">ğŸ“š n8n í•™ìŠµ ê²½ë¡œ</div>
    <ol>
      <li><a href="n8n-intro.html">n8nì´ë€?</a> â€” ê¸°ì´ˆ ê°œë…, ì„¤ì¹˜, ì²« ì›Œí¬í”Œë¡œìš°</li>
      <li><a href="n8n-ai-workflows.html">AI ì›Œí¬í”Œë¡œìš° êµ¬ì¶•</a> â€” Claude/OpenAI/RAG ì—°ë™</li>
      <li><a href="n8n-advanced.html">ê³ ê¸‰ í™œìš©</a> (í˜„ì¬ í˜ì´ì§€) â€” ìš´ì˜, ë³´ì•ˆ, ì„±ëŠ¥</li>
    </ol>
  </div>

  <div class="info-box tip">
    <div class="info-box-title">ğŸ”— ì—°ê´€ ì£¼ì œ</div>
    <ul>
      <li><a href="docker-vibe.html">Docker</a> â€” ì»¨í…Œì´ë„ˆ ê¸°ë°˜ n8n ë°°í¬</li>
      <li><a href="claude-api.html">Claude API</a> â€” Anthropic API ì—°ë™ ì‹¬í™”</li>
      <li><a href="mcp-intro.html">MCP</a> â€” n8nê³¼ MCP ê²°í•© ê°€ëŠ¥ì„±</li>
      <li><a href="security-best-practices.html">ë³´ì•ˆ ëª¨ë²” ì‚¬ë¡€</a> â€” ìš´ì˜ í™˜ê²½ ë³´ì•ˆ</li>
    </ul>
  </div>
</section>

<nav class="page-nav"></nav>
</main>

<aside class="inline-toc">
  <div class="toc-title">ëª©ì°¨</div>
  <div class="toc-nav"></div>
</aside>
<footer class="site-footer"></footer>

</div>
<script src="../js/main.js"></script>
</body>
</html>
