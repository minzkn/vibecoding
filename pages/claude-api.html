<!DOCTYPE html>
<html lang="ko" data-theme="dark-kernel">
<head>
<!-- BEGIN: Google adsense -->
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2110881342960271" crossorigin="anonymous"></script>
<!-- END: Google adsense -->
<!-- BEGIN: Google adsense repair -->
<script async src="https://fundingchoicesmessages.google.com/i/pub-2110881342960271?ers=1" nonce="laI6FT8gpRxugDJv5AGJRA"></script><script nonce="laI6FT8gpRxugDJv5AGJRA">(function() {function signalGooglefcPresent() {if (!window.frames['googlefcPresent']) {if (document.body) {const iframe = document.createElement('iframe'); iframe.style = 'width: 0; height: 0; border: none; z-index: -1000; left: -1000px; top: -1000px;'; iframe.style.display = 'none'; iframe.name = 'googlefcPresent'; document.body.appendChild(iframe);} else {setTimeout(signalGooglefcPresent, 0);}}}signalGooglefcPresent();})();</script>
<!-- END: Google adsense repair -->
<!-- BEGIN: Google analytics -->
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-1VWQF060SX"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-1VWQF060SX');
</script>
<!-- END: Google analytics -->

<script>(function(){var m=document.cookie.match(/claude_theme=([^;]+)/);if(m)document.documentElement.setAttribute('data-theme',m[1]);})();</script>
<meta charset="UTF-8">
<meta property="og:type" content="article">
<meta property="og:site_name" content="AI Vibe Coding ê°€ì´ë“œ /with MINZKN">
<meta property="og:title" content="Claude API ê°€ì´ë“œ">
<meta property="og:description" content="Claude API ê°€ì´ë“œ: Anthropicì˜ Claude APIëŠ” ì•ˆì „í•˜ê³  ê°•ë ¥í•œ AI ê¸°ëŠ¥ì„ ì• í”Œë¦¬ì¼€ì´ì…˜ì— í†µí•©í•  ìˆ˜ ìˆëŠ” RESTful APIì…ë‹ˆë‹¤. ì´ ê°€ì´ë“œëŠ” API í‚¤ ë°œê¸‰ë¶€í„° ê³ ê¸‰ ê¸°ëŠ¥ í™œìš©ê¹Œì§€ Claude APIì˜ ëª¨ë“  ê²ƒì„ ë‹¤ë£¹ë‹ˆë‹¤.">
<meta property="og:url" content="https://minzkn.com/claude/pages/claude-api.html">
<meta property="og:image" content="https://minzkn.com/claude/images/og-image.png">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Claude API ê°€ì´ë“œ - AI Vibe Coding ê°€ì´ë“œ /with MINZKN</title>
<link rel="icon" type="image/svg+xml" href="../images/favicon.svg">
<meta name="description" content="Claude API ê°€ì´ë“œ: Anthropicì˜ Claude APIëŠ” ì•ˆì „í•˜ê³  ê°•ë ¥í•œ AI ê¸°ëŠ¥ì„ ì• í”Œë¦¬ì¼€ì´ì…˜ì— í†µí•©í•  ìˆ˜ ìˆëŠ” RESTful APIì…ë‹ˆë‹¤. ì´ ê°€ì´ë“œëŠ” API í‚¤ ë°œê¸‰ë¶€í„° ê³ ê¸‰ ê¸°ëŠ¥ í™œìš©ê¹Œì§€ Claude APIì˜ ëª¨ë“  ê²ƒì„ ë‹¤ë£¹ë‹ˆë‹¤.">
<meta name="keywords" content="Claude, AI, LLM, Claude API ê°€ì´ë“œ, Claude API ê°œìš”, ì‹œì‘í•˜ê¸°, Messages API, ìŠ¤íŠ¸ë¦¬ë°">
<meta name="author" content="MINZKN">

<link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/joungkyun/font-d2coding/d2coding.css">
<link rel="stylesheet" href="../css/themes.css">
<link rel="stylesheet" href="../css/style.css">
<link rel="stylesheet" href="../css/responsive.css">
</head>
<body>
<div class="page-wrapper">
<header class="site-header"></header>
<nav class="side-nav" aria-label="ì‚¬ì´íŠ¸ ë‚´ë¹„ê²Œì´ì…˜"></nav>
<main class="main-content">
<div class="breadcrumb"></div>

<h1 id="top">Claude API ê°€ì´ë“œ</h1>
<p class="lead">Anthropicì˜ Claude APIëŠ” ì•ˆì „í•˜ê³  ê°•ë ¥í•œ AI ê¸°ëŠ¥ì„ ì• í”Œë¦¬ì¼€ì´ì…˜ì— í†µí•©í•  ìˆ˜ ìˆëŠ” RESTful APIì…ë‹ˆë‹¤. ì´ ê°€ì´ë“œëŠ” API í‚¤ ë°œê¸‰ë¶€í„° ê³ ê¸‰ ê¸°ëŠ¥ í™œìš©ê¹Œì§€ Claude APIì˜ ëª¨ë“  ê²ƒì„ ë‹¤ë£¹ë‹ˆë‹¤.</p>

<div class="info-box warning">
  <strong>ì—…ë°ì´íŠ¸ ì•ˆë‚´:</strong> ëª¨ë¸/ìš”ê¸ˆ/ë²„ì „/ì •ì±… ë“± ì‹œì ì— ë¯¼ê°í•œ ì •ë³´ëŠ” ë³€ë™ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
  ìµœì‹  ë‚´ìš©ì€ ê³µì‹ ë¬¸ì„œë¥¼ í™•ì¸í•˜ì„¸ìš”.
</div>

<div class="info-box info">
  <div class="info-box-title">ğŸ§­ Codex ëŒ€ë¹„ ì•ˆë‚´</div>
  <p>CodexëŠ” OpenAI ê³„ì •/í‚¤ë¡œ ì‹œì‘í•˜ë©°, CLIëŠ” ë¡œê·¸ì¸ íë¦„ ë˜ëŠ” API í‚¤ ì¸ì¦ì„ ì œê³µí•©ë‹ˆë‹¤.</p>
  <p>Codex ì•±ì€ macOS í™˜ê²½ì—ì„œ ì œê³µë©ë‹ˆë‹¤. <a href="codex.html">Codex ê°€ì´ë“œ</a> ì°¸ê³ .</p>
</div>

<div class="info-box tip">
<strong>í•µì‹¬ í¬ì¸íŠ¸</strong>
<ul>
<li>Claude 4 ì‹œë¦¬ì¦ˆ: Opus (ìµœê³  ì„±ëŠ¥), Sonnet (ê· í˜•), Haiku (ì†ë„)</li>
<li>Python, TypeScript SDK ë° HTTP API ì§€ì›</li>
<li>ìŠ¤íŠ¸ë¦¬ë°, íˆ´ ì‚¬ìš©, ë¹„ì „ ë“± ê³ ê¸‰ ê¸°ëŠ¥</li>
<li>í”„ë¡¬í”„íŠ¸ ìºì‹±ìœ¼ë¡œ ìµœëŒ€ 90% ë¹„ìš© ì ˆê°</li>
<li>200K í† í° ì»¨í…ìŠ¤íŠ¸ ìœˆë„ìš°</li>
</ul>
</div>

<section class="content-section">
<h2 id="overview">Claude API ê°œìš”</h2>

<h3 id="models">ëª¨ë¸ ë¼ì¸ì—…</h3>

<div class="code-block">
<div class="code-header">
<span class="language">ëª¨ë¸</span>
<button class="copy-btn" aria-label="Copy code">Copy</button>
</div>
<pre><code>ëª¨ë¸ í‹°ì–´ëŠ” ì¼ë°˜ì ìœ¼ë¡œ ë‹¤ìŒê³¼ ê°™ì´ êµ¬ë¶„ë©ë‹ˆë‹¤:
â€¢ ê³ ì„±ëŠ¥ í‹°ì–´: ë³µì¡í•œ ì¶”ë¡ /ë¶„ì„ì— ì í•©
â€¢ ê· í˜• í‹°ì–´: ì„±ëŠ¥ê³¼ ë¹„ìš©ì˜ ê· í˜•
â€¢ ê²½ëŸ‰ í‹°ì–´: ë¹ ë¥¸ ì‘ë‹µê³¼ ëŒ€ëŸ‰ ì²˜ë¦¬

ê³µí†µ íŠ¹ì§•(ìƒì„¸ ìˆ˜ì¹˜ëŠ” ë¬¸ì„œ ì°¸ê³ ):
â€¢ ê¸´ ì»¨í…ìŠ¤íŠ¸ ì§€ì›
â€¢ ë¹„ì „(ì´ë¯¸ì§€ ì…ë ¥) ì§€ì›
â€¢ íˆ´ ì‚¬ìš© ì§€ì›
â€¢ í”„ë¡¬í”„íŠ¸ ìºì‹± ì§€ì›
</code></pre>
</div>

<h3 id="capabilities">ì£¼ìš” ê¸°ëŠ¥</h3>

<div class="code-block">
<div class="code-header">
<span class="language">ê¸°ëŠ¥</span>
<button class="copy-btn" aria-label="Copy code">Copy</button>
</div>
<pre><code><span class="cmt">// 1. ëŒ€í™”í˜• AI</span>
â€¢ ë‹¤ì¤‘ í„´ ëŒ€í™”
â€¢ ì»¨í…ìŠ¤íŠ¸ ìœ ì§€
â€¢ ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ë¡œ í–‰ë™ ì œì–´

<span class="cmt">// 2. ë¹„ì „ (Vision)</span>
â€¢ ì´ë¯¸ì§€ ë¶„ì„ ë° ì„¤ëª…
â€¢ ì°¨íŠ¸, ë‹¤ì´ì–´ê·¸ë¨ í•´ì„
â€¢ OCR ë° ë¬¸ì„œ ì´í•´
â€¢ ì´ë¯¸ì§€ í¬ê¸°/í˜•ì‹ ì œí•œ ìˆìŒ (ìµœì‹  ì •ì±… í™•ì¸)

<span class="cmt">// 3. íˆ´ ì‚¬ìš© (Tool Use)</span>
â€¢ ì™¸ë¶€ í•¨ìˆ˜/API í˜¸ì¶œ
â€¢ êµ¬ì¡°í™”ëœ ë°ì´í„° ë°˜í™˜
â€¢ ë‹¤ë‹¨ê³„ íˆ´ ì²´ì´ë‹
â€¢ JSON ìŠ¤í‚¤ë§ˆ ê¸°ë°˜ ì •ì˜

<span class="cmt">// 4. ìŠ¤íŠ¸ë¦¬ë°</span>
â€¢ ì‹¤ì‹œê°„ ì‘ë‹µ ìŠ¤íŠ¸ë¦¬ë°
â€¢ ì‚¬ìš©ì ê²½í—˜ ê°œì„ 
â€¢ ê¸´ ì‘ë‹µì— ì í•©

<span class="cmt">// 5. í”„ë¡¬í”„íŠ¸ ìºì‹±</span>
â€¢ ë°˜ë³µ ì»¨í…ìŠ¤íŠ¸ ìºì‹±
â€¢ ë°˜ë³µ ì»¨í…ìŠ¤íŠ¸ ë¹„ìš© ì ˆê°
â€¢ ì •ì±…/TTLì€ ë³€ê²½ ê°€ëŠ¥
</code></pre>
</div>
</section>

<section class="content-section">
<h2 id="getting-started">ì‹œì‘í•˜ê¸°</h2>

<h3 id="api-key">API í‚¤ ë°œê¸‰</h3>

<div class="code-block">
<div class="code-header">
<span class="language">ì ˆì°¨</span>
<button class="copy-btn" aria-label="Copy code">Copy</button>
</div>
<pre><code>1. Anthropic Console ì ‘ì†
   https://console.anthropic.com

2. ê³„ì • ìƒì„± ë˜ëŠ” ë¡œê·¸ì¸

3. API Keys ë©”ë‰´ë¡œ ì´ë™

4. "Create Key" í´ë¦­

5. í‚¤ ì´ë¦„ ì…ë ¥ (ì˜ˆ: "production", "development")

6. ìƒì„±ëœ í‚¤ ë³µì‚¬ (í•œ ë²ˆë§Œ í‘œì‹œë¨)
   sk-ant-api03-...

7. ì•ˆì „í•œ ê³³ì— ì €ì¥ (í™˜ê²½ ë³€ìˆ˜ ê¶Œì¥)
</code></pre>
</div>

<div class="info-box warning">
<strong>ë³´ì•ˆ ì£¼ì˜ì‚¬í•­</strong>
<ul>
<li>API í‚¤ëŠ” ì ˆëŒ€ ì½”ë“œì— í•˜ë“œì½”ë”©í•˜ì§€ ë§ˆì„¸ìš”</li>
<li>í™˜ê²½ ë³€ìˆ˜ë‚˜ ë¹„ë°€ ê´€ë¦¬ ì‹œìŠ¤í…œ ì‚¬ìš©</li>
<li>Gitì— ì»¤ë°‹í•˜ì§€ ì•Šë„ë¡ .gitignore ì„¤ì •</li>
<li>í”„ë¡ íŠ¸ì—”ë“œì— ë…¸ì¶œ ê¸ˆì§€ (ì„œë²„ì—ì„œë§Œ ì‚¬ìš©)</li>
<li>ì£¼ê¸°ì ìœ¼ë¡œ í‚¤ êµì²´</li>
</ul>
</div>

<h3 id="quick-start">ë¹ ë¥¸ ì‹œì‘</h3>

<div class="code-block">
<div class="code-header">
<span class="language">Python</span>
<button class="copy-btn" aria-label="Copy code">Copy</button>
</div>
<pre><code><span class="cmt"># 1. SDK ì„¤ì¹˜</span>
$ pip install anthropic

<span class="cmt"># 2. API í‚¤ ì„¤ì •</span>
$ export ANTHROPIC_API_KEY='sk-ant-api03-...'

<span class="cmt"># 3. ì²« ìš”ì²­</span>
<span class="kw">import</span> anthropic

client = anthropic.Anthropic()

message = client.messages.create(
    model=<span class="str">"claude-<tier>20260101"</span>,
    max_tokens=<span class="num">1024</span>,
    messages=[
        {<span class="str">"role"</span>: <span class="str">"user"</span>, <span class="str">"content"</span>: <span class="str">"ì•ˆë…•í•˜ì„¸ìš”!"</span>}
    ]
)

<span class="fn">print</span>(message.content[<span class="num">0</span>].text)
</code></pre>
</div>

<div class="code-block">
<div class="code-header">
<span class="language">TypeScript</span>
<button class="copy-btn" aria-label="Copy code">Copy</button>
</div>
<pre><code><span class="cmt">// 1. SDK ì„¤ì¹˜</span>
$ npm install @anthropic-ai/sdk

<span class="cmt">// 2. ì²« ìš”ì²­</span>
<span class="kw">import</span> Anthropic <span class="kw">from</span> <span class="str">'@anthropic-ai/sdk'</span>;

<span class="kw">const</span> client = <span class="kw">new</span> <span class="type">Anthropic</span>({
  apiKey: process.env.ANTHROPIC_API_KEY,
});

<span class="kw">const</span> message = <span class="kw">await</span> client.messages.create({
  model: <span class="str">'claude-<tier>20260101'</span>,
  max_tokens: <span class="num">1024</span>,
  messages: [
    { role: <span class="str">'user'</span>, content: <span class="str">'ì•ˆë…•í•˜ì„¸ìš”!'</span> }
  ],
});

console.log(message.content[<span class="num">0</span>].text);
</code></pre>
</div>
</section>

<section class="content-section">
<h2 id="messages-api">Messages API</h2>

<h3 id="basic-usage">ê¸°ë³¸ ì‚¬ìš©ë²•</h3>

<div class="code-block">
<div class="code-header">
<span class="language">Python</span>
<button class="copy-btn" aria-label="Copy code">Copy</button>
</div>
<pre><code><span class="kw">import</span> anthropic

client = anthropic.Anthropic(api_key=<span class="str">"sk-ant-..."</span>)

message = client.messages.create(
    model=<span class="str">"claude-<tier>20260101"</span>,
    max_tokens=<span class="num">1024</span>,
    system=<span class="str">"ë‹¹ì‹ ì€ ì¹œì ˆí•œ AI ì–´ì‹œìŠ¤í„´íŠ¸ì…ë‹ˆë‹¤."</span>,  <span class="cmt"># ì„ íƒì </span>
    messages=[
        {
            <span class="str">"role"</span>: <span class="str">"user"</span>,
            <span class="str">"content"</span>: <span class="str">"Pythonìœ¼ë¡œ í”¼ë³´ë‚˜ì¹˜ ìˆ˜ì—´ì„ êµ¬í•˜ëŠ” í•¨ìˆ˜ë¥¼ ì‘ì„±í•´ì¤˜."</span>
        }
    ],
    temperature=<span class="num">1.0</span>,  <span class="cmt"># 0.0 ~ 1.0, ê¸°ë³¸ 1.0</span>
    top_p=<span class="num">0.9</span>,       <span class="cmt"># ì„ íƒì </span>
    top_k=<span class="num">40</span>,        <span class="cmt"># ì„ íƒì </span>
)

<span class="cmt"># ì‘ë‹µ ì¶œë ¥</span>
<span class="fn">print</span>(message.content[<span class="num">0</span>].text)

<span class="cmt"># ì‘ë‹µ ë©”íƒ€ë°ì´í„°</span>
<span class="fn">print</span>(<span class="str">f"Model: <span class="macro">{message.model}</span>"</span>)
<span class="fn">print</span>(<span class="str">f"Stop reason: <span class="macro">{message.stop_reason}</span>"</span>)  <span class="cmt"># end_turn, max_tokens, tool_use</span>
<span class="fn">print</span>(<span class="str">f"Input tokens: <span class="macro">{message.usage.input_tokens}</span>"</span>)
<span class="fn">print</span>(<span class="str">f"Output tokens: <span class="macro">{message.usage.output_tokens}</span>"</span>)
</code></pre>
</div>

<h3 id="multi-turn">ë‹¤ì¤‘ í„´ ëŒ€í™”</h3>

<div class="code-block">
<div class="code-header">
<span class="language">Python</span>
<button class="copy-btn" aria-label="Copy code">Copy</button>
</div>
<pre><code><span class="kw">import</span> anthropic

client = anthropic.Anthropic()

<span class="cmt"># ëŒ€í™” íˆìŠ¤í† ë¦¬ ê´€ë¦¬</span>
conversation = [
    {<span class="str">"role"</span>: <span class="str">"user"</span>, <span class="str">"content"</span>: <span class="str">"ë‚´ ì´ë¦„ì€ ì² ìˆ˜ì•¼."</span>},
]

<span class="cmt"># ì²« ë²ˆì§¸ ìš”ì²­</span>
message1 = client.messages.create(
    model=<span class="str">"claude-<tier>20260101"</span>,
    max_tokens=<span class="num">1024</span>,
    messages=conversation
)

<span class="fn">print</span>(<span class="str">"Claude:"</span>, message1.content[<span class="num">0</span>].text)

<span class="cmt"># ëŒ€í™”ì— Claudeì˜ ì‘ë‹µ ì¶”ê°€</span>
conversation.append({
    <span class="str">"role"</span>: <span class="str">"assistant"</span>,
    <span class="str">"content"</span>: message1.content[<span class="num">0</span>].text
})

<span class="cmt"># ì‚¬ìš©ì ë©”ì‹œì§€ ì¶”ê°€</span>
conversation.append({
    <span class="str">"role"</span>: <span class="str">"user"</span>,
    <span class="str">"content"</span>: <span class="str">"ë‚´ ì´ë¦„ì´ ë­ë¼ê³  í–ˆì§€?"</span>
})

<span class="cmt"># ë‘ ë²ˆì§¸ ìš”ì²­</span>
message2 = client.messages.create(
    model=<span class="str">"claude-<tier>20260101"</span>,
    max_tokens=<span class="num">1024</span>,
    messages=conversation
)

<span class="fn">print</span>(<span class="str">"Claude:"</span>, message2.content[<span class="num">0</span>].text)  <span class="cmt"># "ì² ìˆ˜"ë¼ê³  ê¸°ì–µí•¨</span>
</code></pre>
</div>

<h3 id="system-prompts">ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸</h3>

<div class="code-block">
<div class="code-header">
<span class="language">Python</span>
<button class="copy-btn" aria-label="Copy code">Copy</button>
</div>
<pre><code><span class="cmt"># ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ë¡œ ì—­í•  ì •ì˜</span>
message = client.messages.create(
    model=<span class="str">"claude-<tier>20260101"</span>,
    max_tokens=<span class="num">2048</span>,
    system=<span class="str">"""ë‹¹ì‹ ì€ ì‹œë‹ˆì–´ ë°±ì—”ë“œ ê°œë°œìì…ë‹ˆë‹¤.

ê·œì¹™:
1. Pythonê³¼ FastAPIì— ì „ë¬¸ì„±ì„ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤
2. ì½”ë“œëŠ” PEP 8 ìŠ¤íƒ€ì¼ì„ ë”°ë¦…ë‹ˆë‹¤
3. íƒ€ì… íŒíŠ¸ë¥¼ ë°˜ë“œì‹œ í¬í•¨í•©ë‹ˆë‹¤
4. ë³´ì•ˆê³¼ ì„±ëŠ¥ì„ ìš°ì„ ì‹œí•©ë‹ˆë‹¤
5. í•­ìƒ ì—ëŸ¬ í•¸ë“¤ë§ì„ í¬í•¨í•©ë‹ˆë‹¤"""</span>,
    messages=[
        {
            <span class="str">"role"</span>: <span class="str">"user"</span>,
            <span class="str">"content"</span>: <span class="str">"FastAPIë¡œ ì‚¬ìš©ì ì¸ì¦ ì—”ë“œí¬ì¸íŠ¸ë¥¼ ë§Œë“¤ì–´ì¤˜."</span>
        }
    ]
)

<span class="fn">print</span>(message.content[<span class="num">0</span>].text)
</code></pre>
</div>
</section>

<section class="content-section">
<h2 id="streaming">ìŠ¤íŠ¸ë¦¬ë°</h2>

<h3 id="streaming-python">Python ìŠ¤íŠ¸ë¦¬ë°</h3>

<div class="code-block">
<div class="code-header">
<span class="language">Python</span>
<button class="copy-btn" aria-label="Copy code">Copy</button>
</div>
<pre><code><span class="kw">import</span> anthropic

client = anthropic.Anthropic()

<span class="cmt"># stream=Trueë¡œ ìŠ¤íŠ¸ë¦¬ë° í™œì„±í™”</span>
<span class="kw">with</span> client.messages.stream(
    model=<span class="str">"claude-<tier>20260101"</span>,
    max_tokens=<span class="num">1024</span>,
    messages=[
        {<span class="str">"role"</span>: <span class="str">"user"</span>, <span class="str">"content"</span>: <span class="str">"ê¸´ ì´ì•¼ê¸°ë¥¼ ë“¤ë ¤ì¤˜."</span>}
    ],
) <span class="kw">as</span> stream:
    <span class="kw">for</span> text <span class="kw">in</span> stream.text_stream:
        <span class="fn">print</span>(text, end=<span class="str">""</span>, flush=<span class="kw">True</span>)

<span class="fn">print</span>()  <span class="cmt"># ì¤„ë°”ê¿ˆ</span>

<span class="cmt"># ìµœì¢… ë©”ì‹œì§€ ê°ì²´ ì–»ê¸°</span>
message = stream.get_final_message()
<span class="fn">print</span>(<span class="str">f"\n\nTotal tokens: <span class="macro">{message.usage.input_tokens + message.usage.output_tokens}</span>"</span>)
</code></pre>
</div>

<h3 id="streaming-advanced">ê³ ê¸‰ ìŠ¤íŠ¸ë¦¬ë°</h3>

<div class="code-block">
<div class="code-header">
<span class="language">Python</span>
<button class="copy-btn" aria-label="Copy code">Copy</button>
</div>
<pre><code><span class="kw">import</span> anthropic

client = anthropic.Anthropic()

<span class="cmt"># ì´ë²¤íŠ¸ë³„ ì²˜ë¦¬</span>
<span class="kw">with</span> client.messages.stream(
    model=<span class="str">"claude-<tier>20260101"</span>,
    max_tokens=<span class="num">1024</span>,
    messages=[{<span class="str">"role"</span>: <span class="str">"user"</span>, <span class="str">"content"</span>: <span class="str">"ì•ˆë…•í•˜ì„¸ìš”!"</span>}],
) <span class="kw">as</span> stream:
    <span class="kw">for</span> event <span class="kw">in</span> stream:
        <span class="kw">if</span> event.type == <span class="str">"message_start"</span>:
            <span class="fn">print</span>(<span class="str">f"ë©”ì‹œì§€ ì‹œì‘: <span class="macro">{event.message.model}</span>"</span>)

        <span class="kw">elif</span> event.type == <span class="str">"content_block_start"</span>:
            <span class="fn">print</span>(<span class="str">"ì½˜í…ì¸  ë¸”ë¡ ì‹œì‘"</span>)

        <span class="kw">elif</span> event.type == <span class="str">"content_block_delta"</span>:
            <span class="kw">if</span> hasattr(event.delta, <span class="str">'text'</span>):
                <span class="fn">print</span>(event.delta.text, end=<span class="str">""</span>, flush=<span class="kw">True</span>)

        <span class="kw">elif</span> event.type == <span class="str">"content_block_stop"</span>:
            <span class="fn">print</span>(<span class="str">"\nì½˜í…ì¸  ë¸”ë¡ ì¢…ë£Œ"</span>)

        <span class="kw">elif</span> event.type == <span class="str">"message_delta"</span>:
            <span class="fn">print</span>(<span class="str">f"\nStop reason: <span class="macro">{event.delta.stop_reason}</span>"</span>)

        <span class="kw">elif</span> event.type == <span class="str">"message_stop"</span>:
            <span class="fn">print</span>(<span class="str">"ë©”ì‹œì§€ ì¢…ë£Œ"</span>)
</code></pre>
</div>

<h3 id="streaming-typescript">TypeScript ìŠ¤íŠ¸ë¦¬ë°</h3>

<div class="code-block">
<div class="code-header">
<span class="language">TypeScript</span>
<button class="copy-btn" aria-label="Copy code">Copy</button>
</div>
<pre><code><span class="kw">import</span> Anthropic <span class="kw">from</span> <span class="str">'@anthropic-ai/sdk'</span>;

<span class="kw">const</span> client = <span class="kw">new</span> <span class="type">Anthropic</span>();

<span class="kw">const</span> stream = <span class="kw">await</span> client.messages.stream({
  model: <span class="str">'claude-<tier>20260101'</span>,
  max_tokens: <span class="num">1024</span>,
  messages: [
    { role: <span class="str">'user'</span>, content: <span class="str">'ê¸´ ì´ì•¼ê¸°ë¥¼ ë“¤ë ¤ì¤˜.'</span> }
  ],
});

<span class="cmt">// í…ìŠ¤íŠ¸ ìŠ¤íŠ¸ë¦¼</span>
<span class="kw">for await</span> (<span class="kw">const</span> text <span class="kw">of</span> stream.textStream) {
  process.stdout.write(text);
}

<span class="cmt">// ìµœì¢… ë©”ì‹œì§€</span>
<span class="kw">const</span> message = <span class="kw">await</span> stream.finalMessage();
console.log(<span class="str">`\n\nTotal tokens: <span class="macro">${message.usage.input_tokens + message.usage.output_tokens}</span>`</span>);
</code></pre>
</div>
</section>

<section class="content-section">
<h2 id="tool-use">íˆ´ ì‚¬ìš© (Function Calling)</h2>

<h3 id="tool-definition">íˆ´ ì •ì˜</h3>

<div class="code-block">
<div class="code-header">
<span class="language">Python</span>
<button class="copy-btn" aria-label="Copy code">Copy</button>
</div>
<pre><code><span class="kw">import</span> anthropic
<span class="kw">import</span> json

client = anthropic.Anthropic()

<span class="cmt"># íˆ´ ì •ì˜</span>
tools = [
    {
        <span class="str">"name"</span>: <span class="str">"get_weather"</span>,
        <span class="str">"description"</span>: <span class="str">"íŠ¹ì • ìœ„ì¹˜ì˜ í˜„ì¬ ë‚ ì”¨ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤."</span>,
        <span class="str">"input_schema"</span>: {
            <span class="str">"type"</span>: <span class="str">"object"</span>,
            <span class="str">"properties"</span>: {
                <span class="str">"location"</span>: {
                    <span class="str">"type"</span>: <span class="str">"string"</span>,
                    <span class="str">"description"</span>: <span class="str">"ë„ì‹œ ì´ë¦„, ì˜ˆ: Seoul"</span>
                },
                <span class="str">"unit"</span>: {
                    <span class="str">"type"</span>: <span class="str">"string"</span>,
                    <span class="str">"enum"</span>: [<span class="str">"celsius"</span>, <span class="str">"fahrenheit"</span>],
                    <span class="str">"description"</span>: <span class="str">"ì˜¨ë„ ë‹¨ìœ„"</span>
                }
            },
            <span class="str">"required"</span>: [<span class="str">"location"</span>]
        }
    },
    {
        <span class="str">"name"</span>: <span class="str">"calculate"</span>,
        <span class="str">"description"</span>: <span class="str">"ìˆ˜í•™ ê³„ì‚°ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤."</span>,
        <span class="str">"input_schema"</span>: {
            <span class="str">"type"</span>: <span class="str">"object"</span>,
            <span class="str">"properties"</span>: {
                <span class="str">"expression"</span>: {
                    <span class="str">"type"</span>: <span class="str">"string"</span>,
                    <span class="str">"description"</span>: <span class="str">"ê³„ì‚°ì‹, ì˜ˆ: 2 + 2"</span>
                }
            },
            <span class="str">"required"</span>: [<span class="str">"expression"</span>]
        }
    }
]

<span class="cmt"># ì²« ìš”ì²­</span>
message = client.messages.create(
    model=<span class="str">"claude-<tier>20260101"</span>,
    max_tokens=<span class="num">1024</span>,
    tools=tools,
    messages=[
        {<span class="str">"role"</span>: <span class="str">"user"</span>, <span class="str">"content"</span>: <span class="str">"ì„œìš¸ì˜ í˜„ì¬ ë‚ ì”¨ëŠ” ì–´ë•Œ?"</span>}
    ]
)

<span class="fn">print</span>(<span class="str">"Response:"</span>, json.dumps(message.model_dump(), indent=<span class="num">2</span>, ensure_ascii=<span class="kw">False</span>))
</code></pre>
</div>

<h3 id="tool-execution">íˆ´ ì‹¤í–‰ ë£¨í”„</h3>

<div class="code-block">
<div class="code-header">
<span class="language">Python</span>
<button class="copy-btn" aria-label="Copy code">Copy</button>
</div>
<pre><code><span class="kw">import</span> anthropic

client = anthropic.Anthropic()

<span class="cmt"># ì‹¤ì œ íˆ´ êµ¬í˜„</span>
<span class="kw">def</span> <span class="fn">get_weather</span>(location: str, unit: str = <span class="str">"celsius"</span>) -> str:
    <span class="cmt"># ì‹¤ì œë¡œëŠ” API í˜¸ì¶œ</span>
    <span class="kw">return</span> json.dumps({
        <span class="str">"location"</span>: location,
        <span class="str">"temperature"</span>: <span class="num">22</span>,
        <span class="str">"unit"</span>: unit,
        <span class="str">"condition"</span>: <span class="str">"ë§‘ìŒ"</span>
    })

<span class="kw">def</span> <span class="fn">calculate</span>(expression: str) -> str:
    <span class="kw">try</span>:
        result = eval(expression)  <span class="cmt"># ì‹¤ì œë¡œëŠ” ì•ˆì „í•œ íŒŒì„œ ì‚¬ìš©</span>
        <span class="kw">return</span> str(result)
    <span class="kw">except</span> <span class="type">Exception</span> <span class="kw">as</span> e:
        <span class="kw">return</span> <span class="str">f"Error: <span class="macro">{e}</span>"</span>

<span class="cmt"># íˆ´ ë§µ</span>
tool_functions = {
    <span class="str">"get_weather"</span>: get_weather,
    <span class="str">"calculate"</span>: calculate,
}

<span class="cmt"># ëŒ€í™” ì‹œì‘</span>
messages = [
    {<span class="str">"role"</span>: <span class="str">"user"</span>, <span class="str">"content"</span>: <span class="str">"ì„œìš¸ ë‚ ì”¨ë¥¼ ì•Œë ¤ì£¼ê³ , í™”ì”¨ë¡œ ë³€í™˜í•´ì¤˜."</span>}
]

<span class="kw">while</span> <span class="kw">True</span>:
    <span class="cmt"># Claude í˜¸ì¶œ</span>
    response = client.messages.create(
        model=<span class="str">"claude-<tier>20260101"</span>,
        max_tokens=<span class="num">4096</span>,
        tools=tools,
        messages=messages
    )

    <span class="fn">print</span>(<span class="str">f"\nStop reason: <span class="macro">{response.stop_reason}</span>"</span>)

    <span class="cmt"># ì¢…ë£Œ ì¡°ê±´</span>
    <span class="kw">if</span> response.stop_reason == <span class="str">"end_turn"</span>:
        <span class="fn">print</span>(<span class="str">f"\nFinal answer: <span class="macro">{response.content[0].text}</span>"</span>)
        <span class="kw">break</span>

    <span class="cmt"># íˆ´ ì‚¬ìš© ìš”ì²­ ì²˜ë¦¬</span>
    <span class="kw">if</span> response.stop_reason == <span class="str">"tool_use"</span>:
        <span class="cmt"># Assistant ì‘ë‹µ ì¶”ê°€</span>
        messages.append({
            <span class="str">"role"</span>: <span class="str">"assistant"</span>,
            <span class="str">"content"</span>: response.content
        })

        <span class="cmt"># íˆ´ ì‹¤í–‰</span>
        tool_results = []
        <span class="kw">for</span> block <span class="kw">in</span> response.content:
            <span class="kw">if</span> block.type == <span class="str">"tool_use"</span>:
                tool_name = block.name
                tool_input = block.input

                <span class="fn">print</span>(<span class="str">f"\nCalling tool: <span class="macro">{tool_name}</span>(<span class="macro">{tool_input}</span>)"</span>)

                <span class="cmt"># íˆ´ ì‹¤í–‰</span>
                tool_function = tool_functions[tool_name]
                tool_result = tool_function(**tool_input)

                <span class="fn">print</span>(<span class="str">f"Tool result: <span class="macro">{tool_result}</span>"</span>)

                tool_results.append({
                    <span class="str">"type"</span>: <span class="str">"tool_result"</span>,
                    <span class="str">"tool_use_id"</span>: block.id,
                    <span class="str">"content"</span>: tool_result
                })

        <span class="cmt"># íˆ´ ê²°ê³¼ ì¶”ê°€</span>
        messages.append({
            <span class="str">"role"</span>: <span class="str">"user"</span>,
            <span class="str">"content"</span>: tool_results
        })
</code></pre>
</div>
</section>

<section class="content-section">
<h2 id="vision">ë¹„ì „ (ì´ë¯¸ì§€ ì…ë ¥)</h2>

<h3 id="image-input">ì´ë¯¸ì§€ ë¶„ì„</h3>

<div class="code-block">
<div class="code-header">
<span class="language">Python</span>
<button class="copy-btn" aria-label="Copy code">Copy</button>
</div>
<pre><code><span class="kw">import</span> anthropic
<span class="kw">import</span> base64

client = anthropic.Anthropic()

<span class="cmt"># ì´ë¯¸ì§€ íŒŒì¼ ì½ê¸°</span>
<span class="kw">with</span> open(<span class="str">"diagram.png"</span>, <span class="str">"rb"</span>) <span class="kw">as</span> f:
    image_data = base64.standard_b64encode(f.read()).decode(<span class="str">"utf-8"</span>)

<span class="cmt"># ì´ë¯¸ì§€ì™€ í•¨ê»˜ ìš”ì²­</span>
message = client.messages.create(
    model=<span class="str">"claude-<tier>20260101"</span>,
    max_tokens=<span class="num">1024</span>,
    messages=[
        {
            <span class="str">"role"</span>: <span class="str">"user"</span>,
            <span class="str">"content"</span>: [
                {
                    <span class="str">"type"</span>: <span class="str">"image"</span>,
                    <span class="str">"source"</span>: {
                        <span class="str">"type"</span>: <span class="str">"base64"</span>,
                        <span class="str">"media_type"</span>: <span class="str">"image/png"</span>,  <span class="cmt"># image/jpeg, image/gif, image/webp</span>
                        <span class="str">"data"</span>: image_data,
                    },
                },
                {
                    <span class="str">"type"</span>: <span class="str">"text"</span>,
                    <span class="str">"text"</span>: <span class="str">"ì´ ë‹¤ì´ì–´ê·¸ë¨ì„ ì„¤ëª…í•´ì£¼ì„¸ìš”."</span>
                }
            ],
        }
    ],
)

<span class="fn">print</span>(message.content[<span class="num">0</span>].text)
</code></pre>
</div>

<h3 id="multiple-images">ì—¬ëŸ¬ ì´ë¯¸ì§€</h3>

<div class="code-block">
<div class="code-header">
<span class="language">Python</span>
<button class="copy-btn" aria-label="Copy code">Copy</button>
</div>
<pre><code><span class="cmt"># ì—¬ëŸ¬ ì´ë¯¸ì§€ ë¹„êµ</span>
<span class="kw">def</span> <span class="fn">load_image</span>(path: str) -> str:
    <span class="kw">with</span> open(path, <span class="str">"rb"</span>) <span class="kw">as</span> f:
        <span class="kw">return</span> base64.standard_b64encode(f.read()).decode(<span class="str">"utf-8"</span>)

message = client.messages.create(
    model=<span class="str">"claude-<tier>20260101"</span>,
    max_tokens=<span class="num">2048</span>,
    messages=[
        {
            <span class="str">"role"</span>: <span class="str">"user"</span>,
            <span class="str">"content"</span>: [
                {<span class="str">"type"</span>: <span class="str">"text"</span>, <span class="str">"text"</span>: <span class="str">"ì´ ë‘ ì´ë¯¸ì§€ì˜ ì°¨ì´ì ì„ ì„¤ëª…í•´ì£¼ì„¸ìš”:"</span>},
                {
                    <span class="str">"type"</span>: <span class="str">"image"</span>,
                    <span class="str">"source"</span>: {
                        <span class="str">"type"</span>: <span class="str">"base64"</span>,
                        <span class="str">"media_type"</span>: <span class="str">"image/jpeg"</span>,
                        <span class="str">"data"</span>: load_image(<span class="str">"before.jpg"</span>),
                    },
                },
                {<span class="str">"type"</span>: <span class="str">"text"</span>, <span class="str">"text"</span>: <span class="str">"vs"</span>},
                {
                    <span class="str">"type"</span>: <span class="str">"image"</span>,
                    <span class="str">"source"</span>: {
                        <span class="str">"type"</span>: <span class="str">"base64"</span>,
                        <span class="str">"media_type"</span>: <span class="str">"image/jpeg"</span>,
                        <span class="str">"data"</span>: load_image(<span class="str">"after.jpg"</span>),
                    },
                },
            ],
        }
    ],
)

<span class="fn">print</span>(message.content[<span class="num">0</span>].text)
</code></pre>
</div>
</section>

<section class="content-section">
<h2 id="prompt-caching">í”„ë¡¬í”„íŠ¸ ìºì‹±</h2>

<h3 id="cache-basics">ìºì‹± ê¸°ë³¸</h3>

<div class="code-block">
<div class="code-header">
<span class="language">ê°œë…</span>
<button class="copy-btn" aria-label="Copy code">Copy</button>
</div>
<pre><code>í”„ë¡¬í”„íŠ¸ ìºì‹±ì´ë€?
â€¢ ë°˜ë³µì ìœ¼ë¡œ ì‚¬ìš©ë˜ëŠ” ì»¨í…ìŠ¤íŠ¸(ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸, ë¬¸ì„œ ë“±)ë¥¼ ìºì‹±
â€¢ ìºì‹œëœ í† í°ì€ ì…ë ¥ ë¹„ìš©ì˜ 10%ë§Œ ì²­êµ¬ (90% ì ˆê°)
â€¢ 5ë¶„ TTL, ì‚¬ìš© ì‹œë§ˆë‹¤ ìë™ ê°±ì‹ 
â€¢ ìµœì†Œ 1024 í† í°ë¶€í„° ìºì‹± ê°€ëŠ¥

ë¹„ìš© ì˜ˆì‹œ (Claude 4 Sonnet):
ì¼ë°˜ ì…ë ¥: ë³€ë™ / 1M tokens
ìºì‹œ ì½ê¸°: ë³€ë™ / 1M tokens (90% í• ì¸)
ìºì‹œ ì“°ê¸°: ë³€ë™ / 1M tokens (25% ì¶”ê°€ ë¹„ìš©)

ì–¸ì œ ì‚¬ìš©?
âœ“ ê¸´ ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸
âœ“ í° ë¬¸ì„œ ë¶„ì„ (ì—¬ëŸ¬ ì§ˆë¬¸)
âœ“ ì½”ë“œë² ì´ìŠ¤ ë¶„ì„
âœ“ ë°˜ë³µì ì¸ ëŒ€í™” (5ë¶„ ì´ë‚´)
</code></pre>
</div>

<h3 id="cache-usage">ìºì‹± ì‚¬ìš©ë²•</h3>

<div class="code-block">
<div class="code-header">
<span class="language">Python</span>
<button class="copy-btn" aria-label="Copy code">Copy</button>
</div>
<pre><code><span class="kw">import</span> anthropic

client = anthropic.Anthropic()

<span class="cmt"># cache_controlì„ ì‚¬ìš©í•˜ì—¬ ìºì‹±í•  ë¸”ë¡ ì§€ì •</span>
response = client.messages.create(
    model=<span class="str">"claude-<tier>20260101"</span>,
    max_tokens=<span class="num">1024</span>,
    system=[
        {
            <span class="str">"type"</span>: <span class="str">"text"</span>,
            <span class="str">"text"</span>: <span class="str">"ë‹¹ì‹ ì€ Python ì „ë¬¸ê°€ì…ë‹ˆë‹¤. PEP 8 ìŠ¤íƒ€ì¼ì„ ë”°ë¥´ê³ ..."</span>,  <span class="cmt"># ê¸´ ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸</span>
            <span class="str">"cache_control"</span>: {<span class="str">"type"</span>: <span class="str">"ephemeral"</span>}  <span class="cmt"># ìºì‹± í™œì„±í™”</span>
        }
    ],
    messages=[
        {
            <span class="str">"role"</span>: <span class="str">"user"</span>,
            <span class="str">"content"</span>: <span class="str">"FastAPI ë¼ìš°í„°ë¥¼ ì‘ì„±í•´ì¤˜."</span>
        }
    ]
)

<span class="cmt"># ìºì‹œ ì‚¬ìš©ëŸ‰ í™•ì¸</span>
<span class="fn">print</span>(<span class="str">f"Input tokens: <span class="macro">{response.usage.input_tokens}</span>"</span>)
<span class="fn">print</span>(<span class="str">f"Cache creation tokens: <span class="macro">{response.usage.cache_creation_input_tokens}</span>"</span>)
<span class="fn">print</span>(<span class="str">f"Cache read tokens: <span class="macro">{response.usage.cache_read_input_tokens}</span>"</span>)

<span class="cmt"># 5ë¶„ ì´ë‚´ ë‘ ë²ˆì§¸ ìš”ì²­ (ìºì‹œ íˆíŠ¸)</span>
response2 = client.messages.create(
    model=<span class="str">"claude-<tier>20260101"</span>,
    max_tokens=<span class="num">1024</span>,
    system=[
        {
            <span class="str">"type"</span>: <span class="str">"text"</span>,
            <span class="str">"text"</span>: <span class="str">"ë‹¹ì‹ ì€ Python ì „ë¬¸ê°€ì…ë‹ˆë‹¤. PEP 8 ìŠ¤íƒ€ì¼ì„ ë”°ë¥´ê³ ..."</span>,  <span class="cmt"># ë™ì¼í•œ í…ìŠ¤íŠ¸</span>
            <span class="str">"cache_control"</span>: {<span class="str">"type"</span>: <span class="str">"ephemeral"</span>}
        }
    ],
    messages=[
        {
            <span class="str">"role"</span>: <span class="str">"user"</span>,
            <span class="str">"content"</span>: <span class="str">"ì´ì œ Pydantic ëª¨ë¸ì„ ì‘ì„±í•´ì¤˜."</span>
        }
    ]
)

<span class="cmt"># ìºì‹œ íˆíŠ¸ í™•ì¸</span>
<span class="fn">print</span>(<span class="str">f"\në‘ ë²ˆì§¸ ìš”ì²­:"</span>)
<span class="fn">print</span>(<span class="str">f"Cache read tokens: <span class="macro">{response2.usage.cache_read_input_tokens}</span>"</span>)  <span class="cmt"># ìºì‹œëœ í† í° ìˆ˜</span>
</code></pre>
</div>

<h3 id="cache-documents">ë¬¸ì„œ ìºì‹±</h3>

<div class="code-block">
<div class="code-header">
<span class="language">Python</span>
<button class="copy-btn" aria-label="Copy code">Copy</button>
</div>
<pre><code><span class="cmt"># ê¸´ ë¬¸ì„œë¥¼ ìºì‹±í•˜ì—¬ ì—¬ëŸ¬ ì§ˆë¬¸</span>
<span class="kw">with</span> open(<span class="str">"long_document.txt"</span>, <span class="str">"r"</span>) <span class="kw">as</span> f:
    document = f.read()  <span class="cmt"># ì˜ˆ: 50,000 í† í°</span>

<span class="cmt"># ì²« ë²ˆì§¸ ì§ˆë¬¸ (ìºì‹œ ìƒì„±)</span>
response1 = client.messages.create(
    model=<span class="str">"claude-<tier>20260101"</span>,
    max_tokens=<span class="num">1024</span>,
    messages=[
        {
            <span class="str">"role"</span>: <span class="str">"user"</span>,
            <span class="str">"content"</span>: [
                {
                    <span class="str">"type"</span>: <span class="str">"text"</span>,
                    <span class="str">"text"</span>: <span class="str">f"ë‹¤ìŒ ë¬¸ì„œë¥¼ ê¸°ë°˜ìœ¼ë¡œ ë‹µë³€í•´ì£¼ì„¸ìš”:\n\n<span class="macro">{document}</span>"</span>,
                    <span class="str">"cache_control"</span>: {<span class="str">"type"</span>: <span class="str">"ephemeral"</span>}
                },
                {
                    <span class="str">"type"</span>: <span class="str">"text"</span>,
                    <span class="str">"text"</span>: <span class="str">"ì£¼ìš” ë‚´ìš©ì„ ìš”ì•½í•´ì£¼ì„¸ìš”."</span>
                }
            ]
        }
    ]
)

<span class="fn">print</span>(response1.content[<span class="num">0</span>].text)
<span class="fn">print</span>(<span class="str">f"\nìºì‹œ ìƒì„±: <span class="macro">{response1.usage.cache_creation_input_tokens}</span> tokens"</span>)

<span class="cmt"># ë‘ ë²ˆì§¸ ì§ˆë¬¸ (ìºì‹œ ì¬ì‚¬ìš©)</span>
response2 = client.messages.create(
    model=<span class="str">"claude-<tier>20260101"</span>,
    max_tokens=<span class="num">1024</span>,
    messages=[
        {
            <span class="str">"role"</span>: <span class="str">"user"</span>,
            <span class="str">"content"</span>: [
                {
                    <span class="str">"type"</span>: <span class="str">"text"</span>,
                    <span class="str">"text"</span>: <span class="str">f"ë‹¤ìŒ ë¬¸ì„œë¥¼ ê¸°ë°˜ìœ¼ë¡œ ë‹µë³€í•´ì£¼ì„¸ìš”:\n\n<span class="macro">{document}</span>"</span>,
                    <span class="str">"cache_control"</span>: {<span class="str">"type"</span>: <span class="str">"ephemeral"</span>}
                },
                {
                    <span class="str">"type"</span>: <span class="str">"text"</span>,
                    <span class="str">"text"</span>: <span class="str">"ì£¼ìš” ë“±ì¥ì¸ë¬¼ì€ ëˆ„êµ¬ì¸ê°€ìš”?"</span>
                }
            ]
        }
    ]
)

<span class="fn">print</span>(response2.content[<span class="num">0</span>].text)
<span class="fn">print</span>(<span class="str">f"\nìºì‹œ ì½ê¸°: <span class="macro">{response2.usage.cache_read_input_tokens}</span> tokens"</span>)

<span class="cmt"># ë¹„ìš© ì ˆê° ê³„ì‚°</span>
normal_cost = <span class="num">50000</span> * <span class="num">3.00</span> / <span class="num">1_000_000</span>  <span class="cmt"># ë³€ë™</span>
cached_cost = <span class="num">50000</span> * <span class="num">0.30</span> / <span class="num">1_000_000</span>  <span class="cmt"># ë³€ë™</span>
<span class="fn">print</span>(<span class="str">f"\në¹„ìš© ì ˆê°: ${normal_cost - cached_cost:.4f} (90%)"</span>)
</code></pre>
</div>
</section>

<section class="content-section">
<h2 id="http-api">HTTP API ì§ì ‘ í˜¸ì¶œ</h2>

<h3 id="curl">cURL ì˜ˆì‹œ</h3>

<div class="code-block">
<div class="code-header">
<span class="language">bash</span>
<button class="copy-btn" aria-label="Copy code">Copy</button>
</div>
<pre><code>curl https://api.anthropic.com/v1/messages \
  -H <span class="str">"x-api-key: $ANTHROPIC_API_KEY"</span> \
  -H <span class="str">"anthropic-version: 2023-06-01"</span> \
  -H <span class="str">"content-type: application/json"</span> \
  -d '{
    "model": "claude-<tier>20260101",
    "max_tokens": 1024,
    "messages": [
      {
        "role": "user",
        "content": "ì•ˆë…•í•˜ì„¸ìš”!"
      }
    ]
  }'
</code></pre>
</div>

<h3 id="http-response">ì‘ë‹µ êµ¬ì¡°</h3>

<div class="code-block">
<div class="code-header">
<span class="language">JSON</span>
<button class="copy-btn" aria-label="Copy code">Copy</button>
</div>
<pre><code>{
  <span class="str">"id"</span>: <span class="str">"msg_01XYZ..."</span>,
  <span class="str">"type"</span>: <span class="str">"message"</span>,
  <span class="str">"role"</span>: <span class="str">"assistant"</span>,
  <span class="str">"content"</span>: [
    {
      <span class="str">"type"</span>: <span class="str">"text"</span>,
      <span class="str">"text"</span>: <span class="str">"ì•ˆë…•í•˜ì„¸ìš”! ë¬´ì—‡ì„ ë„ì™€ë“œë¦´ê¹Œìš”?"</span>
    }
  ],
  <span class="str">"model"</span>: <span class="str">"claude-<tier>20260101"</span>,
  <span class="str">"stop_reason"</span>: <span class="str">"end_turn"</span>,
  <span class="str">"stop_sequence"</span>: <span class="kw">null</span>,
  <span class="str">"usage"</span>: {
    <span class="str">"input_tokens"</span>: <span class="num">12</span>,
    <span class="str">"output_tokens"</span>: <span class="num">18</span>
  }
}
</code></pre>
</div>
</section>

<section class="content-section">
<h2 id="cost-optimization">ë¹„ìš© ìµœì í™”</h2>

<h3 id="optimization-strategies">ìµœì í™” ì „ëµ</h3>

<div class="code-block">
<div class="code-header">
<span class="language">ì „ëµ</span>
<button class="copy-btn" aria-label="Copy code">Copy</button>
</div>
<pre><code><span class="cmt">// 1. ì˜¬ë°”ë¥¸ ëª¨ë¸ ì„ íƒ</span>
ê°„ë‹¨í•œ ì‘ì—… â†’ Haiku (ë³€ë™/ë³€ë™)
ì¼ë°˜ ì‘ì—… â†’ Sonnet (ë³€ë™/ë³€ë™)
ë³µì¡í•œ ì‘ì—… â†’ Opus (ë³€ë™/ë³€ë™)

<span class="cmt">// 2. í”„ë¡¬í”„íŠ¸ ìºì‹±</span>
â€¢ ê¸´ ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ ìºì‹±
â€¢ ëŒ€ìš©ëŸ‰ ë¬¸ì„œ ìºì‹±
â€¢ ë°˜ë³µì ì¸ ì»¨í…ìŠ¤íŠ¸ ìºì‹±
â†’ 90% ë¹„ìš© ì ˆê°

<span class="cmt">// 3. max_tokens ì œí•œ</span>
â€¢ í•„ìš”í•œ ë§Œí¼ë§Œ ìš”ì²­
â€¢ ì¶œë ¥ì´ ì…ë ¥ë³´ë‹¤ 5ë°° ë¹„ìŒˆ
â€¢ ê¸°ë³¸ê°’ ì‚¬ìš© ì§€ì–‘

<span class="cmt">// 4. ë¶ˆí•„ìš”í•œ í† í° ì œê±°</span>
â€¢ ì¥í™©í•œ ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ ì¶•ì•½
â€¢ ì¤‘ë³µ ì»¨í…ìŠ¤íŠ¸ ì œê±°
â€¢ XML íƒœê·¸ë³´ë‹¤ ê°„ê²°í•œ êµ¬ë¶„ì

<span class="cmt">// 5. ìŠ¤íŠ¸ë¦¬ë°</span>
â€¢ ë¹„ìš©ì€ ë™ì¼í•˜ì§€ë§Œ ì‚¬ìš©ì ê²½í—˜ ê°œì„ 
â€¢ ì¡°ê¸° ì¢…ë£Œ ê°€ëŠ¥

<span class="cmt">// 6. ë°°ì¹˜ ì²˜ë¦¬</span>
â€¢ ì—¬ëŸ¬ ì‘ì—…ì„ í•˜ë‚˜ì˜ ìš”ì²­ìœ¼ë¡œ í†µí•©
â€¢ ë‹¨, ì‹¤íŒ¨ ì‹œ ì „ì²´ ì¬ì‹œë„ í•„ìš”
</code></pre>
</div>

<h3 id="cost-calculator">ë¹„ìš© ê³„ì‚°ê¸°</h3>

<div class="code-block">
<div class="code-header">
<span class="language">Python</span>
<button class="copy-btn" aria-label="Copy code">Copy</button>
</div>
<pre><code><span class="kw">class</span> <span class="type">CostCalculator</span>:
    PRICING = {
        <span class="str">"claude-<tier>"</span>: (<span class="num">15.0</span>, <span class="num">75.0</span>),
        <span class="str">"claude-<tier>"</span>: (<span class="num">3.0</span>, <span class="num">15.0</span>),
        <span class="str">"claude-<tier>"</span>: (<span class="num">0.25</span>, <span class="num">1.25</span>),
    }

    <span class="kw">def</span> <span class="fn">calculate</span>(<span class="kw">self</span>, model: str, input_tokens: int, output_tokens: int,
                  cached_tokens: int = <span class="num">0</span>) -> float:
        <span class="str">"""ë¹„ìš© ê³„ì‚° (USD)"""</span>
        input_price, output_price = <span class="kw">self</span>.PRICING[model]

        <span class="cmt"># ì¼ë°˜ ì…ë ¥ í† í°</span>
        normal_input = input_tokens - cached_tokens
        input_cost = normal_input * input_price / <span class="num">1_000_000</span>

        <span class="cmt"># ìºì‹œëœ í† í° (90% í• ì¸)</span>
        cache_cost = cached_tokens * (input_price * <span class="num">0.1</span>) / <span class="num">1_000_000</span>

        <span class="cmt"># ì¶œë ¥ í† í°</span>
        output_cost = output_tokens * output_price / <span class="num">1_000_000</span>

        <span class="kw">return</span> input_cost + cache_cost + output_cost

    <span class="kw">def</span> <span class="fn">compare_models</span>(<span class="kw">self</span>, input_tokens: int, output_tokens: int):
        <span class="str">"""ëª¨ë¸ë³„ ë¹„ìš© ë¹„êµ"""</span>
        <span class="fn">print</span>(<span class="str">f"ì…ë ¥: <span class="macro">{input_tokens}</span> í† í°, ì¶œë ¥: <span class="macro">{output_tokens}</span> í† í°\n"</span>)

        <span class="kw">for</span> model <span class="kw">in</span> <span class="kw">self</span>.PRICING:
            cost = <span class="kw">self</span>.calculate(model, input_tokens, output_tokens)
            <span class="fn">print</span>(<span class="str">f"<span class="macro">{model:20}</span> ${cost:.6f}"</span>)

<span class="cmt"># ì‚¬ìš© ì˜ˆì‹œ</span>
calc = CostCalculator()

<span class="cmt"># ì¼ë°˜ì ì¸ ìš”ì²­ (2K input, 500 output)</span>
calc.compare_models(input_tokens=<span class="num">2000</span>, output_tokens=<span class="num">500</span>)

<span class="cmt"># ì¶œë ¥:</span>
<span class="cmt"># claude-<tier>         ë³€ë™</span>
<span class="cmt"># claude-<tier>       ë³€ë™</span>
<span class="cmt"># claude-<tier>        ë³€ë™</span>
</code></pre>
</div>
</section>

<section class="content-section">
<h2 id="best-practices">ëª¨ë²” ì‚¬ë¡€</h2>

<h3 id="general-tips">ì¼ë°˜ ê¶Œì¥ì‚¬í•­</h3>

<div class="code-block">
<div class="code-header">
<span class="language">ëª¨ë²” ì‚¬ë¡€</span>
<button class="copy-btn" aria-label="Copy code">Copy</button>
</div>
<pre><code><span class="cmt">// 1. ì—ëŸ¬ ì²˜ë¦¬</span>
âœ“ í•­ìƒ try-except ì‚¬ìš©
âœ“ ì¬ì‹œë„ ë¡œì§ êµ¬í˜„ (ì§€ìˆ˜ ë°±ì˜¤í”„)
âœ“ Rate Limit ì—ëŸ¬ ì²˜ë¦¬ (429)
âœ“ íƒ€ì„ì•„ì›ƒ ì„¤ì •

<span class="cmt">// 2. ë³´ì•ˆ</span>
âœ“ API í‚¤ í™˜ê²½ ë³€ìˆ˜ ê´€ë¦¬
âœ“ ì„œë²„ ì‚¬ì´ë“œì—ì„œë§Œ í˜¸ì¶œ
âœ“ HTTPS í•„ìˆ˜
âœ“ ë¡œê·¸ì— ë¯¼ê° ì •ë³´ ì œì™¸

<span class="cmt">// 3. ì„±ëŠ¥</span>
âœ“ ìŠ¤íŠ¸ë¦¬ë°ìœ¼ë¡œ UX ê°œì„ 
âœ“ í”„ë¡¬í”„íŠ¸ ìºì‹± ì ê·¹ í™œìš©
âœ“ ì ì ˆí•œ max_tokens ì„¤ì •
âœ“ ë¹„ë™ê¸° ì²˜ë¦¬ (asyncio)

<span class="cmt">// 4. ë¹„ìš©</span>
âœ“ ì‘ì—…ì— ë§ëŠ” ëª¨ë¸ ì„ íƒ
âœ“ í† í° ì‚¬ìš©ëŸ‰ ëª¨ë‹ˆí„°ë§
âœ“ ë¶ˆí•„ìš”í•œ ì»¨í…ìŠ¤íŠ¸ ì œê±°
âœ“ ìºì‹± ê°€ëŠ¥í•œ ë¶€ë¶„ ì‹ë³„

<span class="cmt">// 5. í’ˆì§ˆ</span>
âœ“ ëª…í™•í•œ ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸
âœ“ Few-shot ì˜ˆì‹œ ì œê³µ
âœ“ ì¶œë ¥ í¬ë§· ëª…ì‹œ
âœ“ ë‹¤ì–‘í•œ ì…ë ¥ìœ¼ë¡œ í…ŒìŠ¤íŠ¸
</code></pre>
</div>
</section>

<section class="content-section">
  <h2 id="summary">í•µì‹¬ ì •ë¦¬</h2>
  <ul>
    <li>Claude API ê°€ì´ë“œì˜ í•µì‹¬ ê°œë…ê³¼ íë¦„ì„ ì •ë¦¬í•©ë‹ˆë‹¤.</li>
    <li>Claude API ê°œìš”ë¥¼ ë‹¨ê³„ë³„ë¡œ ì´í•´í•©ë‹ˆë‹¤.</li>
    <li>ì‹¤ì „ ì ìš© ì‹œ ê¸°ì¤€ê³¼ ì£¼ì˜ì ì„ í™•ì¸í•©ë‹ˆë‹¤.</li>
  </ul>
</section>

<section class="content-section">
  <h2 id="practice-tips">ì‹¤ë¬´ íŒ</h2>
  <ul>
    <li>ì…ë ¥/ì¶œë ¥ ì˜ˆì‹œë¥¼ ê³ ì •í•´ ì¬í˜„ì„±ì„ í™•ë³´í•˜ì„¸ìš”.</li>
    <li>Claude API ê°€ì´ë“œ ë²”ìœ„ë¥¼ ì‘ê²Œ ì¡ê³  ë‹¨ê³„ì ìœ¼ë¡œ í™•ì¥í•˜ì„¸ìš”.</li>
    <li>Claude API ê°œìš” ì¡°ê±´ì„ ë¬¸ì„œí™”í•´ ëŒ€ì‘ ì‹œê°„ì„ ì¤„ì´ì„¸ìš”.</li>
  </ul>
</section>
<nav class="page-nav"></nav>
</main>
<aside class="inline-toc">
  <div class="toc-title">ëª©ì°¨</div>
  <div class="toc-nav"></div>
</aside>
<footer class="site-footer"></footer>
</div>
<script src="../js/main.js"></script>
</body>
</html>
